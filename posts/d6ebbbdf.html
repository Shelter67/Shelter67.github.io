<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><link rel=manifest href=/manifest.json><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Spring Boot 3 | Shelter</title><meta name="author" content="Shelter"><meta name="copyright" content="Shelter"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="第1章 First Spring Boot认识Spring Boot我们来看看官方是如何介绍的： https:&#x2F;&#x2F;docs.spring.io&#x2F;spring-boot&#x2F;index.html   Spring Boot倡导约定优于配置，将简化开发发挥到极致。使用Spring Boot框架可以快速构建Spring应用，再也不需要大量的繁琐的的各种配置。Spring Boot框架设计的目标是：程序员关注">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring Boot 3">
<meta property="og:url" content="http://localhost:4000/posts/d6ebbbdf.html">
<meta property="og:site_name" content="Shelter">
<meta property="og:description" content="第1章 First Spring Boot认识Spring Boot我们来看看官方是如何介绍的： https:&#x2F;&#x2F;docs.spring.io&#x2F;spring-boot&#x2F;index.html   Spring Boot倡导约定优于配置，将简化开发发挥到极致。使用Spring Boot框架可以快速构建Spring应用，再也不需要大量的繁琐的的各种配置。Spring Boot框架设计的目标是：程序员关注">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.dreamshelter.cn/blog/source/img/cover/18.png">
<meta property="article:published_time" content="2025-06-03T18:54:00.000Z">
<meta property="article:modified_time" content="2026-02-09T10:05:53.985Z">
<meta property="article:author" content="Shelter">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="SSM">
<meta property="article:tag" content="boot">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.dreamshelter.cn/blog/source/img/cover/18.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Spring Boot 3",
  "url": "http://localhost:4000/posts/d6ebbbdf.html",
  "image": "https://cdn.dreamshelter.cn/blog/source/img/cover/18.png",
  "datePublished": "2025-06-03T18:54:00.000Z",
  "dateModified": "2026-02-09T10:05:53.985Z",
  "author": [
    {
      "@type": "Person",
      "name": "Shelter",
      "url": "https://github.com/Shelter67"
    }
  ]
}</script><link rel="shortcut icon" href="https://cdn.dreamshelter.cn/blog/source/img/favicon.png"><link rel="canonical" href="http://localhost:4000/posts/d6ebbbdf.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="manifest" href="/manifest.json"/><meta name="msapplication-TileColor" content="#49b1f5"/><link rel="apple-touch-icon" sizes="180x180" href="/img/siteicon/128.png"/><link rel="icon" type="image/png" sizes="32x32" href="/img/siteicon/32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/img/siteicon/16.png"/><link rel="mask-icon" href="/img/siteicon/128.png" color="#5bbad5"/><link rel="stylesheet" href="/css/index.css?v=5.5.4"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":3,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.13.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Spring Boot 3',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><style>#waifu { left: auto !important; right: 20px !important; }</style><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-veeink@1.0.7/lib/clock-min.css" /><link rel="stylesheet" href="https://www.fomal.cc/static/css/runtime.min.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 8.1.1"></head><body><div class="bg-animation" id="web_bg" style="background-image: url(https://cdn.dreamshelter.cn/blog/source/img/background.png);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/blog/source/img/touxiang.jpg" onerror="this.onerror=null;this.src='https://cdn.dreamshelter.cn/blog/source/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">29</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">35</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/bangumis/zhuifan.html"><i class="fa-fw fas fa-tv"></i><span> 追番</span></a></div><div class="menus_item"><a class="site-page" href="/bangumis/zhuiju.html"><i class="fa-fw fas fa-video"></i><span> 追剧</span></a></div><div class="menus_item"><a class="site-page" href="/gongxianban"><i class="fa-fw fab fa-github-alt"></i><span> 贡献板</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope"></i><span> 留言板</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://cdn.dreamshelter.cn/blog/source/img/cover/18.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Shelter</span></a><a class="nav-page-title" href="/"><span class="site-name">Spring Boot 3</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/bangumis/zhuifan.html"><i class="fa-fw fas fa-tv"></i><span> 追番</span></a></div><div class="menus_item"><a class="site-page" href="/bangumis/zhuiju.html"><i class="fa-fw fas fa-video"></i><span> 追剧</span></a></div><div class="menus_item"><a class="site-page" href="/gongxianban"><i class="fa-fw fab fa-github-alt"></i><span> 贡献板</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope"></i><span> 留言板</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Spring Boot 3</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-06-03T18:54:00.000Z" title="发表于 2025-06-04 02:54:00">2025-06-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2026-02-09T10:05:53.985Z" title="更新于 2026-02-09 18:05:53">2026-02-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">37.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>137分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:365,&quot;messagePrev&quot;:&quot;It has been&quot;,&quot;messageNext&quot;:&quot;days since the last update, the content of the article may be outdated.&quot;,&quot;postUpdate&quot;:&quot;2026-02-09 18:05:53&quot;}" hidden></div><h1 id="第1章-First-Spring-Boot"><a href="#第1章-First-Spring-Boot" class="headerlink" title="第1章 First Spring Boot"></a>第1章 First Spring Boot</h1><h2 id="认识Spring-Boot"><a href="#认识Spring-Boot" class="headerlink" title="认识Spring Boot"></a>认识Spring Boot</h2><p>我们来看看官方是如何介绍的：</p>
<p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/index.html">https://docs.spring.io/spring-boot/index.html</a></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250413160742206.png" alt="image-20250413160742206"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250413160744834.png" alt="image-20250413160744834"></p>
<p>Spring Boot倡导<code>约定优于配置</code>，将<code>简化开发</code>发挥到极致。使用Spring Boot框架可以快速构建Spring应用，再也不需要<code>大量的繁琐的</code>的各种配置。Spring Boot框架设计的目标是：程序员关注业务逻辑就行了，环境方面的事儿交给Spring Boot就行。</p>
<p>Spring Boot特性：</p>
<ol>
<li>快速创建独立的Spring应用程序。（Spring支持的SpringBoot都支持，也就是说SpringBoot全方位支持IoC，AOP等）</li>
<li>嵌入式的Tomcat、Jetty、Undertow容器。（web服务器本身就是几个jar包，Spring Boot框架自动嵌入了。）</li>
<li>需要什么功能时只需要引入对应的starter启动器即可。（启动器可以自动管理这个功能相关的依赖，自动管理依赖版本的控制）</li>
<li>尽最大努力，最大可能的自动配置Spring应用和第三方库。（例如：如果要进行事务的控制，不用做任何事务相关的配置，只需要在service类上添加@Transactional注解即可。）</li>
<li>没有代码生成，没有XML配置。（Spring Boot的应用程序在启动后不会动态地创建新的Java类，所有逻辑都是在编译期就已经确定好的）</li>
<li>提供了生产监控的支持，例如健康检查，度量信息，跟踪信息，审计信息等。也支持集成外部监控系统。</li>
</ol>
<p>Spring Boot的开箱即用和约定优于配置：</p>
<ul>
<li>开箱即用：Spring Boot框架设计得非常便捷，开发者能够在几乎不需要任何复杂的配置的情况下，快速搭建并运行一个功能完备的Spring应用。</li>
<li>约定优于配置：“约定优于配置”（Convention Over Configuration, CoC）是一种软件设计哲学，核心思想是通过提供一组合理的默认行为来减少配置的数量，从而简化开发流程。例如：Spring Boot默认约定了使用某个事务管理器，在事务方面不需要做任何配置，只需要在对应代码的位置上使用<code>@Transactional</code>注解即可。</li>
</ul>
<h2 id="知识储备"><a href="#知识储备" class="headerlink" title="知识储备"></a>知识储备</h2><p>学习本套课程的前提是你已经学过了：</p>
<ul>
<li>MyBatis</li>
<li>Spring</li>
<li>SpringMVC</li>
</ul>
<h2 id="主要版本说明"><a href="#主要版本说明" class="headerlink" title="主要版本说明"></a>主要版本说明</h2><p>Spring Boot版本：3.3.5</p>
<p>IDEA版本：2024.2.4</p>
<p>JDK版本：21（Spring Boot3要求JDK的最低版本是JDK17）</p>
<h2 id="First-Spring-Boot"><a href="#First-Spring-Boot" class="headerlink" title="First Spring Boot"></a>First Spring Boot</h2><p>需求：在浏览器上输入请求路径 <a href="http://localhost:8080/hello%EF%BC%8C%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%8A%E6%98%BE%E7%A4%BA">http://localhost:8080/hello，在浏览器上显示</a> HelloWorld!</p>
<p>使用**<font style="color:#DF2A3F;">Spring Boot3 开发web应用</font>**，实现步骤如下：</p>
<h3 id="第一步：创建一个空的工程，并设置JDK版本21（Spring-Boot-3要求JDK最低版本是17）"><a href="#第一步：创建一个空的工程，并设置JDK版本21（Spring-Boot-3要求JDK最低版本是17）" class="headerlink" title="第一步：创建一个空的工程，并设置JDK版本21（Spring Boot 3要求JDK最低版本是17）"></a>第一步：创建一个空的工程，并设置JDK版本21（Spring Boot 3要求JDK最低版本是17）</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250413163139334.png" alt="image-20250413163139334"></p>
<p>设置jdk21</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250413163147002.png" alt="image-20250413163147002"></p>
<h3 id="第二步：设置maven"><a href="#第二步：设置maven" class="headerlink" title="第二步：设置maven"></a>第二步：设置maven</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250414180440476.png" alt="image-20250414180440476"></p>
<h3 id="第三步：创建一个Maven模块-sb3-01-first-web"><a href="#第三步：创建一个Maven模块-sb3-01-first-web" class="headerlink" title="第三步：创建一个Maven模块 sb3-01-first-web"></a>第三步：创建一个Maven模块 sb3-01-first-web</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250414180717296.png" alt="image-20250414180717296"></p>
<h3 id="第四步：打开Spring-Boot-3官方文档，按照文档一步一步进行"><a href="#第四步：打开Spring-Boot-3官方文档，按照文档一步一步进行" class="headerlink" title="第四步：打开Spring Boot 3官方文档，按照文档一步一步进行"></a>第四步：打开Spring Boot 3官方文档，按照文档一步一步进行</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250414180926480.png" alt="image-20250414180926480"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250414180931149.png" alt="image-20250414180931149"></p>
<h3 id="第五步：要使用Spring-Boot-3，需要继承这个开源项目。从官方指导文档中复制以下内容："><a href="#第五步：要使用Spring-Boot-3，需要继承这个开源项目。从官方指导文档中复制以下内容：" class="headerlink" title="第五步：要使用Spring Boot 3，需要继承这个开源项目。从官方指导文档中复制以下内容："></a>第五步：要使用Spring Boot 3，需要继承这个开源项目。从官方指导文档中复制以下内容：</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250414180949569.png" alt="image-20250414180949569"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--继承Spring Boot 3.3.3开源项目--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--使用SpringBoot框架，首先要继承SpringBoot这个父工程。--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--这里为什么不是直接引入springboot依赖，而是继承SpringBoot父工程的方式??????--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>我们开发的每一个项目其实可以看做是 Spring Boot 项目下的子项目。</p>
<h3 id="第六步：添加Spring-Boot的web-starter"><a href="#第六步：添加Spring-Boot的web-starter" class="headerlink" title="第六步：添加Spring Boot的web starter"></a>第六步：添加Spring Boot的web starter</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250414181710087.png" alt="image-20250414181710087"></p>
<p>这个也就是web启动器，在parent下立即添加如下配置，让Spring Boot项目具备开发web应用的依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!--依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--引入web启动器，这样的话自动会将web开发相关的所有依赖全部引入，例如：json、tomcat、springmvc等，包括这些依赖的版本也不需要我们管理，自动管理。这里的版本号也在父工程管理好了--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>关联的依赖也被引入进来，如下：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250414182237867.png" alt="image-20250414182237867"> </p>
<p>可以看到spring mvc被引入了，tomcat服务器也被引入了。</p>
<h3 id="第七步：编写Spring-Boot主入口程序"><a href="#第七步：编写Spring-Boot主入口程序" class="headerlink" title="第七步：编写Spring Boot主入口程序"></a>第七步：编写Spring Boot主入口程序</h3><p>新建下面这个</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250414182626673.png" alt="image-20250414182626673"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.springboot;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 所有的springboot应用的主入口程序必须使用 @SpringBootApplication 注解进行标注。</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 主入口，运行main方法就是启动服务器</span></span><br><span class="line">        <span class="comment">//需要两个参数，一个是主入口类，一个是主入口里面的这个参数比如args</span></span><br><span class="line">        SpringApplication.run(MyApplication.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="第八步：编写controller"><a href="#第八步：编写controller" class="headerlink" title="第八步：编写controller"></a>第八步：编写controller</h3><p>必须要放在主入口程序同级目录下或者子目录里</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 提醒：这个HelloController要想被spring容器管理，这个类所在的位置必须满足：和SpringBoot主入口程序在同级目录下，或者子目录下。</span></span><br><span class="line"><span class="comment">//@Controller</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//发送一个get请求，后面是请求路径，然后返回字符串到浏览器上，就要加一个@ResponseBody</span></span><br><span class="line">    <span class="comment">// 也可以不加，就需要把Controller换成RestController，既起到了Controller作用又给这个Controller所有的方法都加上ResponseBody注解</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="comment">//@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello, SpringBoot3!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="第九步：运行main方法就是启动web容器"><a href="#第九步：运行main方法就是启动web容器" class="headerlink" title="第九步：运行main方法就是启动web容器"></a>第九步：运行main方法就是启动web容器</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250414184053516.png" alt="image-20250414184053516"></p>
<h3 id="第十步：打开浏览器访问"><a href="#第十步：打开浏览器访问" class="headerlink" title="第十步：打开浏览器访问"></a>第十步：打开浏览器访问</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250414184101339.png" alt="image-20250414184101339"></p>
<h2 id="便捷的部署方式"><a href="#便捷的部署方式" class="headerlink" title="便捷的部署方式"></a>便捷的部署方式</h2><h3 id="打jar包运行"><a href="#打jar包运行" class="headerlink" title="打jar包运行"></a>打jar包运行</h3><p>Spring Boot提供了打包插件，可以将Spring Boot项目打包为**<font style="color:#DF2A3F;">可执行 jar 包</font>**。Web服务器（Tomcat）也会连同一块打入jar包中。只要电脑上安装了Java的运行环境（JDK），就可以启动Spring Boot项目。但注意不要去占用8080端口</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250414184720123.png" alt="image-20250414184720123"></p>
<p>根据官方文档指导，使用打包功能需要引入以下的插件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--这是一个能够创建可执行jar包的springboot插件。--&gt;</span><br><span class="line">&lt;build&gt;</span><br><span class="line">	&lt;plugins&gt;</span><br><span class="line">		&lt;plugin&gt;</span><br><span class="line">			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">		&lt;/plugin&gt;</span><br><span class="line">	&lt;/plugins&gt;</span><br><span class="line">&lt;/build&gt;</span><br></pre></td></tr></table></figure>

<p>执行打包命令，生成可执行jar包：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250414185231753.png" alt="image-20250414185231753"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250414185235074.png" alt="image-20250414185235074"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250414185239632.png" alt="image-20250414185239632"></p>
<p>单独的将这个 jar 包可以拷贝到任何位置运行，通过<code>java -jar sb3-01-first-web-1.0-SNAPSHOT.jar</code>命令来启动 Spring Boot 项目：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250414185249149.png" alt="image-20250414185249149"></p>
<p>另外，Spring Boot框架为我们提供了非常灵活的配置，在可执行jar包的同级目录下新建配置文件：application.properties，并配置以下信息：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">8888</span></span><br></pre></td></tr></table></figure>

<p>重新启动服务器，然后使用新的端口号访问：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250414185311030.png" alt="image-20250414185311030"></p>
<h3 id="SpringBoot的jar包和普通jar包的区别（面试题）"><a href="#SpringBoot的jar包和普通jar包的区别（面试题）" class="headerlink" title="SpringBoot的jar包和普通jar包的区别（面试题）"></a>SpringBoot的jar包和普通jar包的区别（面试题）</h3><p>Spring Boot 打包成的 JAR 文件与传统的 Java 应用程序中的 JAR 文件相比确实有一些显著的区别，主要体现在<code>依赖管理</code>和<code>可执行性</code>上。</p>
<p><strong>依赖管理</strong>：</p>
<ul>
<li>Spring Boot 的 JAR 包通常包含了应用程序运行所需的所有依赖项，也就是说它是一个“fat jar”（胖 JAR 包），这种打包方式使得应用可以独立运行，而不需要外部的类路径或应用服务器上的其他依赖。</li>
<li>普通的 JAR 文件一般只包含一个类库的功能，并且需要依赖于特定的类路径来找到其他的类库或者框架，这些依赖项通常在部署环境中已经存在，比如在一个应用服务器中。</li>
</ul>
<p><strong>可执行性</strong>：</p>
<ul>
<li>Spring Boot 的 JAR 文件可以通过直接执行这个 JAR 文件来启动应用程序，也就是说它是一个可执行的 JAR 文件。通过 <code>java -jar your-application.jar</code> 命令就可以直接运行应用程序。</li>
<li>而普通的 JAR 文件通常是不可直接执行的，需要通过指定主类（main class）的方式或者其他方式来启动一个应用程序，例如使用 <code>-cp</code> 或 <code>-classpath</code> 加上类路径以及主类名来执行。</li>
</ul>
<p>Spring Boot 的这些特性使得部署和运行变得更加简单和方便，特别是在微服务架构中，每个服务都可以被打包成独立的 JAR 文件并部署到任何支持 Java 的地方。</p>
<p>SpringBoot的可执行jar包目录结构：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250414194631521.png" alt="image-20250414194631521"></p>
<p>普通jar包的目录结构：<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250414194638757.png" alt="image-20250414194638757"> </p>
<h2 id="Spring-Boot脚手架"><a href="#Spring-Boot脚手架" class="headerlink" title="Spring Boot脚手架"></a>Spring Boot脚手架</h2><h3 id="什么是脚手架"><a href="#什么是脚手架" class="headerlink" title="什么是脚手架"></a>什么是脚手架</h3><h4 id="建筑工程中的脚手架"><a href="#建筑工程中的脚手架" class="headerlink" title="建筑工程中的脚手架"></a>建筑工程中的脚手架</h4><p>在建筑工程领域，“脚手架”指的是临时性的结构，用于支撑建筑物以及建筑材料，同时为建筑工人提供工作平台。这种脚手架通常是由钢管、扣件、木板和其他配件组成的，可以根据施工需要搭建不同高度和形状的结构</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250414194943558.png" alt="image-20250414194943558"></p>
<h4 id="软件开发中的脚手架"><a href="#软件开发中的脚手架" class="headerlink" title="软件开发中的脚手架"></a>软件开发中的脚手架</h4><p>在软件开发领域，“脚手架”指的是用于快速创建项目基本结构的工具或模板。它帮助开发者初始化项目，设置必要的目录结构、文件模板以及依赖项。 </p>
<h4 id="Spring-Boot脚手架-1"><a href="#Spring-Boot脚手架-1" class="headerlink" title="Spring Boot脚手架"></a>Spring Boot脚手架</h4><p>Spring Boot 脚手架（Scaffold）可以帮助开发者快速搭建一个Spring Boot项目结构，让开发者只专注于业务逻辑的开发，而不是在项目的初始阶段花费大量时间来配置环境或者解决依赖关系。</p>
<p>Spring Boot 脚手架工具存在多种形式，以下是一些常见的 Spring Boot 脚手架工具和方法：</p>
<ul>
<li><strong>Spring Initializr：</strong></li>
</ul>
<p>这是 Spring 官方提供的工具，可以在 <a target="_blank" rel="noopener" href="https://start.spring.io/">https://start.spring.io</a> 上找到。它允许开发者选择所需的依赖、Java 版本、构建工具（Maven 或 Gradle）以及其他配置选项来生成一个新的 Spring Boot 项目。</p>
<ul>
<li><strong>IntelliJ IDEA 内置支持：</strong></li>
</ul>
<p>IntelliJ IDEA 集成了 Spring Initializr 的功能，可以在 IDE 内直接创建 Spring Boot 项目。</p>
<ul>
<li><strong>Start Alibaba Cloud：</strong></li>
</ul>
<p>阿里云提供的 Start Alibaba Cloud 增强版工具，除了基本的 Spring Boot 模块外，还集成了阿里云服务和中间件的支持。</p>
<ul>
<li><strong>JHipster：</strong></li>
</ul>
<p>JHipster 是一个流行的脚手架工具，用于生成完整的 Spring Boot 应用程序，包括前端（Angular, React 或 Vue.js）和后端。它还包括用户管理和认证等功能。</p>
<ul>
<li><strong>Yeoman Generators：</strong></li>
</ul>
<p>Yeoman 是一个通用的脚手架工具，它有一个庞大的插件生态系统，其中包括用于生成 Spring Boot 项目的插件。</p>
<ul>
<li><strong>Bootify：</strong></li>
</ul>
<p>Bootify 是另一个用于生成 Spring Boot 应用程序的脚手架工具，提供了一些预定义的应用模板。</p>
<ul>
<li><strong>Spring Boot CLI：</strong></li>
</ul>
<p>Spring Boot CLI 是一个命令行工具，允许用户通过命令行来编写和运行 Spring Boot 应用。</p>
<ul>
<li><strong>Visual Studio Code 插件：</strong></li>
</ul>
<p>Visual Studio Code 社区提供了多个插件，如 Spring Boot Extension Pack，可以帮助开发者生成 Spring Boot 项目的基本结构。</p>
<ul>
<li><strong>GitHub Gist 和 Bitbucket Templates：</strong></li>
</ul>
<p>在 GitHub 和 Bitbucket 上，有很多开发者分享了用于生成 Spring Boot 项目的脚本或模板。</p>
<ul>
<li><strong>自定义脚手架：</strong></li>
</ul>
<p>很多开发者也会根据自己的需求定制自己的脚手架工具，比如使用 Bash 脚本、Gradle 或 Maven 插件等。</p>
<h3 id="使用官方提供的"><a href="#使用官方提供的" class="headerlink" title="使用官方提供的"></a>使用官方提供的</h3><h4 id="使用官方脚手架生成Spring-Boot项目"><a href="#使用官方脚手架生成Spring-Boot项目" class="headerlink" title="使用官方脚手架生成Spring Boot项目"></a>使用官方脚手架生成Spring Boot项目</h4><p>Spring Initializr：<a target="_blank" rel="noopener" href="https://start.spring.io/">https://start.spring.io</a></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250414195328832.png" alt="image-20250414195328832"></p>
<p>点击“GENERATE”后，生成zip压缩包</p>
<p>将其解压后的目录结构是一个标准的maven 工程：<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250414195343809.png" alt="image-20250414195343809"> </p>
<h4 id="将项目放到IDEA当中"><a href="#将项目放到IDEA当中" class="headerlink" title="将项目放到IDEA当中"></a>将项目放到IDEA当中</h4><p>直接将解压后的<code>sb3-02-use-spring-initializr</code>拷贝到我们新建的空工程<code>SpringBoot3</code>下，然后重启idea就行了</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250414213321678.png" alt="image-20250414213321678"></p>
<p>注意：如果<code>pom.xml</code>文件的图标颜色不是蓝色，而是橘色，需要在<code>pom.xml</code>文件上右键，选择：add as maven project。这样<code>pom.xml</code>文件的图标就会变为蓝色了。</p>
<h4 id="脚手架生成的pom-xml文件"><a href="#脚手架生成的pom-xml文件" class="headerlink" title="脚手架生成的pom.xml文件"></a>脚手架生成的pom.xml文件</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--继承Spring Boot父工程--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--自己项目的坐标--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.powernode<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sb3-02-use-spring-initializr<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">name</span>&gt;</span>sb3-02-use-spring-initializr<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">description</span>&gt;</span>使用spring官方提供的脚手架构建springboot项目<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">url</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">licenses</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">license</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">licenses</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">developers</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">developer</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">developers</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">scm</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">connection</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">developerConnection</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">tag</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">url</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">scm</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">java.version</span>&gt;</span>21<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--web起步依赖--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--单元测试起步依赖--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--打包插件--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="脚手架生成的Spring-Boot项目的结构"><a href="#脚手架生成的Spring-Boot项目的结构" class="headerlink" title="脚手架生成的Spring Boot项目的结构"></a>脚手架生成的Spring Boot项目的结构</h4><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250415010746176.png" alt="image-20250415010746176"></p>
<p>src下面就是程序的入口，java的这个位置是类的根路径，resources同样也是类的根路径，放在这里面相当于java的com同级，只不过java放的是源文件，resources放的是配置文件，static主要放静态的，templates放动态网页的模板文件</p>
<p>application.properties是我们主要配置的文件，是springboot默认的配置文件，</p>
<h4 id="编写controller并测试"><a href="#编写controller并测试" class="headerlink" title="编写controller并测试"></a>编写controller并测试</h4><p>新建controller包，并新建HelloController类，如下图：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250415011419320.png" alt="image-20250415011419320"></p>
<p><strong><font style="color:#DF2A3F;">重点：默认情况下，SpringBoot项目只扫描主入口程序所在目录以及子目录，因此创建的Controller类要求放在主入口程序的同级目录下或子目录下。其他位置默认情况下扫描不到。</font></strong></p>
<p>启动应用并访问：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250415011446207.png" alt="image-20250415011446207"></p>
<h3 id="使用阿里提供的"><a href="#使用阿里提供的" class="headerlink" title="使用阿里提供的"></a>使用阿里提供的</h3><p>阿里巴巴提供的 Spring Boot 项目脚手架服务称为 DragonBoot（也被称为 Alibaba Cloud Spring Boot Initializr）。DragonBoot 基于 Spring Initializr，并在此基础上增加了更多的定制选项，特别是针对阿里巴巴云服务和中间件的支持。脚手架地址：<a target="_blank" rel="noopener" href="https://start.aliyun.com/">https://start.aliyun.com/</a></p>
<p>当下（2024年）阿里云提供的脚手架使用的版本较低，国内有一些公司在用。如果要求版本较高的，则阿里云脚手架不适用。</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250415013052683.png" alt="image-20250415013052683"></p>
<h3 id="使用IDEA工具的脚手架插件"><a href="#使用IDEA工具的脚手架插件" class="headerlink" title="使用IDEA工具的脚手架插件"></a>使用IDEA工具的脚手架插件</h3><p> IDEA工具自带了Spring Boot脚手架的插件，使用它会更加的方便，让我们来操作一下：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250415013647170.png" alt="image-20250415013647170"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250415013812077.png" alt="image-20250415013812077"></p>
<h1 id="第2章-Spring-Boot核心机制"><a href="#第2章-Spring-Boot核心机制" class="headerlink" title="第2章 Spring Boot核心机制"></a>第2章 Spring Boot核心机制</h1><h2 id="为何以继承方式引入SpringBoot"><a href="#为何以继承方式引入SpringBoot" class="headerlink" title="为何以继承方式引入SpringBoot"></a>为何以继承方式引入SpringBoot</h2><h3 id="提出疑问"><a href="#提出疑问" class="headerlink" title="提出疑问"></a>提出疑问</h3><p>以前我们在开发项目时，需要什么，引入对应的依赖就行，比如我们需要连接mysql数据，则引入mysql驱动的依赖，如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>现在我们要使用SpringBoot框架，按说也应该采用依赖的方式将SpringBoot框架引入，如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>但是SpringBoot官方推荐的不是直接引入依赖，而是采用继承的方式实现，如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong><font style="color:#DF2A3F;">为什么？</font></strong></p>
<h3 id="作为父项目和作为依赖的区别"><a href="#作为父项目和作为依赖的区别" class="headerlink" title="作为父项目和作为依赖的区别"></a>作为父项目和作为依赖的区别</h3><p><strong>继承父工程的优势</strong></p>
<ul>
<li>依赖管理：可以在父工程中定义依赖的版本，子模块可以直接引用而不必指定版本号，让依赖管理更统一。</li>
<li>插件管理：可以在父工程中配置常用的插件及其版本，子模块可以直接使用这些配置。</li>
<li>属性设置：可以在父工程中定义一些通用的属性，如项目编码、Java 版本等。</li>
<li>统一配置：可以统一多个子模块的构建配置，确保一致性。</li>
</ul>
<p><strong>直接引入依赖的局限性</strong>（如果你不使用继承父工程的方式，而是通过直接引入依赖的方式来管理项目，那么你将失去上述的一些优势）</p>
<ul>
<li>依赖版本管理：每个子模块都需要单独指定依赖的版本，这会导致大量的重复配置，并且难以维护。</li>
<li>插件配置：每个子模块都需要单独配置插件及其版本，无法共享父工程中的插件配置。</li>
<li>属性设置：每个子模块都需要单独设置通用的属性，如项目编码、Java 版本等。</li>
<li>构建配置：每个子模块的构建配置需要单独维护，难以保证一致性。</li>
</ul>
<p><strong><font style="color:#DF2A3F;">总结：选择哪种方式取决于你的具体需求。</font></strong></p>
<ul>
<li><strong><font style="color:#DF2A3F;">如果你希望多个项目之间共享构建配置，那么使用父项目是一个好的选择；</font></strong></li>
<li><strong><font style="color:#DF2A3F;">如果你只是想在项目之间共享代码，那么应该使用依赖关系。</font></strong></li>
</ul>
<h3 id="原理揭晓"><a href="#原理揭晓" class="headerlink" title="原理揭晓"></a>原理揭晓</h3><p>通过源码来分析一下：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250415015255630.png" alt="image-20250415015255630"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250415015258610.png" alt="image-20250415015258610"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250415015301233.png" alt="image-20250415015301233"></p>
<p>通过上图源码可以看到Spring Boot预先对开发中需要用到的依赖进行了版本的统一管理。我们需要和SpringBoot框架共享这个构建配置。因此官方推荐使用继承的方式引入SpringBoot框架。</p>
<h3 id="依赖统一管理的好处"><a href="#依赖统一管理的好处" class="headerlink" title="依赖统一管理的好处"></a>依赖统一管理的好处</h3><p>Spring Boot 框架的一个重要特性就是简化了项目依赖管理。它通过提供一个叫做“依赖管理”的功能来帮助开发者更容易地管理和使用第三方库和其他 Spring 组件。具体来说，Spring Boot 提供了一个包含多个 Spring 和其他常用库的依赖版本配置文件（通常是在 <code>spring-boot-dependencies</code> 文件中），这使得开发者不需要在自己的项目中显式指定这些依赖的版本号。</p>
<p>这样做有以下几个好处：</p>
<ol>
<li><strong>简化依赖声明</strong>：<br>开发者只需要在 <code>pom.xml</code> 文件中声明需要的依赖而不需要指定其版本号，因为 Spring Boot 已经为这些依赖指定了版本。例如，如果你需要使用mysql驱动，你只需要添加相应的依赖声明而不需要关心版本。</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>避免版本冲突</strong>：<br>当多个库之间存在依赖关系的时候，如果手动管理版本可能会导致版本之间的冲突（即“依赖地狱”）。Spring Boot 提供的统一版本管理可以减少这种冲突的可能性。</li>
<li><strong>易于升级</strong>：<br>当 Spring Boot 发布新版本时，通常会更新其依赖库到最新稳定版。因此，当你升级 Spring Boot 版本时，它所管理的所有依赖也会随之更新到兼容的版本。</li>
<li><strong>减少配置错误</strong>：<br>由于 Spring Boot 自动处理了依赖的版本，减少了手动输入版本号可能引入的拼写或格式错误。</li>
<li><strong>提高开发效率</strong>：<br>开发者可以专注于业务逻辑的编写，而不是花费时间在解决依赖问题上。</li>
</ol>
<p>总的来说，Spring Boot 的依赖管理功能使得开发者可以更加专注于业务逻辑的实现，同时减少了因依赖版本不一致而引发的问题，提高了项目的可维护性和开发效率。</p>
<p>当然，如果你在项目中需要更改某个依赖的版本号，不想使用SpringBoot框架指定的版本号，只需要在引入依赖时强行执行版本号即可，maven是支持就近原则的：</p>
<p>这样做就是采用SpringBoot指定版本的依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250415153723118.png" alt="image-20250415153723118"></p>
<p>这样做就是不采用SpringBoot指定版本的依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250415153728868.png" alt="image-20250415153728868"></p>
<h2 id="Starter-启动器"><a href="#Starter-启动器" class="headerlink" title="Starter-启动器"></a>Starter-启动器</h2><p>在 Spring Boot 中，启动器（Starter）本质上是一个简化依赖管理的概念。</p>
<p>Spring Boot 的启动器本质上就是一组预定义的依赖集合，它们被组织成一个个 Maven的依赖，以方便开发者快速集成特定的功能模块。</p>
<p>如果你想做web开发，只需要引入web启动器。web启动器会自动引入web开发所需要的子依赖。</p>
<h3 id="启动器实现原理"><a href="#启动器实现原理" class="headerlink" title="启动器实现原理"></a>启动器实现原理</h3><ol>
<li><strong>依赖聚合</strong>：<br>每个启动器通常对应一个特定的功能集或者一个完整的应用模块，如 <code>spring-boot-starter-web</code> 就包含了构建 Web 应用所需的所有基本依赖项，如 Spring MVC, Tomcat 嵌入式容器等。</li>
<li><strong>依赖传递</strong>：<br>当你在项目中引入一个启动器时，它不仅会把自身作为依赖加入到你的项目中，还会把它的所有直接依赖项（transitive dependencies）也加入进来。这意味着你不需要单独声明这些依赖项，它们会自动成为项目的一部分。</li>
<li><strong>版本管理</strong>：<br>启动器内部已经指定了所有依赖项的具体版本，这些版本信息存储在一个公共的 BOM（Bill of Materials，物料清单）文件中，通常是 <code>spring-boot-dependencies</code>。当引入启动器时，实际上也间接引用了这个 BOM，从而确保了所有依赖项版本的一致性。</li>
<li><strong>自动配置</strong>：<br>许多启动器还提供了自动配置（Auto-configuration），这是一种机制，允许 Spring Boot 根据类路径上的可用组件自动设置你的应用程序。例如，如果类路径上有 Spring MVC 和嵌入式 Tomcat，则 Spring Boot 会自动配置它们，并准备好一个 web 应用程序。</li>
</ol>
<p><strong>使用启动器的示例</strong></p>
<p>假设你想创建一个基于 Spring MVC 的 RESTful Web 应用，你可以简单地将 <code>spring-boot-starter-web</code> 添加到你的项目中：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>当你添加这个依赖时，Spring Boot 会处理所有必要的细节，包括添加 Spring MVC 和 Tomcat 作为嵌入式 Servlet 容器，并且根据类路径上的内容进行适当的自动配置。如下图所示：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250415162234484.png" alt="image-20250415162234484"></p>
<h3 id="都有哪些启动器"><a href="#都有哪些启动器" class="headerlink" title="都有哪些启动器"></a>都有哪些启动器</h3><p>启动器通常包括：</p>
<ul>
<li>SpringBoot官方提供的启动器</li>
<li>非官方提供的启动器</li>
</ul>
<h4 id="官方提供的启动器"><a href="#官方提供的启动器" class="headerlink" title="官方提供的启动器"></a>官方提供的启动器</h4><p>启动器命名特点：spring-boot-starter-*</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250415162322902.png" alt="image-20250415162322902"></p>
<h4 id="非官方的启动器"><a href="#非官方的启动器" class="headerlink" title="非官方的启动器"></a>非官方的启动器</h4><p>启动器命名特点：*-spring-boot-starter</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250415162331627.png" alt="image-20250415162331627"></p>
<h2 id="Spring-Boot核心注解"><a href="#Spring-Boot核心注解" class="headerlink" title="Spring Boot核心注解"></a>Spring Boot核心注解</h2><p>如果加入了mybatis启动器，就必须配置数据源，否则报错</p>
<h3 id="SpringBootApplication注解"><a href="#SpringBootApplication注解" class="headerlink" title="@SpringBootApplication注解"></a>@SpringBootApplication注解</h3><p>Spring Boot的主入口程序被<code>@SpringBootApplication</code>注解标注，可见这个注解的重要性，查看它的源码：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250416005803306.png" alt="image-20250416005803306"></p>
<ol>
<li>当前类被 @SpringBootApplication 标注，被该注解标注的类是springboot项目的入口类。</li>
<li>该类的main方法就是整个springboot项目的入口。</li>
<li>关于 @SpringBootApplication 注解：<br> 从源码角度来看，该注解被以下三个注解标注了：<br> @SpringBootConfiguration<br> @EnableAutoConfiguration<br> @ComponentScan<br> 也就是说 @SpringBootApplication 注解是一个复合注解，同时拥有以上三个注解的功能。</li>
</ol>
<p>&#x2F;<em>@SpringBootConfiguration<br>@EnableAutoConfiguration<br>@ComponentScan(<br>        excludeFilters &#x3D; {@ComponentScan.Filter(<br>                type &#x3D; FilterType.CUSTOM,<br>                classes &#x3D; {TypeExcludeFilter.class}<br>        ), @ComponentScan.Filter(<br>                type &#x3D; FilterType.CUSTOM,<br>                classes &#x3D; {AutoConfigurationExcludeFilter.class}<br>        )}<br>)把这些注解直接复制到这里也可以代替@SpringBootApplication</em>&#x2F;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot304CoreAnnotationApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 从这里开始。</span></span><br><span class="line">        <span class="comment">// SpringApplication 【spring应用程序】</span></span><br><span class="line">        <span class="comment">// run 【运行】</span></span><br><span class="line">        <span class="comment">// run方法的第一个参数其实就是配置类，对应的就是以前的配置文件</span></span><br><span class="line">        <span class="comment">// springboot应用程序就是从这个配置类开始，加载所有的bean的。</span></span><br><span class="line">        <span class="comment">// Springboot304CoreAnnotationApplication.class 又被称为源【起源】</span></span><br><span class="line">        <span class="comment">// args 可以传递命令行参数到这个数组上</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Springboot304CoreAnnotationApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="关于-SpringBootConfiguration-注解："><a href="#关于-SpringBootConfiguration-注解：" class="headerlink" title="关于 @SpringBootConfiguration 注解："></a>关于 @SpringBootConfiguration 注解：</h3><p>从源码角度来看，该注解被 @Configuration 注解标注，被该注解标注的类统一是配置类，代替以前的配置。<br>因此得出一个结论：springboot项目的主入口类同时又是一个配置类。<br>因此在springboot主入口配置类当中使用 @Bean 注解标注方法的话，该方法的返回值对象应该会被纳入IoC容器的管理。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot304CoreAnnotationApplication</span> &#123;</span><br><span class="line">	<span class="meta">@Bean</span><span class="comment">//被bean这个注解标注的返回值将来会自动纳入IoC容器的管理，前提是这个类必须是配置类</span></span><br><span class="line">    <span class="keyword">public</span> Date <span class="title function_">getDate</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Springboot304CoreAnnotationApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;   </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>再写一个Controller</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 从spring的IoC容器中查找Date对象，如果有的话会自动注入到这里。</span></span><br><span class="line">    <span class="meta">@Autowired</span><span class="comment">//自动注入</span></span><br><span class="line">    <span class="keyword">private</span> Date date;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> date.toString();<span class="comment">//通过toString打印到浏览器上</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>就可以通过浏览器接收到date了</p>
<h3 id="关于-EnableAutoConfiguration-注解："><a href="#关于-EnableAutoConfiguration-注解：" class="headerlink" title="关于 @EnableAutoConfiguration 注解："></a>关于 @EnableAutoConfiguration 注解：</h3><p>该注解表示启用自动配置。<br>也就是说默认情况下，springboot应用都会默认启用自动配置。<br>自动配置有什么用？<br>    所谓的自动配置只要启动，springboot应用会去类路径当中查找class，根据类路径当中有某个类，或某些类，来自动管理bean，不需要我们程序员手动配置。<br>    比如：springboot检测到类路径当中有 SqlSessionFactory，或者在application.properties文件中配置了数据源，那么springboot会认为项目中<br>    有mybatis框架，因此会将mybatis中相关的bean自动初始化，然后放到IoC容器当中，自动将这些bean管理起来。</p>
<ul>
<li><p><strong>SqlSessionFactory</strong>: MyBatis的核心工厂SqlSessionFactory会被自动配置。这个工厂负责创建SqlSession实例，后者用来执行映射文件中的SQL语句。</p>
</li>
<li><p><strong>TransactionManager</strong>: DataSourceTransactionManager会被自动配置来管理与数据源相关的事务。</p>
<p>要先在pom里配上mybatis依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mybatis启动器--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!--添加mysql驱动依赖--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>然后在application里配置数据源</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver//如果爆红就需要添加mysql依赖</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/springboot</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">liuqi3711022</span></span><br><span class="line"><span class="attr">spring.datasource.type</span>=<span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot304CoreAnnotationApplication</span> &#123;</span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 通过 run方法的返回值是可以获取到 Spring 上下文对象的(也就是.var的那个)。</span></span><br><span class="line">        <span class="comment">// ConfigurableApplicationContext 继承了 ApplicationContext</span></span><br><span class="line">        <span class="comment">// 因此 run方法的返回值就是spring容器。</span></span><br><span class="line">        <span class="type">ConfigurableApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> SpringApplication.run(Springboot304CoreAnnotationApplication.class, args);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//通过bean的name获取bean，就都能检测到</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> applicationContext.getBean(<span class="string">&quot;sqlSessionFactory&quot;</span>);</span><br><span class="line">        System.out.println(sqlSessionFactory);</span><br><span class="line"></span><br><span class="line">        <span class="type">Object</span> <span class="variable">transactionManager</span> <span class="operator">=</span> applicationContext.getBean(<span class="string">&quot;transactionManager&quot;</span>);</span><br><span class="line">        System.out.println(transactionManager);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//关闭容器</span></span><br><span class="line">        applicationContext.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="关于-ComponentScan-注解："><a href="#关于-ComponentScan-注解：" class="headerlink" title="关于 @ComponentScan 注解："></a>关于 @ComponentScan 注解：</h3><p>负责组件扫描的。代替的xml配置是：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-packages</span>=<span class="string">&quot;com.powernode.springboot&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>这个注解出现在springboot主入口类上，因此组件扫描默认扫描的包是主入口程序所在的包以及该包下的所有子包。</p>
<p>要让bean纳入IoC容器的管理，必须将类放到主入口程序同级目录下，或者子目录下。</p>
<h2 id="Spring-Boot的单元测试（没看懂）"><a href="#Spring-Boot的单元测试（没看懂）" class="headerlink" title="Spring Boot的单元测试（没看懂）"></a>Spring Boot的单元测试（没看懂）</h2><p>controller属于表示层或者叫web层</p>
<h3 id="不使用单元测试怎么调用service"><a href="#不使用单元测试怎么调用service" class="headerlink" title="不使用单元测试怎么调用service"></a>不使用单元测试怎么调用service</h3><h4 id="创建模块"><a href="#创建模块" class="headerlink" title="创建模块"></a>创建模块</h4><p>使用脚手架创建springboot3-05-junit模块，不添加任何启动器</p>
<h4 id="编写service"><a href="#编写service" class="headerlink" title="编写service"></a>编写service</h4><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250417024457620.png" alt="image-20250417024457620"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service(&quot;userService&quot;)</span><span class="comment">//给起个名字叫userService</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">findUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;jackson&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="comment">//提供一个能返回user的方法</span></span><br><span class="line">    User <span class="title function_">findUser</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="直接在入口程序中调用service"><a href="#直接在入口程序中调用service" class="headerlink" title="直接在入口程序中调用service"></a>直接在入口程序中调用service</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot305JunitApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//在不使用junit的前提下，怎么调用Service方法</span></span><br><span class="line">        <span class="type">ConfigurableApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> SpringApplication.run(Springboot305JunitApplication.class, args);</span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> applicationContext.getBean(<span class="string">&quot;userService&quot;</span>, UserService.class);<span class="comment">//userService就是@Service的名字，这个返回userService</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.findUser();</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        applicationContext.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行结果：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250417024804850.png" alt="image-20250417024804850"></p>
<p>这种方式就是手动获取Spring上下文对象<code>ConfigurableApplicationContext</code>，然后调用getBean方法从Spring容器中获取service对象，然后调用方法。</p>
<h3 id="使用单元测试怎么调用service"><a href="#使用单元测试怎么调用service" class="headerlink" title="使用单元测试怎么调用service"></a>使用单元测试怎么调用service</h3><h4 id="test-starter引入以及测试类编写"><a href="#test-starter引入以及测试类编写" class="headerlink" title="test-starter引入以及测试类编写"></a>test-starter引入以及测试类编写</h4><p>使用单元测试应该如何调用service对象上的方法呢？</p>
<p>在使用脚手架创建Spring Boot项目时，为我们生成了单元测试类，如下：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250417025327260.png" alt="image-20250417025327260"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250417025726542.png" alt="image-20250417025726542"></p>
<p>当然，如果要使用单元测试，需要引入单元测试启动器，如果使用脚手架创建SpringBoot项目，这个test启动器会自动引入：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="SpringBootTest注解"><a href="#SpringBootTest注解" class="headerlink" title="@SpringBootTest注解"></a>@SpringBootTest注解</h4><p><code>@SpringBootTest</code> 会创建一个完整的 Spring 应用程序上下文（Application Context），这个上下文包含了应用程序的所有组件和服务。以下是 <code>@SpringBootTest</code> 做的一些主要工作：</p>
<ol>
<li><strong>创建 ApplicationContext</strong>：<ul>
<li><code>@SpringBootTest</code> 使用 <code>SpringApplication</code> 的 <code>run()</code> 方法来启动一个 Spring Boot 应用程序上下文。这意味着它会加载应用程序的主配置类和其他相关的配置类。</li>
</ul>
</li>
<li><strong>加载配置文件</strong>：<ul>
<li>它会查找并加载默认的配置文件，如 <code>application.properties</code></li>
</ul>
</li>
<li><strong>自动配置</strong>：<ul>
<li>如果应用程序依赖于 Spring Boot 的自动配置特性，<code>@SpringBootTest</code> 会确保这些自动配置生效。这意味着它会根据可用的类和bean来自动配置一些组件，如数据库连接、消息队列等。</li>
</ul>
</li>
<li><strong>注入依赖</strong>：<ul>
<li>使用 <code>@SpringBootTest</code> 创建的应用程序上下文允许你在测试类中使用 <code>@Autowired</code> 注入需要的 bean，就像在一个真实的 Spring Boot 应用程序中一样。</li>
</ul>
</li>
</ol>
<p>总的来说，<code>@SpringBootTest</code> 为你的测试提供了尽可能接近实际运行时环境的条件，这对于验证应用程序的行为非常有用。</p>
<h4 id="注入service并调用"><a href="#注入service并调用" class="headerlink" title="注入service并调用"></a>注入service并调用</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// springboot项目中使用单元测试junit，那么单元测试类必须使用这个注解进行标注。</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot305JunitApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 单元测试方法，单元测试方法使用 @Test 注解标注。</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.findUser();</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="外部化配置"><a href="#外部化配置" class="headerlink" title="外部化配置"></a>外部化配置</h2><h3 id="什么是外部化配置"><a href="#什么是外部化配置" class="headerlink" title="什么是外部化配置"></a>什么是外部化配置</h3><p>外部化配置是指：将<code>配置信息</code>存储在<code>应用程序代码</code>之外的地方。这样<code>配置信息</code>可以独立于代码进行管理。这样方便了配置的修改，并且修改后不需要重新编译代码，也不需要重新部署项目。</p>
<p>在springboot应用程序默认是先找外部化配置</p>
<h4 id="外部化配置的方式"><a href="#外部化配置的方式" class="headerlink" title="外部化配置的方式"></a>外部化配置的方式</h4><p>SpringBoot支持多种外部化配置方式，包括但不限于：</p>
<ul>
<li>properties文件</li>
<li>YAML文件</li>
<li>系统环境变量</li>
<li>命令行参数</li>
<li>……</li>
</ul>
<h4 id="外部化配置的优势"><a href="#外部化配置的优势" class="headerlink" title="外部化配置的优势"></a>外部化配置的优势</h4><ol>
<li><strong>灵活性</strong>：配置文件可以独立于应用程序部署，这使得可以根据运行环境的不同来调整配置，而无需修改代码。</li>
<li><strong>易于维护</strong>：配置变更不需要重新构建和部署应用程序，降低了维护成本。</li>
<li><strong>安全性</strong>：敏感信息如数据库密码、API密钥等可以存储在外部，并且可以限制谁有权限访问这些配置信息。</li>
<li><strong>共享性</strong>：多实例或多服务可以共享相同的配置信息，减少重复配置的工作量。</li>
<li><strong>版本控制</strong>：配置文件可以存放在版本控制系统中，便于跟踪历史版本和回滚配置。</li>
</ol>
<p>总之，外部化配置使得配置更加灵活、安全、易于管理和共享，是现代云原生应用中非常推荐的做法</p>
<h4 id="外部化配置对比传统配置"><a href="#外部化配置对比传统配置" class="headerlink" title="外部化配置对比传统配置"></a>外部化配置对比传统配置</h4><p>在传统的SSM三大框架中，如果修改XML的配置后，需要对应用重新打包，重新部署。</p>
<p>使用SpringBoot框架的<code>外部化配置</code>后，修改配置后，不需要对应用重新打包，也不需要重新部署，最多重启一下服务即可。</p>
<h3 id="application-properties"><a href="#application-properties" class="headerlink" title="application.properties"></a>application.properties</h3><p><code>application.properties</code>配置文件是SpringBoot框架默认的配置文件。</p>
<p><code>application.properties</code>不是必须的，SpringBoot对于应用程序来说，都提供了一套默认配置（就是我们所说的自动配置）。</p>
<p>如果你要改变这些默认的行为，可以在<code>application.properties</code>文件中进行配置。</p>
<p><code>application.properties</code>可以放在类路径当中，也可以放在项目之外。因此称为外部化配置。</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250417031216205.png" alt="image-20250417031216205"> 类的根路径calsspath</p>
<p>Spring Boot 框架在启动时会尝试从以下位置加载 <code>application.properties</code> 配置文件（优先级从高到低）：</p>
<ol>
<li><strong>file:.&#x2F;config&#x2F;</strong>（在jar包外的）：首先在Spring Boot 当前工作目录下的 <code>config</code> 文件夹中查找。<ol>
<li><strong><font style="color:#DF2A3F;">注意：如果没有找到application.properties</font></strong><font style="color:#DF2A3F;"><strong>会继续找application.yml</strong></font><strong><font style="color:#DF2A3F;">，如果这两个都没有找到，才会进入以下位置查找，以此类推。</font></strong></li>
</ol>
</li>
<li><strong>file:.&#x2F;</strong>：如果在当前工作目录下<code>config</code>目录中找不到时，再从当前工作目录中查找，找不到properties就再找yml。</li>
<li><strong>classpath:&#x2F;config&#x2F;</strong>：如果从工作目录中找不到，会从类路径中找，先从类路径的 <code>/config/</code> 目录下寻找配置文件。</li>
<li><strong>classpath:&#x2F;</strong>：如果在 <code>/config/</code> 下没有找到，它会在类路径的根目录下查找。</li>
</ol>
<p>Spring Boot 会按照这个顺序来加载配置文件，如果在多个位置有相同的属性定义，那么最先检查的位置中的属性值将优先使用。</p>
<p>如果你想要指定其他的配置文件位置或者改变默认的行为，可以通过 <code>--spring.config.location=</code> 后跟路径的方式来指定配置文件的具体位置。例如 ：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar sb3-01-first-web-1.0-SNAPSHOT.jar --spring.config.location=file:///E:\a\b\application.properties</span><br></pre></td></tr></table></figure>

<p>这样，Spring Boot 将会首先从 <code>E:\a\b\</code> 这个路径加载配置文件。注意，这种方式可以用来覆盖默认的配置文件位置，并且可以结合以上提到的位置一起使用。</p>
<p>注意：以上的<code>--spring.config.location=file:///E:\a\b\application.properties</code>就属于命令行参数，它将来会被传递到main方法的(String[] args)参数上。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot306PropertiesLocationApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// args 就是接收命令行参数的。</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 打印命令行参数。</span></span><br><span class="line">        <span class="keyword">for</span> (String arg : args) &#123;</span><br><span class="line">            System.out.println(arg);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//这里我们就知道为什么命令行参数要作为参数传到run方法里，因为run方法需要通过命令行参数来决定配置文件的路径</span></span><br><span class="line">        <span class="type">ConfigurableApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> SpringApplication.run(Springboot306PropertiesLocationApplication.class, args);</span><br><span class="line">        <span class="type">AppConfig</span> <span class="variable">appConfig</span> <span class="operator">=</span> applicationContext.getBean(AppConfig.class);</span><br><span class="line">        appConfig.printInfo();<span class="comment">//这是自定义的一个printInfo</span></span><br><span class="line">        applicationContext.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用-Value注解"><a href="#使用-Value注解" class="headerlink" title="使用@Value注解"></a>使用@Value注解</h3><p>@Value注解可以将<code>application.properties</code>&#x2F;<code>application.yml</code>文件中的配置信息注入&#x2F;绑定到java对象的属性上。</p>
<p><strong><font style="color:#DF2A3F;">语法格式：@Value(“${key}”)</font></strong></p>
<p>使用脚手架创建SpringBoot项目，不添加任何启动器，在<code>resources/application.properties</code>文件中进行如下配置：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">myapp.username</span>=<span class="string">jackson</span></span><br><span class="line"><span class="attr">myapp.email</span>=<span class="string">jackson@123.com</span></span><br><span class="line"><span class="attr">myapp.age</span>=<span class="string">2</span></span><br></pre></td></tr></table></figure>

<p>编写service类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SystemService</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;myapp.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;myapp.email&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 注意：当使用 @Value注解的时候，如果这个key不存在，并且没有指定默认值，则报错。50就是默认值</span></span><br><span class="line">    <span class="comment">//@Value(&quot;$&#123;myapp.age&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;myapp.age:50&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printInfo</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(username);</span><br><span class="line">        System.out.println(email);</span><br><span class="line">        System.out.println(age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编写单元测试：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot307ValueAnnotationApplicationTests</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SystemService systemService;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line">        systemService.printInfo();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果：<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250418164855135.png" alt="image-20250418164855135"> </p>
<h3 id="YAML"><a href="#YAML" class="headerlink" title="YAML"></a>YAML</h3><h4 id="YAML概述"><a href="#YAML概述" class="headerlink" title="YAML概述"></a>YAML概述</h4><p>SpringBoot采用集中式配置管理，所有的配置都编写到一个配置文件中：<code>application.properties</code></p>
<p>如果配置非常多，层级不够分明，因此SpringBoot为了提高配置文件可读性，也支持YAML格式的配置文件：<code>application.yml</code></p>
<p>YAML（YAML Ain’t Markup Language）是一种人类可读的数据序列化格式，它通常用于配置文件，在各种编程语言中作为一种存储或传输数据的方式。YAML的设计目标是易于阅读和编写，同时保持足够的表达能力来表示复杂的数据结构。</p>
<p><strong><font style="color:#DF2A3F;">YAML文件的扩展名可以是</font></strong><code>**&lt;font style=&quot;color:#DF2A3F;&quot;&gt;.yaml&lt;/font&gt;**</code><strong><font style="color:#DF2A3F;">或</font></strong><code>**&lt;font style=&quot;color:#DF2A3F;&quot;&gt;.yml&lt;/font&gt;**</code><strong><font style="color:#DF2A3F;">。</font></strong></p>
<h4 id="常见的数据存储和交换格式"><a href="#常见的数据存储和交换格式" class="headerlink" title="常见的数据存储和交换格式"></a>常见的数据存储和交换格式</h4><p><code>properties</code>、<code>XML</code>、<code>JSON</code>、<code>YAML</code>这几种格式确实是用来存储和交换数据的常见方式，但它们各有特点和适用场景：</p>
<p><strong>Properties</strong></p>
<ul>
<li>这种格式主要用于Java应用程序中的配置文件。它是键值对的形式，每一行是一个键值对，使用等号或冒号分隔键和值。</li>
<li>特点是简单易懂，但在处理复杂结构的数据时显得力不从心。</li>
</ul>
<p><strong>XML (eXtensible Markup Language)</strong></p>
<ul>
<li>XML是一种标记语言，用来描述数据的格式。它支持复杂的数据结构，包括嵌套和属性。</li>
<li>XML文档具有良好的结构化特性，适合传输和存储结构化的数据。但是，XML文档通常体积较大，解析起来也比较耗资源。</li>
</ul>
<p><strong>JSON (JavaScript Object Notation)</strong></p>
<ul>
<li>JSON是一种轻量级的数据交换格式，易于人阅读和编写，同时也易于机器解析和生成。它基于JavaScript的一个子集，支持多种数据类型，如数字、字符串、布尔值、数组和对象。</li>
<li>JSON因为简洁和高效而广泛应用于Web应用程序之间进行数据交换。</li>
</ul>
<p><strong>YAML (YAML Ain’t Markup Language)</strong></p>
<ul>
<li>YAML设计的目标之一就是让人类更容易阅读。它支持类似JSON的数据序列化，但提供了更多的灵活性，例如缩进来表示数据结构。</li>
<li>YAML非常适合用来编写配置文件，因为它允许以一种自然的方式组织数据，并且可以包含注释和其他人类可读的元素。</li>
</ul>
<p>总结来说，这四种格式都可以用来存储和交换数据，但它们的设计初衷和最佳使用场景有所不同。选择哪种格式取决于具体的应用需求、数据复杂度、性能要求等因素。</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32.png"></p>
<h4 id="YAML的语法规则"><a href="#YAML的语法规则" class="headerlink" title="YAML的语法规则"></a>YAML的语法规则</h4><p>YAML的语法规则如下：</p>
<ol>
<li>数据结构：YAML支持多种数据类型，包括：<ol>
<li>字符串、数字、布尔值</li>
<li>数组、list集合</li>
<li>map键值对   等。</li>
</ol>
</li>
<li>YAML使用<code>一个空格</code>来分隔<code>属性名</code>和<code>属性值</code>，例如：<ol>
<li><code>properties</code>文件中这样的配置：name&#x3D;jack</li>
<li><code>yaml</code>文件中需要这样配置：name: jack</li>
</ol>
</li>
<li>YAML用<code>换行+空格</code>来表示层级关系。注意不能使用tab，必须是空格，空格数量无要求，大部分建议2个或4个空格。例如：<ol>
<li><code>properties</code>文件中这样的配置：myapp.name&#x3D;mall</li>
<li><code>yaml</code>文件中就需要这样配置：</li>
</ol>
</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">myapp:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">mall</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>同级元素左对齐。例如：<ol>
<li><code>properties</code>文件中有这样的配置：</li>
</ol>
</li>
</ol>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">myapp.name</span>=<span class="string">mall</span></span><br><span class="line"><span class="attr">myapp.count</span>=<span class="string">10</span></span><br></pre></td></tr></table></figure>

<pre><code>2. `yaml`文件中就应该这样配置：
</code></pre>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">myapp:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">mall</span></span><br><span class="line">  <span class="attr">count:</span> <span class="number">10</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>键必须是唯一的：在一个映射中，键必须是唯一的。</li>
<li>注释：使用<code>#</code>进行注释。</li>
<li>大小写敏感</li>
</ol>
<h4 id="YAML的使用小细节"><a href="#YAML的使用小细节" class="headerlink" title="YAML的使用小细节"></a>YAML的使用小细节</h4><p>第一：普通文本也可以使用单引号或双引号括起来：（当然普通文本也可以不使用单引号和双引号括起来。）</p>
<ul>
<li>单引号括起来：单引号内所有的内容都被当做普通文本，不转义（例如字符串中有\n，则\n被当做普通的字符串）</li>
<li>双引号括起来：双引号中有 \n 则会被转义为换行符</li>
</ul>
<p>第二：保留文本格式</p>
<ul>
<li><p>|      将文本写到这个符号的下层，会自动保留格式。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">myapp:</span></span><br><span class="line">  <span class="attr">username:</span> <span class="string">|</span></span><br><span class="line"><span class="string">  	aaaa</span></span><br><span class="line"><span class="string">  	bbbb</span></span><br><span class="line"><span class="string">  	cccc</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>第三：文档切割</p>
<ul>
<li>— 这个符号下面的配置可以认为是一个独立的yaml文件。便于庞大文件的阅读。</li>
</ul>
<h3 id="配置文件合并"><a href="#配置文件合并" class="headerlink" title="配置文件合并"></a>配置文件合并</h3><p>一个项目中所有的配置全部编写到<code>application.properties</code>文件中，会导致配置臃肿，不易维护，有时我们会将配置编写到不同的文件中，例如：<code>application-mysql.properties</code>专门配置mysql的信息，<code>application-redis.properties</code>专门配置redis的信息，最终将两个配置文件合并到一个配置文件中。</p>
<h4 id="properties文件"><a href="#properties文件" class="headerlink" title="properties文件"></a>properties文件</h4><p>配置文件里有中文的话编码格式会变成<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250419015101834.png" alt="image-20250419015101834"> ，需要在settings里有个File encoding，</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250419015258428.png" alt="image-20250419015258428"></p>
<p><code>application-mysql.properties</code></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure>

<p><code>application-redis.properties</code></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.data.redis.host</span>=<span class="string">localhost</span></span><br><span class="line"><span class="attr">spring.data.redis.port</span>=<span class="string">6379</span></span><br></pre></td></tr></table></figure>

<p><code>application.properties</code></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.config.import</span>=<span class="string">classpath:application-mysql.properties,classpath:application-redis.properties</span></span><br></pre></td></tr></table></figure>

<p>编写service测试，看看能否拿到配置信息：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spr&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String mysqlUsername;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.datasource.password&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String mysqlPassword;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.data.redis.host&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String redisHost;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.data.redis.port&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String redisPort;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printInfo</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(mysqlUsername + <span class="string">&quot;,&quot;</span> + mysqlPassword + <span class="string">&quot;,&quot;</span> + redisHost + <span class="string">&quot;,&quot;</span> + redisPort);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="yaml文件"><a href="#yaml文件" class="headerlink" title="yaml文件"></a>yaml文件</h4><p><code>application-mysql.yml</code></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">rootyml</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">123456yml</span></span><br></pre></td></tr></table></figure>

<p><code>application-redis.yml</code></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">data:</span></span><br><span class="line">    <span class="attr">redis:</span></span><br><span class="line">      <span class="attr">host:</span> <span class="string">localhostyml</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">6379</span></span><br></pre></td></tr></table></figure>

<p><code>application.yml</code></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">config:</span></span><br><span class="line">    <span class="attr">import:</span></span><br><span class="line">    <span class="comment">#数组或者list集合可以这么写</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">classpath:/config/application-mysql.yml</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">classpath:/config/application-redis.yml</span></span><br><span class="line"><span class="comment">#    import: [classpath:/config/application-mysql.yml, classpath:/config/application-redis.yml]</span></span><br></pre></td></tr></table></figure>

<h3 id="多环境切换"><a href="#多环境切换" class="headerlink" title="多环境切换"></a>多环境切换</h3><p>在Spring Boot中，多环境切换是指在一个应用程序中支持多种运行环境配置的能力。这通常用于区分开发（development）、测试（testing）、预生产（staging）和生产（production）等不同阶段的环境。</p>
<p>这种功能使得开发者能够在不同的环境中使用不同的配置，比如数据库连接信息、服务器端口、环境变量等，而不需要更改代码。这对于维护一个可移植且易于管理的应用程序非常重要。</p>
<ol>
<li>开发环境的配置文件名一般叫做：<code>application-dev.properties</code></li>
</ol>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">dev</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">dev123</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/dev</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>测试环境的配置文件名一般叫做：<code>application-test.properties</code></li>
</ol>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">test</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">test123</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/test</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>预生产环境的配置文件名一般叫做：<code>application-preprod.properties</code></li>
</ol>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">preprod</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">preprod123</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/preprod</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>生产环境的配置文件名一般叫做：<code>application-prod.properties</code></li>
</ol>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">prod</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">prod123</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/prod</span></span><br></pre></td></tr></table></figure>

<p>然后添加下面的东西</p>
<p>如果你希望该项目使用生产环境的配置，你可以这样做：</p>
<ul>
<li>第一种方式：在<code>application.properties</code>文件中添加这个配置：<strong>spring.profiles.active&#x3D;prod</strong>，这个prod就是用来区分环境的，测试环境就换成test</li>
<li>第二种方式：在命令行参数上添加：<strong>–spring.profiles.active&#x3D;prod</strong></li>
</ul>
<h3 id="将配置绑定到bean"><a href="#将配置绑定到bean" class="headerlink" title="将配置绑定到bean"></a>将配置绑定到bean</h3><h4 id="绑定简单bean"><a href="#绑定简单bean" class="headerlink" title="绑定简单bean"></a>绑定简单bean</h4><p>SpringBoot配置文件中的信息除了可以使用<code>@Value注解</code>读取之外，也可以将配置信息一次性赋值给Bean对象的属性。</p>
<p>例如有这样的配置：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">myapp:</span></span><br><span class="line">  <span class="attr">a:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">jacksonyml</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">123456yml</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">30</span></span><br><span class="line">    <span class="attr">gender:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将这里的配置信息一次性的绑定到bean对象的属性上。比 @Value 注解好用，方便。</span></span><br><span class="line"><span class="attr">myapp.a.username</span>=<span class="string">jackson</span></span><br><span class="line"><span class="attr">myapp.a.password</span>=<span class="string">123456</span></span><br><span class="line"><span class="attr">myapp.a.age</span>=<span class="string">20</span></span><br><span class="line"><span class="attr">myapp.a.gender</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure>

<p>Bean需要这样定义:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 纳入IoC容器的管理。</span></span><br><span class="line"><span class="comment">//@Component</span></span><br><span class="line"><span class="comment">// 这个注解标注的类一定会被纳入IoC容器的管理，同时这个类也表示是一个配置类。</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">// 将配置文件中的属性值一次性的绑定到bean对象的属性上。</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;myapp.a&quot;)</span><span class="comment">//这里给了前缀名，要实现这种一次性的绑定功能，配置文件中的属性名和bean对象的属性名要一致。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Boolean gender;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;AppConfig&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;username=&#x27;&quot;</span> + username + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, password=&#x27;&quot;</span> + password + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, gender=&quot;</span> + gender +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(Boolean gender)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>被绑定的bean，需要使用<code>@ConfigurationProperties(prefix = &quot;app&quot;)</code>注解进行标注，prefix用来指定前缀，哪个是前缀</li>
<li>配置文件中的<code>name</code>、<code>age</code>、<code>email</code>要和bean对象的属性名<code>name</code>、<code>age</code>、<code>email</code>对应上。（属性名相同）</li>
<li>并且bean中的所有属性都提供了<code>setter</code>方法。因为底层是通过<code>setter</code>方法给bean属性赋值的。</li>
<li>这样的bean需要使用<code>@Component</code>注解进行标注，纳入IoC容器的管理。<code>@Component</code>注解负责创建Bean对象，<code>@ConfigurationProperties(prefix = &quot;app&quot;)</code>注解负责给bean对象的属性赋值。</li>
<li>bean的属性需要是<code>非static</code>的属性。</li>
</ol>
<p>我们把这个Bean对象的类名打印一下看看：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1729671124931-0ce60aa3-54bb-4a35-9b99-c846f86ad6b8.png"></p>
<p>可以发现底层实际上创建了<code>AppBean</code>的代理对象<code>AppBean$$SpringCGLIB</code>。</p>
<p>生成代理对象会影响效率，这里我们不需要使用代理功能，可以通过以下配置来取消代理机制：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;app&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppBean</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="comment">//setter and getter</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="绑定嵌套bean"><a href="#绑定嵌套bean" class="headerlink" title="绑定嵌套bean"></a>绑定嵌套bean</h4><p>当一个Bean中嵌套了一个Bean，这种情况下可以将配置信息绑定到该Bean上吗？当然可以。</p>
<p>有这样的一个配置：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">app:</span></span><br><span class="line">  <span class="attr">xyz:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">lucy_yml</span></span><br><span class="line">    <span class="attr">addr:</span></span><br><span class="line">      <span class="attr">city:</span> <span class="string">TJ</span></span><br><span class="line">      <span class="attr">street:</span> <span class="string">NanKai</span></span><br></pre></td></tr></table></figure>

<p>需要编写这样的两个Bean：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Address</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line">    <span class="keyword">private</span> String street;</span><br><span class="line">	省略</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;app.xyz&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Address addr;<span class="comment">//嵌套bean，被一起加入了ioc容器</span></span><br><span class="line">	~~~省略</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后执行测试程序</p>
<h4 id="EnableConfigurationProperties与-ConfigurationPropertiesScan"><a href="#EnableConfigurationProperties与-ConfigurationPropertiesScan" class="headerlink" title="@EnableConfigurationProperties与@ConfigurationPropertiesScan"></a>@EnableConfigurationProperties与@ConfigurationPropertiesScan</h4><p>将<code>AppBean</code>纳入IoC容器的管理，之前我们说了两种方式：第一种是使用<code>@Component</code>，第二种是使用<code>@Configuration</code>。SpringBoot其实还提供了另外两种方式：</p>
<ul>
<li>第一种：@EnableConfigurationProperties</li>
<li>第二种：@<font style="color:#080808;background-color:#ffffff;">ConfigurationPropertiesScan</font></li>
</ul>
<p><font style="color:#080808;background-color:#ffffff;">这两个注解都是标注在SpringBoot主入口程序上的：</font></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将配置信息绑定到bean的第三种方式：在主入口程序上添加以下注解。</span></span><br><span class="line"><span class="comment">// 以下注解的作用是：启用将配置信息绑定到bean，以下代码的意思就是将配置信息绑定到User这个bean上。</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(&#123;User.class&#125;)</span></span><br><span class="line"><span class="comment">//@EnableConfigurationProperties(&#123;User.class&#125;)//可以添加多个，底层的value是class数组</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将配置信息绑定到bean的第四种方式：在主入口程序上添加以下注解。</span></span><br><span class="line"><span class="comment">//@ConfigurationPropertiesScan(basePackages = &quot;com.powernode.springboot.bean&quot;)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot310ConfigBindToBeanApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Springboot310ConfigBindToBeanApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="将配置赋值到Bean的Map-List-Array属性上"><a href="#将配置赋值到Bean的Map-List-Array属性上" class="headerlink" title="将配置赋值到Bean的Map&#x2F;List&#x2F;Array属性上"></a>将配置赋值到Bean的Map&#x2F;List&#x2F;Array属性上</h4><p>配置信息如下</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">app2.abc.names[0]</span>=<span class="string">jack</span></span><br><span class="line"><span class="attr">app2.abc.names[1]</span>=<span class="string">lucy</span></span><br><span class="line"></span><br><span class="line"><span class="attr">app2.abc.addrArray[0].city</span>=<span class="string">BeiJing</span></span><br><span class="line"><span class="attr">app2.abc.addrArray[0].street</span>=<span class="string">ChaoYang</span></span><br><span class="line"><span class="attr">app2.abc.addrArray[1].city</span>=<span class="string">TianJin</span></span><br><span class="line"><span class="attr">app2.abc.addrArray[1].street</span>=<span class="string">NanKai</span></span><br><span class="line"></span><br><span class="line"><span class="attr">app2.abc.addrList[0].city</span>=<span class="string">BeiJing_List</span></span><br><span class="line"><span class="attr">app2.abc.addrList[0].street</span>=<span class="string">ChaoYang_List</span></span><br><span class="line"><span class="attr">app2.abc.addrList[1].city</span>=<span class="string">TianJin_List</span></span><br><span class="line"><span class="attr">app2.abc.addrList[1].street</span>=<span class="string">NanKai_List</span></span><br><span class="line"></span><br><span class="line"><span class="attr">app2.abc.addrs.addr1.city</span>=<span class="string">BeiJing_Map</span></span><br><span class="line"><span class="attr">app2.abc.addrs.addr1.street</span>=<span class="string">ChaoYang_Map</span></span><br><span class="line"><span class="attr">app2.abc.addrs.addr2.city</span>=<span class="string">TianJin_Map</span></span><br><span class="line"><span class="attr">app2.abc.addrs.addr2.street</span>=<span class="string">NanKai_Map</span></span><br></pre></td></tr></table></figure>

<p>代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@Component如果不加这个，就在主入口那边绑定bean</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;app2.abc&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppBean</span> &#123;</span><br><span class="line">    <span class="comment">// 数组：数组中元素是简单类型</span></span><br><span class="line">    <span class="keyword">private</span> String[] names;</span><br><span class="line">    <span class="comment">// 数组：数组中元素是bean</span></span><br><span class="line">    <span class="keyword">private</span> Address[] addrArray;</span><br><span class="line">    <span class="comment">// List集合：集合中的元素是bean</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Address&gt; addrList;</span><br><span class="line">    <span class="comment">// Map集合：String,Bean</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Address&gt; addrs;</span><br><span class="line">    后面就是set方法和toString方法了省略</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>提醒：记得入口程序使用<font style="color:#080808;background-color:#ffffff;">@EnableConfigurationProperties({User.class, AppBean.class})进行标注。</font></p>
<p>yml配置信息：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">app2:</span></span><br><span class="line">  <span class="attr">abc:</span></span><br><span class="line">    <span class="comment"># names: [jack, lucy]可以这样写</span></span><br><span class="line">    <span class="attr">names:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">tom2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">smith2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#    addrArray:    yml里面是区分大小写的，但是addrArray可以写成addr-array，在mybatis里有一样的自动解析驼峰</span></span><br><span class="line">    <span class="attr">addr-array:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">city:</span> <span class="string">BeiJing2</span></span><br><span class="line">        <span class="attr">street:</span> <span class="string">ChaoYang2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">city:</span> <span class="string">TianJin2</span></span><br><span class="line">        <span class="attr">street:</span> <span class="string">NanKai2</span></span><br><span class="line">    <span class="comment">#    addrList:</span></span><br><span class="line">    <span class="attr">addr-list:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">city:</span> <span class="string">BeiJing_List2</span></span><br><span class="line">        <span class="attr">street:</span> <span class="string">ChaoYang_List2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">city:</span> <span class="string">TianJin_List2</span></span><br><span class="line">        <span class="attr">street:</span> <span class="string">NanKai_List2</span></span><br><span class="line">    <span class="attr">addrs:</span></span><br><span class="line">      <span class="attr">addr1:</span></span><br><span class="line">        <span class="attr">city:</span> <span class="string">BeiJing_Map2</span></span><br><span class="line">        <span class="attr">street:</span> <span class="string">ChaoYang_Map2</span></span><br><span class="line">      <span class="attr">addr2:</span></span><br><span class="line">        <span class="attr">city:</span> <span class="string">TianJin_Map2</span></span><br><span class="line">        <span class="attr">street:</span> <span class="string">NanKai_Map2</span></span><br></pre></td></tr></table></figure>

<h4 id="将配置绑定到第三方对象"><a href="#将配置绑定到第三方对象" class="headerlink" title="将配置绑定到第三方对象"></a>将配置绑定到第三方对象</h4><p>将配置文件中的信息绑定到某个Bean对象上，如果这个Bean对象没有源码，是第三方库提供的，怎么办？</p>
<p>此时可以单独编写一个方法，在方法上使用以下两个注解进行标注：</p>
<ul>
<li><strong>@Bean</strong></li>
<li><strong>@ConfigurationProperties</strong></li>
</ul>
<p>比如借用上面的类<code>Address.class</code>,可以写一个方法返回这个类的对象然后纳入ioc容器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 指定该类是一个配置类。</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig2</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 假设Address是第三方库提供的类。我们使用以下方式可以完成配置到bean的属性的绑定。</span></span><br><span class="line">    <span class="meta">@Bean</span> <span class="comment">// 纳入IoC容器的管理</span></span><br><span class="line">    <span class="meta">@ConfigurationProperties(prefix = &quot;other.abc&quot;)</span> <span class="comment">// 将配置文件中凡是以 other.abc 开头的配置数据绑定到Address对象的属性上。</span></span><br><span class="line">    <span class="keyword">public</span> Address <span class="title function_">address</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Address</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="指定数据来源"><a href="#指定数据来源" class="headerlink" title="指定数据来源"></a>指定数据来源</h4><p>之前所讲的内容是将Spring Boot框架默认的配置文件<code>application.properties</code>或<code>application.yml</code>作为数据的来源绑定到Bean上。如果配置信息没有在默认的配置文件中呢？可以使用@PropertySource注解指定配置文件的位置，这个配置文件可以是<code>.properties</code>，也可以是<code>.xml</code>。这里重点掌握<code>.properties</code>即可。</p>
<p>在<code>resources</code>目录下新建<code>a</code>目录，在<code>a</code>目录下新建<code>b</code>目录，<code>b</code>目录中新建<code>group-info.properties</code>文件，进行如下的配置：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">group.name</span>=<span class="string">IT</span></span><br><span class="line"><span class="attr">group.leader</span>=<span class="string">LaoDu</span></span><br><span class="line"><span class="attr">group.count</span>=<span class="string">20</span></span><br></pre></td></tr></table></figure>

<p>定义Java类<code>Group</code>，然后进行注解标注：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;group&quot;)</span></span><br><span class="line"><span class="comment">// 用这个注解来指定数据来源。</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:/a/b/group-info.properties&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Group</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String leader;</span><br><span class="line">    <span class="keyword">private</span> Integer count;</span><br><span class="line">    下面就是set和toSTring方法，省略</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以下三个注解分别起到什么作用：</p>
<ul>
<li>@Configuration：指定该类为配置类，纳入Spring容器的管理</li>
<li>@ConfigurationProperties(prefix &#x3D; “group”)：将配置文件中的值赋值给Bean对象的属性</li>
<li>@PropertySource(“classpath:a&#x2F;b&#x2F;group-info.properties”)：指定额外的配置文件</li>
</ul>
<h3 id="ImportResource注解"><a href="#ImportResource注解" class="headerlink" title="@ImportResource注解"></a>@ImportResource注解</h3><p>创建Bean的三种方式总结：</p>
<ul>
<li>第一种方式：编写applicationContext.xml文件，在该文件中注册Bean，Spring容器启动时实例化配置文件中的Bean对象。</li>
<li>第二种方式：@Configuration注解结合@Bean注解。</li>
<li>第三种方式：@Component、@Service、@Controller、@Repository等注解。</li>
</ul>
<p>第二种和第三种我们都已经知道了。针对第一种方式，如果在SpringBoot框架中应该怎么实现呢？使用@ImportResource注解实现</p>
<p>定义一个普通的Java类：Person</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    下面省略set get tostring</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在<code>resources</code>目录下新建<code>applicationContext.xml</code>配置文件，添加：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250420152210414.png" alt="image-20250420152210414"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;person&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.powernode.springboot.bean.Person&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jackson&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;20&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在SpringBoot主入口类上添加@ImportResource进行资源导入，这样<code>applicationContext.xml</code>文件中的Bean将会纳入IoC容器的管理：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ImportResource(&quot;classpath:/applicationContext.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot310ConfigBindToBeanApplication</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a>Environment</h3><p><strong><font style="color:#DF2A3F;">SpringBoot框架在启动的时候会将系统配置，环境信息全部封装到Environment对象中，如果要获取这些环境信息，可以调用&gt;Environment接口的方法</font></strong></p>
<p>在Spring Boot中，<code>Environment</code>接口提供了访问应用程序环境信息的方法，比如活动配置文件、系统环境变量、命令行参数等。<code>Environment</code>接口由Spring框架提供，Spring Boot应用程序通常会使用Spring提供的实现类<code>AbstractEnvironment</code>及其子类来实现具体的环境功能。</p>
<p><code>Environment</code>对象封装的主要数据包括：</p>
<ol>
<li><strong>Active Profiles</strong>: 当前激活的配置文件列表。Spring Boot允许应用程序定义不同的环境配置文件（如开发环境、测试环境和生产环境），通过激活不同的配置文件来改变应用程序的行为。</li>
<li><strong>System Properties</strong>: 系统属性，通常是操作系统级别的属性，比如操作系统名称、Java版本等。</li>
<li><strong>System Environment Variables</strong>: 系统环境变量，这些变量通常是由操作系统提供的，可以在启动应用程序时设置特定的值。</li>
<li><strong>Command Line Arguments</strong>: 应用程序启动时传递给主方法的命令行参数。</li>
<li><strong>Property Sources</strong>: <code>Environment</code>还包含了一个<code>PropertySource</code>列表，这个列表包含了从不同来源加载的所有属性。<code>PropertySource</code>可以来自多种地方，比如配置文件、系统属性、环境变量等。</li>
</ol>
<p>在Spring Boot中，可以通过注入<code>Environment</code>来获取上述信息。例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SomeBean</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Environment environment;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doSome</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 直接使用这个环境对象，来获取环境信息，配置信息等。</span></span><br><span class="line">        String[] activeProfiles = environment.getActiveProfiles();</span><br><span class="line">        <span class="keyword">for</span> (String activeProfile : activeProfiles) &#123;</span><br><span class="line">            System.out.println(activeProfile);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 也可以获取配置信息</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">street</span> <span class="operator">=</span> environment.getProperty(<span class="string">&quot;app.xyz.addr.street&quot;</span>);</span><br><span class="line">        System.out.println(street);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过这种方式，你可以根据环境的不同灵活地配置你的应用程序。<code>Environment</code>是一个非常有用的工具，它可以帮助你管理各种类型的配置信息，并根据不同的运行时条件做出相应的调整。</p>
<h2 id="Spring-Boot中如何进行AOP的开发（需要补习）"><a href="#Spring-Boot中如何进行AOP的开发（需要补习）" class="headerlink" title="Spring Boot中如何进行AOP的开发（需要补习）"></a>Spring Boot中如何进行AOP的开发（需要补习）</h2><h4 id="Spring-Boot-AOP概述"><a href="#Spring-Boot-AOP概述" class="headerlink" title="Spring Boot AOP概述"></a>Spring Boot AOP概述</h4><p>面向切面编程AOP在Spring教程中已经进行了详细讲解，这里不再赘述，如果忘记的同学，可以重新听一下Spring教程中AOP相关的内容。这里仅带着大家在Spring Boot中实现AOP编程。</p>
<p>Spring Boot的AOP编程和Spring框架中AOP编程的唯一区别是：引入依赖的方式不同。其他内容完全一样。Spring Boot中AOP编程需要引入aop启动器：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--aop启动器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1729734178510-707a3d64-caf6-407d-ba2b-9633f218c0ed.png"></p>
<p>可以看到，当引入<code>aop启动器</code>之后，会引入<code>aop依赖</code>和<code>aspectj依赖</code>。</p>
<ul>
<li>aop依赖：如果只有这一个依赖，也可以实现AOP编程，这种方式表示使用了纯Spring AOP实现aop编程。</li>
<li>aspectj依赖：一个独立的可以完成AOP编程的AOP框架，属于第三方的，不属于Spring框架。（我们通常用它，因为它的功能更加强大）</li>
</ul>
<h4 id="Spring-Boot-AOP实现"><a href="#Spring-Boot-AOP实现" class="headerlink" title="Spring Boot AOP实现"></a>Spring Boot AOP实现</h4><p>实现功能：项目中很多service，要求执行<code>任何service中的任何方法之前</code>记录日志。</p>
<h5 id="创建Spring-Boot项目引入aop启动器"><a href="#创建Spring-Boot项目引入aop启动器" class="headerlink" title="创建Spring Boot项目引入aop启动器"></a>创建Spring Boot项目引入aop启动器</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--aop启动器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="编写service并提供方法"><a href="#编写service并提供方法" class="headerlink" title="编写service并提供方法"></a>编写service并提供方法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 保存用户信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id 用户id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name 用户名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Long id, String name)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据id删除用户</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id 用户id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Long id, String name)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;正在保存用户信息：&quot;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;正在删除用户&quot;</span> + id + <span class="string">&quot;信息&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="编写切面"><a href="#编写切面" class="headerlink" title="编写切面"></a>编写切面</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span><span class="comment">//指定它是一个切面</span></span><br><span class="line"><span class="meta">@Component</span><span class="comment">//纳入ioc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoggingAspect</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 日志记录器，记录日志的工具</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(LoggingAspect.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义切入点，匹配所有以 &quot;service&quot; 结尾的包下的所有方法</span></span><br><span class="line">    <span class="comment">// 切入点表达式</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.powernode.springboot.service..*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">serviceMethods</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 在切入点的方法执行前执行此方法</span></span><br><span class="line">    <span class="comment">// 前置通知</span></span><br><span class="line">    <span class="meta">@Before(&quot;serviceMethods()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logBefore</span><span class="params">(JoinPoint joinPoint)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> joinPoint.getSignature().getName();</span><br><span class="line">        Object[] args = joinPoint.getArgs();</span><br><span class="line">        logger.info(<span class="string">&quot;方法 [&#123;&#125;] 携带的 [&#123;&#125;] 被调用了.&quot;</span>, methodName, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">ConfigurableApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> SpringApplication.run(Springboot311AopApplication.class, args);</span><br><span class="line"></span><br><span class="line">    <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> applicationContext.getBean(UserService.class);</span><br><span class="line">    userService.save(<span class="number">111L</span>, <span class="string">&quot;jackson&quot;</span>);</span><br><span class="line">    userService.deleteById(<span class="number">111L</span>);</span><br><span class="line"></span><br><span class="line">    applicationContext.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="第3章-SSM整合"><a href="#第3章-SSM整合" class="headerlink" title="第3章 SSM整合"></a>第3章 SSM整合</h1><h2 id="整合持久层框架MyBatis"><a href="#整合持久层框架MyBatis" class="headerlink" title="整合持久层框架MyBatis"></a>整合持久层框架MyBatis</h2><h3 id="准备数据库表及数据"><a href="#准备数据库表及数据" class="headerlink" title="准备数据库表及数据"></a>准备数据库表及数据</h3><p>创建数据库：springboot</p>
<p>使用IDEA工具自带的mysql插件来完成表的创建和数据的准备：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1729050185616-731cbd39-267f-45e1-81f3-1f07d621c514.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250420210717500.png" alt="image-20250420210717500"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250420210729068.png" alt="image-20250420210729068"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250420210733298.png" alt="image-20250420210733298"></p>
<p>表创建成功后，为表准备数据，如下：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250420210742206.png" alt="image-20250420210742206"></p>
<h3 id="创建SpringBoot项目"><a href="#创建SpringBoot项目" class="headerlink" title="创建SpringBoot项目"></a>创建SpringBoot项目</h3><p>引入mysql驱动以及mybatis的启动器</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250420210817285.png" alt="image-20250420210817285"></p>
<p>依赖如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mybatis的启动器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--mysql的驱动依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong><font style="color:#DF2A3F;">注意，之前也提到过：</font></strong></p>
<ul>
<li><strong><font style="color:#DF2A3F;">Spring Boot官方提供的启动器的名字规则：spring-boot-starter-xxx</font></strong></li>
<li><strong><font style="color:#DF2A3F;">第三方（非Spring Boot官方）提供的启动器的名字规则：xxx-spring-boot-starter</font></strong></li>
</ul>
<h3 id="编写数据源配置"><a href="#编写数据源配置" class="headerlink" title="编写数据源配置"></a>编写数据源配置</h3><p>前面提到过，Spring Boot配置统一可以编写到application.properties中，配置如下：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Spring Boot脚手架自动生成的</span></span><br><span class="line"><span class="attr">spring.application.name</span>=<span class="string">sb3-05-springboot-mybatis</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># mybatis连接数据库的数据源</span></span><br><span class="line"><span class="attr">spring.datasource.type</span>=<span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/springboot</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">liuqi3711022</span></span><br></pre></td></tr></table></figure>

<p>以上的配置属于连接池的配置，连接池使用的是Spring Boot默认的连接池：HikariCP</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据源配置</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/springboot</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br></pre></td></tr></table></figure>

<h3 id="编写实体类Vip"><a href="#编写实体类Vip" class="headerlink" title="编写实体类Vip"></a>编写实体类Vip</h3><p>表<code>t_vip</code>中的字段分别是：</p>
<ul>
<li>id</li>
<li>name</li>
<li>card_number</li>
<li>birth</li>
</ul>
<p>对应实体类<code>Vip</code>中的属性名分别是：</p>
<ul>
<li>Long id;</li>
<li>String name;</li>
<li>String cardNumber;</li>
<li>String birth;</li>
</ul>
<p>创建包<code>bean</code>，在该包下新建Vip类，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Vip</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String cardNumber; <span class="comment">// 数据库字段 card_number</span></span><br><span class="line">    <span class="keyword">private</span> String birth;</span><br><span class="line">    有参无参构造方法，没有id的有参，toSTring，setget</span><br><span class="line">    &#123;&#125;    </span><br></pre></td></tr></table></figure>

<h3 id="编写Mapper接口"><a href="#编写Mapper接口" class="headerlink" title="编写Mapper接口"></a>编写Mapper接口</h3><p>创建<code>repository</code>包，在该包下新建<code>VipMapper</code>接口，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">VipMapper</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 保存会员信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> vip 会员信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 1表示保存成功。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insert</span><span class="params">(Vip vip)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取所有会员信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 会员列表</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;Vip&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="编写Mapper接口的XML配置文件"><a href="#编写Mapper接口的XML配置文件" class="headerlink" title="编写Mapper接口的XML配置文件"></a>编写Mapper接口的XML配置文件</h3><p>在<code>resources</code>目录下新建<code>mapper</code>目录，将来的<code>mapper.xml</code>配置文件放在这个目录下。</p>
<p>安装<code>MyBatisX</code>插件，该插件可以根据我们编写的<code>VipMapper</code>接口自动生成mapper的XML配置文件。</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250421002452276.png" alt="image-20250421002452276"></p>
<p>然后在<code>VipMapper</code>接口上：alt+enter,选择[mybatisx]generate mapper of xml，生成<code>mapper of xml</code>：需要选择一个生成的位置</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250421002424305.png" alt="image-20250421002424305"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250421003045200.png" alt="image-20250421003045200"></p>
<p>接下来，你会看到Mapper接口中方法报错了，可以在错误的位置上使用<code>alt+enter</code>，选择<code>Generate statement</code>：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250421013141212.png" alt="image-20250421013141212"></p>
<p>这个时候在mapper的xml配置文件中便生成了对应的配置，如下：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250421013237683.png" alt="image-20250421013237683"></p>
<p>接下来就是编写SQL语句了，最终<code>VipMapper.xml</code>文件的配置如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.powernode.springboot.repository.VipMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--就是说下面的这个太长了，可以在配置文件里起别名起，起完别名就可以直接写那个类了，也可以不写，他会自动识别--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;insert id=&quot;insert&quot;parameterType=&quot;com.powernode.springboot.bean.Vip&quot;&gt;&lt;/insert&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span><span class="attr">parameterType</span>=<span class="string">&quot;Vip&quot;</span>&gt;</span></span><br><span class="line">        insert into t_vip(id,name,card_number,birth) values(null,#&#123;name&#125;,#&#123;cardNumber&#125;,#&#123;birth&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;select id=&quot;selectAll&quot; resultType=&quot;com.powernode.springboot.bean.Vip&quot;&gt;&lt;/select&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Vip&quot;</span>&gt;</span></span><br><span class="line">        select * from t_vip</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>配置文件起别名：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mybatis相关配置</span></span><br><span class="line"><span class="comment"># 1. 起别名</span></span><br><span class="line"><span class="attr">mybatis.type-aliases-package</span>=<span class="string">com.powernode.springboot.bean</span></span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mybatis相关配置</span></span><br><span class="line"><span class="comment"># 1. 起别名</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.powernode.springboot.bean</span></span><br></pre></td></tr></table></figure>

<p>写个VipService接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">VipService</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 保存会员信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> vip  会员信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true表示成功,false表示失败</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">save</span><span class="params">(Vip vip)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查看会员列表</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 会员列表</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;Vip&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>写实现类VipServiceImpl</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VipServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">VipService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="comment">//这里报错是因为vipmapper的接口和xml必须要告诉springboot在哪里，就需要在配置文件加上路径后，再在入口程序加个扫描注解</span></span><br><span class="line">    <span class="keyword">private</span> VipMapper vipMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">save</span><span class="params">(Vip vip)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> vipMapper.insert(vip) == <span class="number">1</span>;<span class="comment">//==1表示成功</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Vip&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> vipMapper.selectAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="添加Mapper的扫描"><a href="#添加Mapper的扫描" class="headerlink" title="添加Mapper的扫描"></a>添加Mapper的扫描</h3><p>上面的VipMapper会有红线，是因为springboot不知道在哪里</p>
<p>在Spring Boot的入口程序上添加如下的注解，来完成<code>VipMapper</code>接口的扫描：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过这个指定去哪里找Mapper接口（配置Mapper的扫描。）</span></span><br><span class="line"><span class="meta">@MapperScan(basePackages = &#123;&quot;com.powernode.springboot.repository&quot;&#125;)</span></span><br></pre></td></tr></table></figure>

<h3 id="告诉MyBatis框架MapperXML文件的位置"><a href="#告诉MyBatis框架MapperXML文件的位置" class="headerlink" title="告诉MyBatis框架MapperXML文件的位置"></a>告诉MyBatis框架MapperXML文件的位置</h3><p>在<code>application.properties</code>配置文件中进行如下配置：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2. 告诉springboot mapper.xml文件在哪里</span></span><br><span class="line"><span class="attr">mybatis.mapper-locations</span>=<span class="string">classpath:/mapper/*.xml</span></span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2. 告诉springboot，mapper配置文件的位置</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:/mapper/*.xml</span></span><br></pre></td></tr></table></figure>

<p>测试整合MyBatis是否成功</p>
<p>在Spring Boot主入口程序中获取Spring上下文对象<code>ApplicationContext</code>，从Spring容器中获取<code>VipMapper</code>对象，然后调用相关方法进行测试：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过这个指定去哪里找Mapper接口（配置Mapper的扫描。）</span></span><br><span class="line"><span class="meta">@MapperScan(basePackages = &#123;&quot;com.powernode.springboot.repository&quot;&#125;)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot312MybatisApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ConfigurableApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> SpringApplication.run(Springboot312MybatisApplication.class, args);</span><br><span class="line">        <span class="comment">// 获取service对象</span></span><br><span class="line">        <span class="type">VipService</span> <span class="variable">vipService</span> <span class="operator">=</span> applicationContext.getBean(VipService.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 保存会员</span></span><br><span class="line">        <span class="type">Vip</span> <span class="variable">vip1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Vip</span>(<span class="string">&quot;jack1&quot;</span>, <span class="string">&quot;1234567892&quot;</span>, <span class="string">&quot;1999-10-11&quot;</span>);</span><br><span class="line">        vipService.save(vip1);</span><br><span class="line">        <span class="comment">// 保存会员</span></span><br><span class="line">        <span class="type">Vip</span> <span class="variable">vip2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Vip</span>(<span class="string">&quot;lucy1&quot;</span>, <span class="string">&quot;1234567893&quot;</span>, <span class="string">&quot;1999-10-12&quot;</span>);</span><br><span class="line">        vipService.save(vip2);</span><br><span class="line">        <span class="comment">// 查看会员列表</span></span><br><span class="line">        vipService.findAll().forEach(System.out::println);<span class="comment">//用了Lambda表达式</span></span><br><span class="line">        <span class="comment">//数据cardnumber为空是因为数据库叫card_number,vip里叫cardNumber，没对应上，可以在xml起别名，也可以启用自动映射数据库表的列名和bean的属性名</span></span><br><span class="line"></span><br><span class="line">        applicationContext.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试结果：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250421183815008.png" alt="image-20250421183815008"></p>
<p>测试结果中可以看到<code>cardNumber</code>属性没有赋值成功，原因是：表中的字段名叫做<code>card_number</code>，和实体类<code>Vip</code>的属性名<code>cardNumber</code>对应不上。解决办法两个：</p>
<ul>
<li><strong>第一种方式：查询语句使用as关键字起别名，让查询结果列名和实体类的属性名对应上。</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Vip&quot;</span>&gt;</span></span><br><span class="line">  select id,name,card_number as cardNumber,bith from t_vip起别名</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>第二种方式：通过配置自动映射</strong></li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 3. 启用自动映射数据库表的列名和bean的属性名</span></span><br><span class="line"><span class="attr">mybatis.configuration.map-underscore-to-camel-case</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure>

<p>mapper的xml文件中的sql语句仍然使用<code>*</code>的方式：</p>
<p>map-underscore-to-camel-case 是一个配置项，主要用于处理数据库字段名与Java对象属性名之间的命名差异。在许多数据库中，字段名通常使用下划线（_）分隔单词，例如 first_name 或 last_name。而在Java代码中，变量名通常使用驼峰式命名法（camel case），如 firstName 和 lastName。</p>
<p>当使用MyBatis作为ORM框架时，默认情况下它会将SQL查询结果映射到Java对象的属性上。如果数据库中的字段名与Java对象的属性名不一致，那么就需要手动为每个字段指定相应的属性名，或者使用某种方式来自动转换这些名称。</p>
<p>map-underscore-to-camel-case 这个配置项的作用就是在查询结果映射到Java对象时，自动将下划线分隔的字段名转换成驼峰式命名法。这样可以减少手动映射的工作量，并提高代码的可读性和可维护性。</p>
<h2 id="Lombok库"><a href="#Lombok库" class="headerlink" title="Lombok库"></a>Lombok库</h2><p>Lombok 是一个 Java 库，它可以通过注解的方式减少 Java 代码中的样板代码。Lombok 自动为你生成构造函数、getter、setter、equals、hashCode、toString 方法等，从而避免了手动编写这些重复性的代码。这不仅减少了出错的机会，还让代码看起来更加简洁。</p>
<p><strong><font style="color:#DF2A3F;">Lombok只是一个编译阶段的库，能够帮我们自动补充代码，在Java程序运行阶段并不起作用。（因此Lombok库并不会影响Java程序的执行效率）</font></strong></p>
<h3 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h3><p>在 Maven 的 <code>pom.xml</code> 文件中添加 Lombok 依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.34<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="IDEA中安装Lombok插件"><a href="#IDEA中安装Lombok插件" class="headerlink" title="IDEA中安装Lombok插件"></a>IDEA中安装Lombok插件</h3><p>高版本的IntelliJ IDEA工具默认都是绑定Lombok插件的，不需要再额外安装：</p>
<h3 id="Lombok-的主要注解"><a href="#Lombok-的主要注解" class="headerlink" title="Lombok 的主要注解"></a>Lombok 的主要注解</h3><p><strong>@Data</strong>：</p>
<ul>
<li>等价于 <code>@ToString</code>, <code>@EqualsAndHashCode</code>, <code>@Getter</code>，<code>@Setter</code>, <code>@RequiredArgsConstructor</code>.</li>
<li>用于生成：必要参数的构造方法、getter、setter、toString、equals 和 hashcode 方法。</li>
</ul>
<p><strong>@Getter</strong> &#x2F; <strong>@Setter</strong>：</p>
<ul>
<li>分别用于生成所有的 getter 和 setter 方法。</li>
<li>可以作用于整个类，也可以作用于特定的字段。</li>
</ul>
<p><strong>@NoArgsConstructor</strong>：</p>
<ul>
<li>生成一个无参构造方法。</li>
</ul>
<p><strong>@AllArgsConstructor</strong>：</p>
<ul>
<li>生成一个包含所有实例变量的构造器。</li>
</ul>
<p><strong>@RequiredArgsConstructor</strong>：</p>
<ul>
<li>生成包含所有被 <code>final</code> 修饰符修饰的实例变量的构造方法。被final修饰的变量必须在构造方法执行前手动附上值0</li>
<li><strong><font style="color:#DF2A3F;">如果没有</font></strong><code>final</code><strong><font style="color:#DF2A3F;">的0实例变量，则自动生成无参数构造方法。</font></strong></li>
</ul>
<p><strong>@ToString</strong> &#x2F; <strong>@EqualsAndHashCode</strong>：</p>
<ul>
<li>用于生成 toString 和 equals&#x2F;hashCode 方法。</li>
<li><strong><font style="color:#DF2A3F;">这两个注解都有</font></strong><code>exclude</code><strong><font style="color:#DF2A3F;background-color:#ffffff;">属性，通过这个属性可以定制toString、hashCode、equals方法，也就是不包含的意思</font></strong></li>
</ul>
<p><strong><font style="color:#DF2A3F;">注：Lombok只能帮助我们生成无参数构造方法和全参数构造方法，其他定制参数的构造方法无法生成。</font></strong></p>
<h3 id="如何使用-Lombok？"><a href="#如何使用-Lombok？" class="headerlink" title="如何使用 Lombok？"></a>如何使用 Lombok？</h3><p>创建一个普通的Maven模块来快速测试一下Lombok库的使用：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250421185352259.png" alt="image-20250421185352259"></p>
<p>添加最新依赖</p>
<p>在 Java 类中使用 Lombok 提供的注解。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="comment">// 无参数构造方法</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="comment">// 全参数构造方法</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编写测试程序：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建User对象</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setId(<span class="number">111L</span>);</span><br><span class="line">        user.setName(<span class="string">&quot;jackson&quot;</span>);</span><br><span class="line">        user.setAge(<span class="number">20</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建User对象</span></span><br><span class="line">        user = <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">120L</span>, <span class="string">&quot;lucy&quot;</span>, <span class="number">30</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Lombok的其他常用注解"><a href="#Lombok的其他常用注解" class="headerlink" title="Lombok的其他常用注解"></a>Lombok的其他常用注解</h3><h4 id="Value"><a href="#Value" class="headerlink" title="@Value"></a>@Value</h4><p>该注解会给所有属性添加<code>final</code>，给所有属性提供<code>getter</code>方法，自动生成<code>toString</code>、<code>hashCode</code>、<code>equals</code></p>
<p><strong>通过这个注解可以创建不可变对象。</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Customer</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试程序：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomerTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Customer</span> <span class="variable">customer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Customer</span>(<span class="string">&quot;jackson&quot;</span>, <span class="number">20</span>);</span><br><span class="line">        System.out.println(customer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以查看一下字节码，你会发现，@Value注解的作用只会生成：全参数构造方法、getter方法、hashCode、equals、toString方法。（没有setter方法。）</p>
<h4 id="Builder"><a href="#Builder" class="headerlink" title="@Builder"></a>@Builder</h4><h5 id="GoF23种设计模式之一：建造模式"><a href="#GoF23种设计模式之一：建造模式" class="headerlink" title="GoF23种设计模式之一：建造模式"></a>GoF23种设计模式之一：建造模式</h5><p>建造模式（Builder Pattern）属于创建型设计模式。GoF23种设计模式之一。</p>
<p>用于解决对象创建时参数过多的问题。它通过将对象的构造过程与其表示分离，使得构造过程可以逐步完成，而不是一次性提供所有参数。建造模式的主要目的是让对象的创建过程更加清晰、灵活和可控。</p>
<p>简而言之，建造模式用于：</p>
<ol>
<li><strong>简化构造过程</strong>：通过逐步构造对象，避免构造函数参数过多。</li>
<li><strong>提高可读性和可维护性</strong>：让构造过程更加清晰和有序。</li>
<li><strong>增强灵活性</strong>：允许按需配置对象的不同部分。</li>
</ol>
<p>这样可以更方便地创建复杂对象，并且使得代码更加易于理解和维护。</p>
<h5 id="建造模式的代码"><a href="#建造模式的代码" class="headerlink" title="建造模式的代码"></a>建造模式的代码</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 建造模式。23种设计模式之一。GoF之一。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// 一般建造模式的bean属性使用final进行修饰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="comment">// 提供一个私有的全参数的构造方法</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// getter//不用setter</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Person&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 通过这个公开的静态方法获取建造器对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> PersonBuilder <span class="title function_">builder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PersonBuilder</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 静态的内部类：建造者，属性需要和上面的相同</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">PersonBuilder</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">        <span class="keyword">public</span> PersonBuilder <span class="title function_">name</span><span class="params">(String name)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = name;<span class="comment">//先把参数的String name赋给上面的private String name</span></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;<span class="comment">//这里的this就是当前的PersonBuilder对象</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">public</span> PersonBuilder <span class="title function_">age</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.age = age;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">public</span> Person <span class="title function_">build</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Person</span>(name, age);<span class="comment">//通过这个方法给person的nameage附上值</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> Person.builder()</span><br><span class="line">                .name(<span class="string">&quot;jack&quot;</span>)</span><br><span class="line">                .age(<span class="number">30</span>)</span><br><span class="line">                .build();</span><br><span class="line">        System.out.println(person);</span><br><span class="line">        <span class="comment">//流程是通过person的builder方法获取personbuilder对象，然后去调age和name方法赋值，再调用build方法把传进来的参数新建给person对象</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="使用-Builder注解自动生成建造模式的代码"><a href="#使用-Builder注解自动生成建造模式的代码" class="headerlink" title="使用@Builder注解自动生成建造模式的代码"></a>使用@Builder注解自动生成建造模式的代码</h5><p>该注解可以直接帮助我们生成以上的代码。使用<code>@Builder</code>注解改造以上代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Builder</span> <span class="comment">// 帮助我们这个类生成符合建造模式的代码。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> Person.builder()</span><br><span class="line">                .name(<span class="string">&quot;jack&quot;</span>)</span><br><span class="line">                .age(<span class="number">30</span>)</span><br><span class="line">                .build();</span><br><span class="line">        System.out.println(person);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Singular"><a href="#Singular" class="headerlink" title="@Singular"></a>@Singular</h4><p>@Singular注解是辅助@Builder注解的。</p>
<p>当被建造的对象的属性是一个集合，这个集合属性使用@Singular注解进行标注的话，可以连续调用集合属性对应的方法完成多个元素的添加。如果没有这个注解，则无法连续调用方法完成多个元素的添加。代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Builder</span> <span class="comment">// 帮助我们这个类生成符合建造模式的代码。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Singular翻译为：单数。表示一条一条添加</span></span><br><span class="line">    <span class="meta">@Singular(&quot;addPhone&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; phones;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//不加注解的话是先创建一个list集合然后一个一个加进去再赋值</span></span><br><span class="line">        <span class="comment">/*List&lt;String&gt; phones = new ArrayList&lt;&gt;();</span></span><br><span class="line"><span class="comment">        phones.add(&quot;12345678912&quot;);</span></span><br><span class="line"><span class="comment">        phones.add(&quot;12345678913&quot;);</span></span><br><span class="line"><span class="comment">        phones.add(&quot;12345678914&quot;);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        Person person = Person.builder()</span></span><br><span class="line"><span class="comment">                .name(&quot;jack&quot;)</span></span><br><span class="line"><span class="comment">                .age(30)</span></span><br><span class="line"><span class="comment">                .phones(phones)</span></span><br><span class="line"><span class="comment">                .build();</span></span><br><span class="line"><span class="comment">        System.out.println(person);*/</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//直接就加到list集合里</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> Person.builder()</span><br><span class="line">                .name(<span class="string">&quot;jack&quot;</span>)</span><br><span class="line">                .age(<span class="number">30</span>)</span><br><span class="line">                .addPhone(<span class="string">&quot;12345678912&quot;</span>)</span><br><span class="line">                .addPhone(<span class="string">&quot;12345678913&quot;</span>)</span><br><span class="line">                .addPhone(<span class="string">&quot;12345678914&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line">        System.out.println(person);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Slf4j"><a href="#Slf4j" class="headerlink" title="@Slf4j"></a>@Slf4j</h4><p>Lombok 支持多种日志框架的注解，可以根据你使用的日志框架选择合适的注解。以下是 Lombok 提供的**<font style="color:#DF2A3F;">部分日志注解</font>**及其对应的日志框架：</p>
<ol>
<li><code>@Log4j</code>：<ul>
<li>自动生成一个 <code>org.apache.log4j.Logger</code> 对象。</li>
<li>适用于 Apache Log4j 1.x 版本。</li>
</ul>
</li>
<li><code>@Slf4j</code>：<ul>
<li>自动生成一个 <code>org.slf4j.Logger</code> 对象。</li>
<li>适用于 SLF4J（Simple Logging Facade for Java），这是一种日志门面，可以与多种实际的日志框架（如 Logback、Log4j 等）集成。</li>
</ul>
</li>
<li><code>@Log4j2</code>：<ul>
<li>自动生成一个 <code>org.apache.logging.log4j.Logger</code> 对象。</li>
<li>适用于 Apache Log4j 2.x 版本。</li>
</ul>
</li>
</ol>
<h5 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h5><p>假设我们有一个类 <code>UserService</code>，并且我们想要使用 SLF4J 作为日志框架，我们可以这样使用 <code>@Slf4j</code> 注解：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveUser</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;保存用户信息....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserService</span>();</span><br><span class="line">        userService.saveUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在这个例子中，<code>log</code> 是一个静态成员变量，表示一个 <code>org.slf4j.Logger</code> 对象。Lombok 自动生成了这个日志对象，并且你可以直接使用它来进行日志记录。</p>
<h5 id="选择合适的注解"><a href="#选择合适的注解" class="headerlink" title="选择合适的注解"></a>选择合适的注解</h5><p>选择哪个注解取决于你使用的日志框架。例如：</p>
<ul>
<li>如果你使用的是 SLF4J，可以选择 <code>@Slf4j</code>。</li>
<li>如果你使用的是 Log4j 1.x，可以选择 <code>@Log4j</code>。</li>
<li>如果你使用的是 Log4j 2.x，可以选择 <code>@Log4j2</code>。</li>
</ul>
<h5 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h5><p>确保在使用这些注解之前，已经在项目中引入了相应的日志框架依赖。例如，如果你使用 SLF4J，你需要在项目中添加 SLF4J 的依赖，以及一个具体的日志实现（如 Logback）。对于其他日志框架，也需要相应地添加依赖。</p>
<h5 id="示例依赖"><a href="#示例依赖" class="headerlink" title="示例依赖"></a>示例依赖</h5><p>如果你使用 Maven 项目，并且选择了 SLF4J + Logback 的组合，可以添加以下依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Slf4j日志规范--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Slf4j日志实现：logback--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="MyBatis逆向生成"><a href="#MyBatis逆向生成" class="headerlink" title="MyBatis逆向生成"></a>MyBatis逆向生成</h2><p>MyBatis逆向工程：使用IDEA插件可以根据数据库表的设计逆向生成MyBatis的Mapper接口 与 MapperXML文件。</p>
<h3 id="安装插件free-mybatis-tools"><a href="#安装插件free-mybatis-tools" class="headerlink" title="安装插件free mybatis tools"></a>安装插件<code>free mybatis tools</code></h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250423023425918.png" alt="image-20250423023425918"></p>
<h3 id="在IDEA中配置数据源数据库"><a href="#在IDEA中配置数据源数据库" class="headerlink" title="在IDEA中配置数据源数据库"></a>在IDEA中配置数据源数据库</h3><p>然后在里面创建好数据</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250423030158773.png" alt="image-20250423030158773"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250423030250812.png" alt="image-20250423030250812"></p>
<h3 id="使用脚手架创建SpringBoot项目"><a href="#使用脚手架创建SpringBoot项目" class="headerlink" title="使用脚手架创建SpringBoot项目"></a>使用脚手架创建SpringBoot项目</h3><p>添加依赖：mybatis依赖、mysql驱动、Lombok库</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250423030332658.png" alt="image-20250423030332658"></p>
<h3 id="生成MyBatis代码放到SpringBoot项目中"><a href="#生成MyBatis代码放到SpringBoot项目中" class="headerlink" title="生成MyBatis代码放到SpringBoot项目中"></a>生成MyBatis代码放到SpringBoot项目中</h3><p>在表上右键：Mybatis-Generator</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250423030500952.png" alt="image-20250423030500952"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/QQ20250423-033015.png" alt="QQ20250423-033015"></p>
<p>代码生成后，如果在IDEA中看不到，这样做（重新从硬盘加载）：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250423033134517.png" alt="image-20250423033134517"></p>
<p><strong><font style="color:#DF2A3F;">注意：生成的</font></strong><code>VipMapper</code><strong><font style="color:#DF2A3F;">接口上自动添加了</font></strong><code>@Repository</code><strong><font style="color:#DF2A3F;">注解，这个注解没用，删除即可。</font></strong></p>
<hr>
<h3 id="编写mybatis相关配置"><a href="#编写mybatis相关配置" class="headerlink" title="编写mybatis相关配置"></a>编写mybatis相关配置</h3><p>application.properties属性文件的配置：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.application.name</span>=<span class="string">springboot3-13-mybatis-gennerator</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#还要告诉配置文件的位置</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/springboot</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">liuqi3711022</span></span><br><span class="line"><span class="comment">#这个不配也可以，默认就是这个spring.datasource.type=com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># mybatis相关配置</span></span><br><span class="line"><span class="attr">mybatis.configuration.map-underscore-to-camel-case</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">mybatis.mapper-locations</span>=<span class="string">classpath:/mapper/*.xml</span></span><br><span class="line"><span class="attr">mybatis.type-aliases-package</span>=<span class="string">com.powernode.springboot.bean</span></span><br></pre></td></tr></table></figure>

<h3 id="编写测试程序"><a href="#编写测试程序" class="headerlink" title="编写测试程序"></a>编写测试程序</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//做包扫描</span></span><br><span class="line"><span class="meta">@MapperScan(basePackages = &quot;com.powernode.springboot.repository&quot;)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot313MybatisGenneratorApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ConfigurableApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> SpringApplication.run(Springboot313MybatisGenneratorApplication.class, args);</span><br><span class="line">        <span class="type">VipMapper</span> <span class="variable">vipMapper</span> <span class="operator">=</span> applicationContext.getBean(VipMapper.class);</span><br><span class="line"></span><br><span class="line">        <span class="type">Vip</span> <span class="variable">vip</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Vip</span>(<span class="string">&quot;jack&quot;</span>, <span class="string">&quot;1234567899&quot;</span>, <span class="string">&quot;2000-11-10&quot;</span>);</span><br><span class="line">        vipMapper.insert(vip);</span><br><span class="line"></span><br><span class="line">        <span class="type">Vip</span> <span class="variable">vip2</span> <span class="operator">=</span> vipMapper.selectByPrimaryKey(<span class="number">1L</span>);</span><br><span class="line">        System.out.println(vip2);</span><br><span class="line">        applicationContext.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Vip</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="comment">//因为id是主键自增，不需要生成构造方法，就给其他的手动生成</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String cardNumber;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String birth;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Vip</span><span class="params">(String name, String cardNumber, String birth)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.cardNumber = cardNumber;</span><br><span class="line">        <span class="built_in">this</span>.birth = birth;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="整合SpringMVC（SSM整合）"><a href="#整合SpringMVC（SSM整合）" class="headerlink" title="整合SpringMVC（SSM整合）"></a>整合SpringMVC（SSM整合）</h2><p>Spring Boot项目本身就是基于Spring框架实现的。因此SSM整合时，只需要在整合MyBatis框架之后，引入<code>web启动器</code>即可完成SSM整合。</p>
<h3 id="使用脚手架创建SpringBoot项目-1"><a href="#使用脚手架创建SpringBoot项目-1" class="headerlink" title="使用脚手架创建SpringBoot项目"></a>使用脚手架创建SpringBoot项目</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250423193335275.png" alt="image-20250423193335275"></p>
<p>添加依赖：web启动器、mybatis启动器、mysql驱动依赖、lombok依赖</p>
<h3 id="使用free-mybatis-tool插件逆向生成MyBatis代码"><a href="#使用free-mybatis-tool插件逆向生成MyBatis代码" class="headerlink" title="使用free mybatis tool插件逆向生成MyBatis代码"></a>使用<code>free mybatis tool</code>插件逆向生成MyBatis代码</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250423193624771.png" alt="image-20250423193624771"></p>
<h3 id="整合MyBatis"><a href="#整合MyBatis" class="headerlink" title="整合MyBatis"></a>整合MyBatis</h3><p>编写数据源的配置</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据源</span></span><br><span class="line"><span class="attr">spring.datasource.type</span>=<span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/springboot</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">liuqi3711022</span></span><br></pre></td></tr></table></figure>

<p>编写mapper xml配置文件的位置</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mybatis配置</span></span><br><span class="line"><span class="attr">mybatis.type-aliases-package</span>=<span class="string">com.powernode.ssm.bean</span></span><br><span class="line"><span class="attr">mybatis.mapper-locations</span>=<span class="string">classpath:/mapper/*.xml</span></span><br><span class="line"><span class="attr">mybatis.configuration.map-underscore-to-camel-case</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure>

<p>在主入口类上添加<code>@MapperScan</code>注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MapperScan(basePackages = &quot;com.powernode.ssm.repository&quot;)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot314SsmApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Springboot314SsmApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="编写service-1"><a href="#编写service-1" class="headerlink" title="编写service"></a>编写service</h3><p>编写<code>VipService</code>接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">VipService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据会员的卡号查询会员的信息。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> cardNumber 会员的卡号</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 会员信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Vip <span class="title function_">findByCardNumber</span><span class="params">(String cardNumber)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编写<code>VipServiceImpl</code>实现类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VipServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">VipService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> VipMapper vipMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Vip <span class="title function_">findByCardNumber</span><span class="params">(String cardNumber)</span> &#123;</span><br><span class="line">        <span class="comment">//调用vipmapper里的查询方法，把卡号传进去</span></span><br><span class="line">        <span class="keyword">return</span> vipMapper.selectByCardNumber(cardNumber);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="编写controller"><a href="#编写controller" class="headerlink" title="编写controller"></a>编写controller</h3><p>编写<code>VipController</code>，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VipController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> VipService vipService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/detail&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Vip <span class="title function_">detail</span><span class="params">(<span class="meta">@RequestParam(&quot;cn&quot;)</span> String cardNumber)</span>&#123;<span class="comment">//地址写上http://localhost:8080/detail?cn=卡号</span></span><br><span class="line">        <span class="keyword">return</span> vipService.findByCardNumber(cardNumber);<span class="comment">//会返回一个vip然后转成json响应在浏览器</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><font style="color:#DF2A3F;">提示：这里使用了RESTFul编程风格，这个内容在SpringMVC课程中已经讲过。忘了的同学可以回头观看一下。</font></p>
<h3 id="启动服务器测试"><a href="#启动服务器测试" class="headerlink" title="启动服务器测试"></a>启动服务器测试</h3><p>执行SpringBoot项目主入口的main方法，启动Tomcat服务器：</p>
<p>打开浏览器访问：<a href="http://localhost:8080/detail?cn=1234567893">http://localhost:8080/detail?cn=1234567893</a></p>
<p>到此为止，SSM框架就集成完毕了，通过这个集成也可以感觉到SpringBoot简化了SSM三大框架的集成。</p>
<h1 id="第4章-Spring-Boot自动配置"><a href="#第4章-Spring-Boot自动配置" class="headerlink" title="第4章 Spring Boot自动配置"></a>第4章 Spring Boot自动配置</h1><h2 id="自动配置概述"><a href="#自动配置概述" class="headerlink" title="自动配置概述"></a>自动配置概述</h2><h3 id="SpringBoot的两大核心"><a href="#SpringBoot的两大核心" class="headerlink" title="SpringBoot的两大核心"></a>SpringBoot的两大核心</h3><p>Spring Boot 框架的两大核心特性可以概括为“启动器”（Starter）和“自动配置”（Auto-configuration）。</p>
<ol>
<li><strong>启动器（Starter）</strong>：<br>Spring Boot 提供了一系列的 Starter POMs，它们是一组预定义的依赖关系。</li>
</ol>
<p>当你在项目中引入一个 Starter POM 时，它会自动包含所有必要的 Spring 组件以及合理的默认设置。开发者不需要手动管理复杂的依赖关系，也不需要担心版本冲突的问题，减少了配置上的出错可能。</p>
<ol start="2">
<li><strong>自动配置（Auto-Configuration）</strong>：<br>当添加了特定的 Starter POM 后，Spring Boot 会**<font style="color:#DF2A3F;">根据类路径上存在的 jar 包来自动配置 Bean（自动配置相关组件）（比如：SpringBoot发现类路径上存在mybatis相关的类，例如SqlSessionFactory.class，那么SpringBoot将自动配置mybatis相关的所有Bean。）</font>**。</li>
</ol>
<p>如果开发者没有显式地提供任何与特定功能相关的配置，Spring Boot 将使用其默认配置来自动设置这些功能。当然，如果需要的话，用户也可以覆盖这些默认设置。</p>
<p>这两个特性结合在一起，使得使用 Spring Boot 开发应用程序变得更加简单快速，减少了大量的样板代码和重复配置的工作。<strong><font style="color:#DF2A3F;">让程序员专注业务逻辑的开发，在环境方面耗费最少的时间</font></strong>。</p>
<h3 id="体会自动配置带来的便捷"><a href="#体会自动配置带来的便捷" class="headerlink" title="体会自动配置带来的便捷"></a>体会自动配置带来的便捷</h3><p>拿SpringBoot集成MyBatis为例。</p>
<p>以前，在没有SpringBoot框架的时候，我们用Spring集成MyBatis框架，需要进行如下的配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/tx/spring-tx.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 数据源配置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.commons.dbcp2.BasicDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mydb&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- SqlSessionFactory --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mapper/*.xml&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;typeAliasesPackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.example.model&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Mapper 扫描器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.example.mapper&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactoryBeanName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 事务管理器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 开启事务注解 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 扫描 service 层的包 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.example.service&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>通过以上的配置可以看到Spring集成MyBatis的时候，需要手动提供<code>BasicDataSource</code>、<code>SqlSessionFactoryBean</code>、<code>MapperScannerConfigurer</code>、<code>DataSourceTransactionManager</code>等Bean的配置。</p>
<p>使用了Spring Boot框架之后，这些配置都不需要提供了，SpringBoot框架的自动配置机制可以全部按照默认的方式自动化完成。减少了大量的配置，在环境方面耗费很少的时间，让程序员更加专注业务逻辑的处理。我们只需要在<code>application.yml</code>中提供以下的配置即可：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/springboot</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br></pre></td></tr></table></figure>

<p>spring-boot-starter是springboot框架最核心的启动器，做springboot项目时，这个启动器是必须的，如果创建这个项目的时候没有选择任何启动器，这个时候springboot项目最小配置就必须将spring-boot-starter配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--springboot框架建议以继承父工程的方式引入springboot。--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--这个启动器是springboot最核心的启动器。这个启动器是必须引入的。--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--引入任何启动的时候，spring-boot-starter都会关联引入。--&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--&lt;dependency&gt;</span></span><br><span class="line"><span class="comment">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">        &lt;/dependency&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--这个就是web启动器，web启动器会关联引入springboot核心启动器，上面的starter就可以不要了--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="引入web启动器都有哪些组件会准备好"><a href="#引入web启动器都有哪些组件会准备好" class="headerlink" title="引入web启动器都有哪些组件会准备好"></a>引入web启动器都有哪些组件会准备好</h3><p>通过以下代码获取spring ioc容器中的所有注册的bean，一个Bean就是一个组件：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot315AutoConfigurationApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ConfigurableApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> SpringApplication.run(Springboot315AutoConfigurationApplication.class, args);</span><br><span class="line">        <span class="comment">//从ioc容器中查看有多少组件，将组件的id打印出来，这个方法能获取所有组件的id</span></span><br><span class="line">        String[] allBeanNames = applicationContext.getBeanDefinitionNames();</span><br><span class="line">        <span class="keyword">for</span>(String allBeanName : allBeanNames)&#123;</span><br><span class="line">            System.out.println(allBeanName);</span><br><span class="line">        &#125;</span><br><span class="line">        applicationContext.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在springboot没有引入任何启动器的情况下，默认提供了<code>59</code>bean</p>
<p>引入web启动器可以发现，ioc容器中注册的bean总数量为<code>160</code>个</p>
<p>也就是说，引入了<code>web启动器</code>后，ioc容器中增加了<code>101</code>个bean对象（<strong><font style="color:#DF2A3F;">加入了101个组件</font></strong>）。这<code>101</code>个bean对象都是为web开发而准备的，例如我们常见的：</p>
<ul>
<li>dispatcherServlet：DispatcherServlet 是 Spring MVC 的前端控制器，负责接收所有的 HTTP 请求，并将请求分发给适当的处理器（Controller）</li>
<li>viewResolver：ViewResolver 是 Spring MVC 中用于将逻辑视图名称解析为实际视图对象的组件。它的主要作用是根据控制器返回的视图名称，找到对应的视图实现（如 JSP、Thymeleaf、Freemarker 等），并返回给 DispatcherServlet 用于渲染视图。</li>
<li>characterEncodingFilter：字符集过滤器组件，专门处理字符集，解决请求和响应的乱码问题。</li>
<li>mappingJackson2HttpMessageConverter：负责处理消息转换的组件。它可以将json字符串转换成java对象，也可以将java对象转换为json字符串。</li>
<li>……</li>
</ul>
<p>每一个组件都有它特定的功能。</p>
<p>没有使用SpringBoot之前，以上的很多组件都是需要手动配置的。</p>
<h3 id="默认的包扫描规则"><a href="#默认的包扫描规则" class="headerlink" title="默认的包扫描规则"></a>默认的包扫描规则</h3><p>之前我们已经说过并且测试过：springboot默认情况下只扫描<code>主入口类</code>所在包及子包下的类。</p>
<p>这是因为<code>@SpringBootApplication</code>注解被<code>@ComponentScan</code>标注，代替spring以前的这个配置：<code>&lt;context:component-scan base-packages=&quot;主入口类所在包&quot;/&gt;</code></p>
<p>当然，我们也可以打破这个规则，通过以下两种方式：</p>
<ul>
<li>第一种：@SpringBootApplication(scanBasePackages &#x3D; “com”)</li>
<li>第二种：@ComponentScan(“com”)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@SpringBootApplication里面集成了这三个注解，componentscan是负责包扫描的，指定这个包下所有的bean可以被加载</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com&quot;)</span></span><br><span class="line"><span class="comment">//@SpringBootApplication(scanBasePackages = &quot;com&quot;)//将扫描包的范围设定为从com包下开始</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot315AutoConfigurationApplication</span> &#123;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="默认配置"><a href="#默认配置" class="headerlink" title="默认配置"></a>默认配置</h3><p>springboot为功能的实现提供了非常多的默认配置.</p>
<p>例如：tomcat服务器端口号在没有配置的情况下，默认是<code>8080</code></p>
<p>当然，也可以在<code>application.properties</code>文件中进行重新配置：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">8081</span></span><br></pre></td></tr></table></figure>

<p>再如，配置thymeleaf的模板引擎时，默认的模板引擎前缀是<code>classpath:/templates/</code>，默认的后缀是<code>.html</code></p>
<p>当然，也可以重新配置：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.thymeleaf.prefix</span>=<span class="string">classpath:/templates/</span></span><br><span class="line"><span class="attr">spring.thymeleaf.suffix</span>=<span class="string">.html</span></span><br></pre></td></tr></table></figure>

<p>通过创建脚手架时引入wen启动器会自动创建static（放置静态资源js图片）和templates（放置thymeleaf模版引擎下的xxx.html）</p>
<p>这些配置最终都会通过<code>@ConfigurationProperties(prefix=&quot;&quot;)</code>注解绑定到对应的bean的属性上。这个Bean我们一般称为<code>属性类</code>。例如：</p>
<p><code>ServerProperties</code>：服务器属性类，专门负责配置服务器相关信息。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;server&quot;, ignoreUnknownFields = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServerProperties</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<p><code>ThymeleafProperties</code>：Thymeleaf属性类，专门负责配置Thymeleaf模板引擎的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;spring.thymeleaf&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThymeleafProperties</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>SpringBoot官方文档当中也有指导，告诉你都有哪些<code>属性类</code>，告诉你在<code>application.properties</code>中都可以配置哪些东西。默认值都是什么：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250424141751278.png" alt="image-20250424141751278"></p>
<h3 id="自动配置是按需加载的"><a href="#自动配置是按需加载的" class="headerlink" title="自动配置是按需加载的"></a>自动配置是按需加载的</h3><p>SpringBoot提供了非常多的自动配置类，有的是<code>web</code>相关的自动配置，有的是<code>mail</code>相关的自动配置。但是这些自动配置并不是全部生效，它是按需加载的。<strong><font style="color:#DF2A3F;">导入了哪个启动器，则该启动器对应的自动配置类才会被加载</font></strong>。</p>
<p>这些自动配置类在哪里？</p>
<p>任何启动器都会关联引入这样一个启动器：<code>spring-boot-starter</code>，它是springboot框架最核心的启动器。</p>
<p><code>spring-boot-starter</code>又关联引入了<code>spring-boot-autoconfigure</code>。所有的自动配置类都在这里。</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250424165037627.png" alt="image-20250424165037627"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250424164959922.png" alt="image-20250424164959922"></p>
<h3 id="SpringBoot框架提供的条件注解"><a href="#SpringBoot框架提供的条件注解" class="headerlink" title="SpringBoot框架提供的条件注解"></a>SpringBoot框架提供的条件注解</h3><p>如何做到按需加载的，依靠SpringBoot框架中的条件注解来实现的。</p>
<p>Spring Boot框架中的@ConditionalOnXxx系列注解属于条件注解（Conditional Annotations），它们用于基于某些条件来决定是否应该创建一个或一组Bean。这些注解通常用在自动配置类上，以确保只有在特定条件满足时才会应用相应的配置。</p>
<p>这里是一些常见的@ConditionalOnXxx注解及其作用：</p>
<ul>
<li>@ConditionalOnClass：当指定的类存在时，才创建Bean。</li>
<li>@ConditionalOnMissingClass：当指定的类不存在时，才创建Bean。</li>
<li>@ConditionalOnBean：当容器中存在指定的Bean时，才创建Bean。</li>
<li>@ConditionalOnMissingBean：当容器中不存在指定的Bean时，才创建Bean。</li>
<li>@ConditionalOnProperty：当配置文件中存在指定的属性时，才创建Bean。也可以设置属性值需要匹配的值。</li>
<li>@ConditionalOnResource：当指定的资源存在时，才创建Bean。</li>
<li>@ConditionalOnWebApplication：当应用程序是Web应用时，才创建Bean。</li>
<li>@ConditionalOnNotWebApplication：当应用程序不是Web应用时，才创建Bean。</li>
</ul>
<p>使用这些注解可以帮助开发者根据不同的运行环境或配置来灵活地控制Bean的创建，从而实现更智能、更自动化的配置过程。这对于构建可插拔的模块化系统特别有用，因为可以根据实际需求选择性地启用或禁用某些功能。</p>
<p>假设我们来实现这样一个功能：如果IoC容器当中**<font style="color:#DF2A3F;">存在ABean</font>**<code>，就创建</code>B&#96;Bean，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> A <span class="title function_">test1</span><span class="params">()</span>&#123;<span class="comment">// 方法的名字作为bean name</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果IoC容器中存在A类型的Bean对象时创建b</span></span><br><span class="line">    <span class="meta">@ConditionalOnBean(A.class)</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> B <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">B</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@SpringBootApplication里面集成了这三个注解，componentscan是负责包扫描的，指定这个包下所有的bean可以被加载</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com&quot;)</span></span><br><span class="line"><span class="comment">//@SpringBootApplication(scanBasePackages = &quot;com&quot;)//将扫描包的范围设定为从com包下开始</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot315AutoConfigurationApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ConfigurableApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> SpringApplication.run(Springboot315AutoConfigurationApplication.class, args);</span><br><span class="line">        <span class="comment">//从ioc容器中查看有多少组件，将组件的id打印出来，这个方法能获取所有组件的id</span></span><br><span class="line">        String[] allBeanNames = applicationContext.getBeanDefinitionNames();</span><br><span class="line">        <span class="keyword">for</span>(String allBeanName : allBeanNames)&#123;</span><br><span class="line">            <span class="comment">//System.out.println(allBeanName);</span></span><br><span class="line">            <span class="comment">/*if(allBeanName.equals(&quot;appBean&quot;))&#123;</span></span><br><span class="line"><span class="comment">                System.out.println(allBeanName);</span></span><br><span class="line"><span class="comment">            &#125;*/</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;test1&quot;</span>.equals(allBeanName))&#123;</span><br><span class="line">                System.out.println(allBeanName);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;test2&quot;</span>.equals(allBeanName)) &#123;</span><br><span class="line">                System.out.println(allBeanName);<span class="comment">//输出test1 test2</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        applicationContext.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果IoC容器当中**<font style="color:#DF2A3F;">不存在Bean</font>**<code>，就创建</code>B&#96;Bean，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> A <span class="title function_">a</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean(A.class)</span><span class="comment">//输出test1，因为存在所以不创建</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> B <span class="title function_">b</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">B</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当类路径当中存在<code>DispatcherServlet</code>类，则启用配置，反之则不启用配置，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当类路径中存在DispatcherServlet这个类时配置生效</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(name = &#123;&quot;org.springframework.web.servlet.DispatcherServlet&quot;&#125;)</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> A <span class="title function_">getA</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上程序自行测试！</p>
<h2 id="自动配置实现原理"><a href="#自动配置实现原理" class="headerlink" title="自动配置实现原理"></a>自动配置实现原理</h2><p>我们来深入的分析一个问题：为什么导入<code>web启动器</code>，web开发相关的自动配置就会生效？</p>
<h3 id="在程序没有开始执行之前都导入了哪些依赖"><a href="#在程序没有开始执行之前都导入了哪些依赖" class="headerlink" title="在程序没有开始执行之前都导入了哪些依赖"></a>在程序没有开始执行之前都导入了哪些依赖</h3><p>在程序没有开始运行之前，我们先来分析一下，当导入<code>web启动器</code>之后，底层都一连串的导入了哪些依赖！</p>
<ol>
<li>从这里开始：导入了<code>spring-boot-starter-web</code>【web启动器】</li>
<li>然后关联导入了<code>spring-boot-starter</code>、<code>spring-boot-starter-json</code>、<code>spring-boot-starter-tomcat</code>、<code>spring-web</code>、<code>spring-webmvc</code><ol>
<li>注意：<code>spring-boot-starter</code>是springboot核心启动器，任何启动器在导入时，都会关联导入springboot核心启动器。</li>
</ol>
</li>
<li>核心启动器导入之后，关联导入了一个jar包：<code>spring-boot-autoconfigure</code>。<ol>
<li>注意：这个jar包中存放的是springboot框架**<font style="color:#DF2A3F;">官方支持的自动配置类</font>**。如下图：</li>
</ol>
</li>
</ol>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1731120167649-5b43660e-d911-4af1-b609-7ba357483cbb.png"></p>
<ol start="2">
<li>官方支持的自动配置类有多少个呢，可以通过下图位置查看：</li>
</ol>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1731120316690-38e92299-860c-4f52-8e90-93773af32190.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1731120338604-18c536ab-a98f-4ba7-adf3-10f47f02056d.png"></p>
<p>得知<code>springboot3.3.5</code>这个版本共<code>152</code>个自动配置类。自动配置类的命名规则是<code>XxxxAutoConfiguration</code>。</p>
<p><strong><font style="color:#DF2A3F;">提示：哪个自动配置类生效，就代表哪个配置文件生效，那么对应的技术就完成了整合，就可以进行对应技术的开发。</font></strong></p>
<h3 id="从main方法开始执行之后都发生了什么"><a href="#从main方法开始执行之后都发生了什么" class="headerlink" title="从main方法开始执行之后都发生了什么"></a>从main方法开始执行之后都发生了什么</h3><p>以上分析的是在项目结构上已经完成了相关依赖的导入，这些自动配置了导入到了项目当中，那么在运行时哪些自动配置类会被加载？哪些自动配置类会生效呢？我们接下来进行程序运行阶段的分析：</p>
<ol>
<li><p>程序从main方法进入执行，主入口类上使用<code>@SpringBootApplication</code>进行了标注。</p>
</li>
<li><p><code>@SpringBootApplication</code>注解是复合注解，代表以下三个注解的功能：</p>
<ol>
<li><code>@SpringBootConfiguration</code>：它被<code>@Configuration</code>标注，说明主入口类就是一个配置类，此时该配置开始加载。</li>
<li><code>@ComponentScan</code>：默认扫描的是主入口所在包以及子包。因此<code>spring-boot-autoconfigure</code>包是扫描不到的，按说<code>XxxAutoConfiguration</code>自动配置类是无法加载的！！！那么这些自动配置类又是如何加载和生效的呢？</li>
<li><code>@EnableAutoConfiguration</code>：自动配置类的加载和生效全靠它了。该注解被翻译为：启用自动配置。如果后面加上(excludeName&#x3D; {“A”, “B”})，就会排除这些不去自动配置</li>
</ol>
</li>
<li><p><code>@EnableAutoConfiguration</code>被<code>@Import(AutoConfigurationImportSelector.class)</code>标注</p>
<ol>
<li><code>@Import(AutoConfigurationImportSelector.class)</code>的作用是：将<code>AutoConfigurationImportSelector</code>作为一个Bean加载到IoC容器中。</li>
<li>这个Bean的作用是：负责收集和选择所有符合条件的自动配置类。</li>
</ol>
</li>
<li><p>添加断点，跟踪<code>AutoConfigurationImportSelector</code>源码：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250426163012567.png" alt="image-20250426163012567"></p>
<p>通过跟踪得知，这<code>152</code>个自动配置类的<strong>类名</strong>都会被加载到IoC容器中。<strong><font style="color:#DF2A3F;">注意：加载了152，并不是152个全部生效</font></strong>。</p>
<p>如果给</p>
</li>
<li><p>这<code>152</code>个自动配置类底层是怎么查找的？</p>
<p>点击这里</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250426163734714.png" alt="image-20250426163734714"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250426163759149.png" alt="image-20250426163759149"></p>
<p>这里的load返回一个list集合，然后这个方法把这个集合return，点进去load方法</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250426164956281.png"></p>
<p>这里可以看到后面是一个class类，也就是上面的AutoConfiguration.class</p>
<p>通过以上源码跟踪，得知，是从下图位置加载的：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1731120316690-38e92299-860c-4f52-8e90-93773af32190-1745657467970-10.png"></p>
<p>最先获取到<code>152</code>个，经过上图的一层一层的过滤（<strong>条件注解</strong>），<strong><font style="color:#DF2A3F;">最终筛选了</font></strong><code>26</code><strong><font style="color:#DF2A3F;">个自动配置类，为什么这么少，因为你只引入了</font></strong><code>web starter</code><strong><font style="color:#DF2A3F;">。这26个配置就是做web开发需要的最少配置</font></strong></p>
</li>
</ol>
<p><strong>具体怎么排除的，请看以下解释：</strong></p>
<ul>
<li>configurations &#x3D; removeDuplicates(configurations);</li>
</ul>
<p>   去重：移除 configurations 列表中的重复项，确保每个配置类只出现一次。</p>
<ul>
<li>Set<String> exclusions &#x3D; getExclusions(annotationMetadata, attributes);</li>
</ul>
<p>   获取排除列表：从注解元数据和属性中获取需要排除的配置类名称集合。因为<code>@EnableAutoConfiguration</code>注解还能这么用：<code>@EnableAutoConfiguration(exclude = {排除列表}, excludeName = {排除列表})</code></p>
<ul>
<li>checkExcludedClasses(configurations, exclusions);</li>
</ul>
<p>   检查排除：验证 configurations 中是否有被排除的类，如果有，可能会抛出异常或记录警告。</p>
<ul>
<li>configurations.removeAll(exclusions);</li>
</ul>
<p>   移除排除项：从 configurations 列表中移除所有在 exclusions 集合中的配置类。</p>
<ul>
<li>configurations &#x3D; getConfigurationClassFilter().filter(configurations);</li>
</ul>
<p>   过滤配置类：使用 ConfigurationClassFilter 对 configurations 进行进一步过滤。<strong>这一行通过条件注解进行判断</strong>，例如 @ConditionalOnClass、@ConditionalOnMissingBean 等。</p>
<ul>
<li>fireAutoConfigurationImportEvents(configurations, exclusions);</li>
</ul>
<p>   触发事件：触发自动配置导入事件，通知其他组件或监听器关于最终确定的配置类和排除的类。</p>
<h3 id="自动配置类都干了啥"><a href="#自动配置类都干了啥" class="headerlink" title="自动配置类都干了啥"></a>自动配置类都干了啥</h3><p><strong><font style="color:#DF2A3F;">自动配置类导入了一堆相关的组件（一个组件一个功能），而每个组件获取配置时都是从属性类中获取，而属性类恰好又和配置文件绑定。</font></strong></p>
<p>以<code>DispatcherServletAutoConfiguration</code>自动配置类为例，这个自动配置类主要是配置了SpringMVC中的前端控制器。</p>
<p>请看源码：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1731133277010-5db32db6-3577-48c2-8238-4f845b273a46.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1745658496978-14.png"></p>
<p>通过以上源码得知，<code>DispatcherServletConfiguration</code>组件的配置信息来源于<code>WebMvcProperties</code>属性类。<code>WebMvcProperties</code>类源码如下：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1731133562874-9017d21b-32e6-488d-a4c8-6726fa7b0a89.png"></p>
<p>通过以上源码又得知，要对<code>DispatcherServletConfiguration</code>进行配置的话，应该在<code>application.properties</code>中使用这样的前缀配置：<code>spring.mvc....</code></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1745658496978-14.png"></p>
<p>再来看<code>嵌入式Web服务器工厂自定义程序自动配置</code>：<code>EmbeddedWebServerFactoryCustomizerAutoConfiguration</code>，通俗讲：通过它可以配置web服务器。</p>
<p>请看源码：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1731134006487-d1331ac9-1145-4d52-aed3-e9b60cdc810e.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1745658496978-14.png"></p>
<p>只要加了@EnableConfigurationProperties()就会在ioc容器中创建serverProperties对象，这个bean就有了，然后把application.Properties的配置信息绑定到serverProperties对象，在application文件中有很多配置，以什么前缀的配置绑定这个对象属性上呢？</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250426185717384.png" alt="image-20250426185717384"></p>
<p>就是以server开头的，比如server.port&#x3D;8081,8081就会赋给port</p>
<p>通过以上源码得知，这个自动配置类中也有很多组件，有tomcat组件，有jetty组件。单独看Tomcat，要配置Tomcat服务器，需要参照<code>ServerProperties</code>属性类，打开源码看看：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1731134070889-7a8b5378-c3bf-4b3f-8fb4-0b70a37e4938.png"></p>
<p>因此配置Tomcat服务器需要在<code>application.properties</code>文件中使用这样的前缀配置：<code>server.</code></p>
<h3 id="总结自动配置原理"><a href="#总结自动配置原理" class="headerlink" title="总结自动配置原理"></a>总结自动配置原理</h3><ol>
<li>运行环境准备阶段<ol>
<li>引入web启动器</li>
<li>最终传递引入了自动配置的jar包</li>
<li>自动配置的jar包中有152个自动配置类，到此运行环境准备完毕。</li>
</ol>
</li>
<li>运行阶段<ol>
<li>@EnableAutoConfiguration 启用自动配置，将152个自动配置类全部加载到IoC容器中，然后根据开发场景筛选出必须的自动配置类。</li>
<li>自动配置类加载了一堆组件。</li>
<li>每个组件需要的数据来自属性类。</li>
<li>属性类又和配置文件绑定在一起。</li>
</ol>
</li>
<li>因此，最终一句话：导入启动器，修改配置文件，就可以完成对应功能的开发。</li>
</ol>
<h1 id="第5章-Spring-Boot的web开发"><a href="#第5章-Spring-Boot的web开发" class="headerlink" title="第5章 Spring Boot的web开发"></a>第5章 Spring Boot的web开发</h1><h2 id="SpringBoot的web自动配置"><a href="#SpringBoot的web自动配置" class="headerlink" title="SpringBoot的web自动配置"></a>SpringBoot的web自动配置</h2><p>http请求协议：browser—&gt;Server，http相应协议Server—&gt;browser</p>
<p>新建项目<code>sb3-09-web</code>：添加web启动器，添加Lombok依赖。</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1729842528256-345582ac-9fbe-464f-9d1a-3ee7800bea8a.png"></p>
<h3 id="web自动配置的依赖是如何传递的（这一部分视频没讲解，随便看看）"><a href="#web自动配置的依赖是如何传递的（这一部分视频没讲解，随便看看）" class="headerlink" title="web自动配置的依赖是如何传递的（这一部分视频没讲解，随便看看）"></a>web自动配置的依赖是如何传递的（这一部分视频没讲解，随便看看）</h3><ol>
<li>首先引入了<code>web启动器</code>，如下：</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><code>web启动器</code>传递引入了<code>spring-boot-starter</code>，如下：</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1745860695540-1.png"></p>
<ol start="3">
<li><code>spring-boot-starter</code>会传递引入一个<code>spring-boot-autoconfigure</code>包，如下：</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-autoconfigure<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1729843303324-6c665ade-1fc3-465c-b11b-0ac167c5bd4c.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1745860695540-1.png"></p>
<ol start="4">
<li>在<code>spring-boot-autoconfigure</code>包中的<code>.imports</code>文件中罗列的需要导入的自动配置类，如下图：</li>
</ol>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1729843518728-be8a441f-d6cc-4781-8f0e-a3c67a05b697.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1745860695540-1.png"></p>
<h4 id="web自动配置的实现原理"><a href="#web自动配置的实现原理" class="headerlink" title="web自动配置的实现原理"></a>web自动配置的实现原理</h4><ol>
<li>从入口程序开始：</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.sb309web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Sb309WebApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Sb309WebApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1745860695540-1.png"></p>
<p>入口程序被<code>@SpringBootApplication</code>注解标注。</p>
<ol start="2">
<li><code>@SpringBootApplication</code>注解被<code>@EnableAutoConfiguration</code><font style="color:#080808;background-color:#ffffff;">注解标注。表示启用自动配置。</font></li>
<li><code>@EnableAutoConfiguration</code><font style="color:#080808;background-color:#ffffff;">注解被</font><code>@Import({AutoConfigurationImportSelector.class})</code><font style="color:#080808;background-color:#ffffff;">注解标注。</font></li>
<li><font style="color:#080808;background-color:#ffffff;">因此</font><code>AutoConfigurationImportSelector</code><font style="color:#080808;background-color:#ffffff;">决定哪些自动配置类是需要导入的。</font></li>
<li><code>&lt;font style=&quot;color:#080808;background-color:#ffffff;&quot;&gt;AutoConfigurationImportSelector&lt;/font&gt;</code><font style="color:#080808;background-color:#ffffff;">底层实现步骤具体如下：</font></li>
</ol>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1729845866175-609a5c89-9342-4d96-b624-fcc5a7dc2434.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1729845887890-372b80d6-2e7c-4d7e-8c5c-40cc3402da91.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1745860695540-1.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1729845909271-f6640224-ae46-4d74-bea2-ff00fa4e95d7.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1729845939380-9158c6fe-9ac2-43e3-8b4a-fb9b568eefd3.png"></p>
<p>最终找的文件是：<code>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code></p>
<p><strong>注意：任何jar包，包括第三方的依赖，自动配置类所在的路径以及文件名都是完全相同的，都是</strong><code>**META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports**</code></p>
<p>例如mybatis的自动配置类的列表文件也是这样，如下图：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1729846670846-84850d75-8a0f-418c-8c64-f48f00f3e738.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1745860695540-1.png"></p>
<h4 id="通过web自动配置类逆推web配置的prefix"><a href="#通过web自动配置类逆推web配置的prefix" class="headerlink" title="通过web自动配置类逆推web配置的prefix"></a>通过web自动配置类逆推web配置的prefix</h4><p>在自动配置列表中找到web自动配置相关的类：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1729846834747-246f3a88-f822-46bc-a00c-7770d52c5c26.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1745860695540-1.png"></p>
<p>以下就是web自动配置类列表：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.boot.autoconfigure.web.client.RestTemplateAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.embedded.EmbeddedWebServerFactoryCustomizerAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.DispatcherServletAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.ServletWebServerFactoryAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.MultipartAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration</span><br></pre></td></tr></table></figure>



<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1745860695540-1.png"></p>
<p>通过web自动配置类的源码可以逆推web配置的prefix：</p>
<ol>
<li>WebMvcAutoConfiguration</li>
</ol>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1729847170017-0f711f67-f266-4ac2-a25a-c239475b38fe.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1729847235858-7cab9d78-465f-4289-be9c-9b399570e8d3.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1729847268539-715a377a-ecb9-48fc-ad58-9194d23b7cdf.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1745860695540-1.png"></p>
<ol start="2">
<li>MultipartAutoConfiguration</li>
</ol>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1729847417032-2abad318-a48b-49a7-a2dc-26abd0f4d8e5.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1729847475254-4f486638-6132-40c0-baee-25c4c3091f49.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1745860695540-1.png"></p>
<ol start="3">
<li>HttpEncodingAutoConfiguration</li>
</ol>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1729847580938-8114e69c-ba29-4305-ba80-3b0d277be2e1.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1729847644668-2d8aa37a-699d-4009-92c7-3c9a60efcb49.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1745860695540-1.png"></p>
<ol start="4">
<li>ErrorMvcAutoConfiguration</li>
<li>ServletWebServerFactoryAutoConfiguration</li>
<li>DispatcherServletAutoConfiguration</li>
<li>EmbeddedWebServerFactoryCustomizerAutoConfiguration</li>
<li>RestTemplateAutoConfiguration</li>
</ol>
<p>通过查看源码，得知，web开发时，在<code>application.properties</code>配置文件中可以配置的前缀是：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SpringMVC相关配置</span></span><br><span class="line"><span class="attr">spring.mvc.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># web开发通用配置</span></span><br><span class="line"><span class="attr">spring.web.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 文件上传配置</span></span><br><span class="line"><span class="attr">spring.servlet.multipart.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 服务器配置</span></span><br><span class="line"><span class="attr">server.</span></span><br></pre></td></tr></table></figure>

<h3 id="Web自动配置都默认配置了什么"><a href="#Web自动配置都默认配置了什么" class="headerlink" title="Web自动配置都默认配置了什么"></a>Web自动配置都默认配置了什么</h3><p>查看官方文档：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1731383415638-90d102e9-1fd0-4f31-9736-9e3bef3936d3.png"></p>
<p><strong>翻译如下：</strong></p>
<p>Spring Boot 为 Spring MVC 提供了自动配置，这在大多数应用程序中都能很好地工作。除了已经实现了 Spring MVC 的默认功能外，自动配置还提供了以下特性：</p>
<ul>
<li>包括 <code>ContentNegotiatingViewResolver</code> 和 <code>BeanNameViewResolver</code> 的 Bean。<ul>
<li><code>ContentNegotiatingViewResolver</code> 自动根据HTTP请求头中Accept字段来选择合适的视图技术渲染响应。</li>
<li><code>&lt;font style=&quot;color:rgb(44, 44, 54);&quot;&gt;BeanNameViewResolver&lt;/font&gt;</code><font style="color:rgb(44, 44, 54);"> 的作用是根据视图名称找到视图View对象。</font></li>
</ul>
</li>
<li>支持提供静态资源，包括对 WebJars的支持。<ul>
<li>静态资源路径默认已经配置好了。默认会去static目录下找。</li>
</ul>
</li>
<li>自动注册 <code>Converter</code>、<code>GenericConverter</code> 和 <code>Formatter</code> 的 Bean。<ul>
<li><code>Converter</code>：转换器，做类型转换的，例如表单提交了用户数据，将表单数据转换成User对象。</li>
<li><code>Formatter</code>：格式化器，做数据格式化的，例如将Java中的<code>日期类型对象</code>格式化为<code>特定格式的日期字符串</code>。或者将用户提交的日期字符串，转换为Java中的日期对象。</li>
</ul>
</li>
<li>支持 <code>HttpMessageConverters</code>。<ul>
<li>内置了很多的HTTP消息转换器。例如：<code>MappingJackson2HttpMessageConverter</code>可以将json转换成java对象，也可以将java对象转换为json字符串。</li>
</ul>
</li>
<li>自动注册 <code>MessageCodesResolver</code>。<ul>
<li>SpringBoot会自动注册一个默认的<code>消息代码解析器</code></li>
<li>帮助你在表单验证出错时生成一些特殊的代码。这些代码让你能够更精确地定位问题，并提供更友好的错误提示。</li>
</ul>
</li>
<li>静态 <code>index.html</code> 文件支持。<ul>
<li>Spring Boot 会自动处理位于项目静态资源目录下的 index.html 文件，使其成为应用程序的默认主页</li>
</ul>
</li>
<li>自动使用 <code>ConfigurableWebBindingInitializer</code> Bean。<ul>
<li>用它来指定默认使用哪个转换器，默认使用哪个格式化器。在这个类当中都已经配好了。</li>
</ul>
</li>
</ul>
<p>如果您不想使用自动配置并希望完全控制 Spring MVC，可以添加您自己的带有 <code>**&lt;font style=&quot;color:#DF2A3F;&quot;&gt;@EnableWebMvc&lt;/font&gt;**</code> 注解的 <code>@Configuration</code>。</p>
<p>如果您希望保留这些 Spring Boot MVC 定制化设置并进行更多的 MVC 定制化（如拦截器、格式化程序、视图控制器等其他功能），可以添加您自己的类型为 <code>WebMvcConfigurer</code> 的 <code>@Configuration</code> 类。<strong><font style="color:#DF2A3F;">但不能使用</font></strong><code>@EnableWebMvc</code><strong><font style="color:#DF2A3F;">注解</font></strong>。</p>
<h3 id="WebMvcAutoConfiguration原理"><a href="#WebMvcAutoConfiguration原理" class="headerlink" title="WebMvcAutoConfiguration原理"></a><font style="color:#080808;background-color:#ffffff;">WebMvcAutoConfiguration原理</font></h3><p>通过源码分析的方式，学习WebMvc的自动配置原理。</p>
<h4 id="WebMvc自动配置是否生效的条件"><a href="#WebMvc自动配置是否生效的条件" class="headerlink" title="WebMvc自动配置是否生效的条件"></a>WebMvc自动配置是否生效的条件</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AutoConfiguration(after = &#123; DispatcherServletAutoConfiguration.class, TaskExecutionAutoConfiguration.class,</span></span><br><span class="line"><span class="meta">		ValidationAutoConfiguration.class &#125;)</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(&#123; Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class &#125;)</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)</span></span><br><span class="line"><span class="meta">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)</span></span><br><span class="line"><span class="meta">@ImportRuntimeHints(WebResourcesRuntimeHints.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebMvcAutoConfiguration</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>@AutoConfiguration(after &#x3D; { DispatcherServletAutoConfiguration.class, TaskExecutionAutoConfiguration.class,ValidationAutoConfiguration.class })<ul>
<li><strong>WebMvcAutoConfiguration自动配置类</strong>加载顺序在以上自动配置类加载后加载。</li>
</ul>
</li>
<li>@ConditionalOnWebApplication(type &#x3D; Type.SERVLET)<ul>
<li><strong>WebMvcAutoConfiguration自动配置类</strong>只在servlet环境中生效。</li>
</ul>
</li>
<li>@ConditionalOnClass({ Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class })<ul>
<li>类路径中必须存在<code>Servlet.class``DispatcherServlet.class``WebMvcConfigurer.class</code>，<strong>WebMvcAutoConfiguration自动配置类才会生效。</strong></li>
</ul>
</li>
<li>@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)<ul>
<li>类路径中不存在<code>WebMvcConfigurationSupport.class</code>时<strong>WebMvcAutoConfiguration自动配置类才会生效。</strong></li>
<li>注意：当使用@EnableWebMvc注解后，类路径中就会注册一个WebMvcConfigurationSupport这样的bean。</li>
</ul>
</li>
<li>@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10) <strong>不重要</strong><ul>
<li>指定<strong>WebMvcAutoConfiguration自动配置类</strong>的加载顺序</li>
</ul>
</li>
<li>@ImportRuntimeHints(WebResourcesRuntimeHints.class) <strong>不重要</strong><ul>
<li>运行时引入<strong>WebResourcesRuntimeHints</strong>这个类，这个类的作用是给JVM或者其他组件提示信息的，提示一下系统应该如何处理类和资源。</li>
</ul>
</li>
</ul>
<p>总结来说，WebMvcAutoConfiguration类将在以下条件下生效：</p>
<ol>
<li>应用程序是一个Servlet类型的Web应用；</li>
<li>环境中有Servlet、DispatcherServlet和WebMvcConfigurer类；</li>
<li>容器中没有WebMvcConfigurationSupport的bean。</li>
</ol>
<p>如果这些条件都满足的话，那么这个自动配置类就会被激活，并进行相应的自动配置工作。</p>
<h4 id="WebMvc自动配置生效后引入了两个Filter-Bean"><a href="#WebMvc自动配置生效后引入了两个Filter-Bean" class="headerlink" title="WebMvc自动配置生效后引入了两个Filter Bean"></a>WebMvc自动配置生效后引入了两个Filter Bean</h4><h5 id="引入了HiddenHttpMethodFilter-Bean"><a href="#引入了HiddenHttpMethodFilter-Bean" class="headerlink" title="引入了HiddenHttpMethodFilter Bean"></a>引入了<font style="color:#080808;background-color:#ffffff;">HiddenHttpMethodFilter Bean</font></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(HiddenHttpMethodFilter.class)</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty(prefix = &quot;spring.mvc.hiddenmethod.filter&quot;, name = &quot;enabled&quot;)</span></span><br><span class="line"><span class="keyword">public</span> OrderedHiddenHttpMethodFilter <span class="title function_">hiddenHttpMethodFilter</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">OrderedHiddenHttpMethodFilter</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这个过滤器是专门处理Rest请求的。GET POST PUT DELETE请求。</p>
<h5 id="引入了FormContentFilter-Bean"><a href="#引入了FormContentFilter-Bean" class="headerlink" title="引入了FormContentFilter Bean"></a>引入了<font style="color:#080808;background-color:#ffffff;">FormContentFilter Bean</font></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(FormContentFilter.class)</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty(prefix = &quot;spring.mvc.formcontent.filter&quot;, name = &quot;enabled&quot;, matchIfMissing = true)</span></span><br><span class="line"><span class="keyword">public</span> OrderedFormContentFilter <span class="title function_">formContentFilter</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">OrderedFormContentFilter</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>OrderedFormContentFilter 是 Spring Boot 中用于处理 HTTP 请求的一个过滤器，特别是针对 PUT 和 DELETE 请求。这个过滤器的主要作用是在处理 PUT 和 DELETE 请求时，确保如果请求体中有表单格式的数据，这些数据会被正确解析并可用。</p>
<p>比如get请求是在请求行上提交数据，post请求正常在请求体中提交数据，put和delete如果请求体当中有form表单数据提交</p>
<h4 id="WebMvc自动配置生效后引入了WebMvcConfigurer接口的实现类"><a href="#WebMvc自动配置生效后引入了WebMvcConfigurer接口的实现类" class="headerlink" title="WebMvc自动配置生效后引入了WebMvcConfigurer接口的实现类"></a>WebMvc自动配置生效后引入了WebMvcConfigurer接口的实现类</h4><p>在SpringBoot框架的<code>WebMvcAutoConfiguration</code>类中提供了一个内部类：<code>WebMvcAutoConfigurationAdapter</code></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730345630650-62e11666-3e95-4c64-9787-c0b18d083c91.png"></p>
<p>SpringBoot在这个类<code>WebMvcAutoConfigurationAdapter</code>中进行了一系列的Spring MVC相关配置。</p>
<p><strong><font style="color:#DF2A3F;">我们开发中要对Spring MVC的相关配置进行修改，可以编写一个类继承</font></strong><code>WebMvcAutoConfigurationAdatper</code><strong><font style="color:#DF2A3F;">，然后重写对应的方法即可。</font></strong></p>
<p><strong><font style="color:#DF2A3F;">因此，通过对</font></strong><code>WebMvcAutoConfigurationAdapter&lt;/font&gt;</code><strong><font style="color:#DF2A3F;">类中的方法进行重写来</font></strong><font style="color:#74B602;">修改</font><font style="color:#DF2A3F;"><strong>Web MVC的默认配置。</strong></font></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250430153936545.png" alt="image-20250430153936545"></p>
<h5 id="关于WebMvcConfigurer接口"><a href="#关于WebMvcConfigurer接口" class="headerlink" title="关于WebMvcConfigurer接口"></a>关于<code>WebMvcConfigurer</code>接口</h5><p>这个接口不是SpringBoot框架提供的，是Spring MVC提供的，在Spring框架4.3版本中引入的。这个接口的作用主要是<strong>允许开发者通过实现这个接口来定制Spring MVC的行为</strong>。</p>
<p>在这个接口中提供了很多方法，需要改变Spring MVC的哪个行为，则重写对应的方法即可，下面是这个接口中所有的方法，以及每个方法对应的Spring MVC行为的解释：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="comment">// 用于定制 Spring MVC 如何匹配请求路径到控制器</span></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">configurePathMatch</span><span class="params">(PathMatchConfigurer configurer)</span> &#123;&#125;</span><br><span class="line">    <span class="comment">// 用于定制 Spring MVC 的内容协商策略，以确定如何根据请求的内容类型来选择合适的处理方法或返回数据格式</span></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">configureContentNegotiation</span><span class="params">(ContentNegotiationConfigurer configurer)</span> &#123;&#125;</span><br><span class="line">    <span class="comment">// 用于定制 Spring MVC 处理异步请求的方式</span></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">configureAsyncSupport</span><span class="params">(AsyncSupportConfigurer configurer)</span> &#123;&#125;</span><br><span class="line">    <span class="comment">// 用于定制是否将某些静态资源请求转发WEB容器默认的Servlet处理</span></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">configureDefaultServletHandling</span><span class="params">(DefaultServletHandlerConfigurer configurer)</span> &#123;&#125;</span><br><span class="line">    <span class="comment">// 用于定制 Spring MVC 解析视图的方式，以确定如何将控制器返回的视图名称转换为实际的视图资源。</span></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">configureViewResolvers</span><span class="params">(ViewResolverRegistry registry)</span> &#123;&#125;</span><br><span class="line">    <span class="comment">// 用于定制 Spring MVC 如何处理 HTTP 请求和响应的数据格式，包括 JSON、XML 等内容类型的转换</span></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">configureMessageConverters</span><span class="params">(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)</span> &#123;&#125;</span><br><span class="line">    <span class="comment">// 用于定制 Spring MVC 如何处理控制器方法中发生的异常，并提供相应的错误处理逻辑。</span></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">configureHandlerExceptionResolvers</span><span class="params">(List&lt;HandlerExceptionResolver&gt; resolvers)</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 用于定制 Spring MVC 如何处理数据的格式化和解析，例如日期、数值等类型的对象的输入和输出格式。</span></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">addFormatters</span><span class="params">(FormatterRegistry registry)</span> &#123;&#125;</span><br><span class="line">    <span class="comment">// 用于定制 Spring MVC 如何使用拦截器来处理请求和响应，包括在请求进入控制器之前和之后执行特定的操作。</span></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;&#125;</span><br><span class="line">    <span class="comment">// 用于定制 Spring MVC 如何处理静态资源（如 CSS、JavaScript、图片等文件）的请求。</span></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;&#125;</span><br><span class="line">    <span class="comment">// 用于定制 Spring MVC 如何处理跨域请求，确保应用程序可以正确地响应来自不同域名的 AJAX 请求或其他跨域请求。</span></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> &#123;&#125;</span><br><span class="line">    <span class="comment">// 用于快速定义简单的 URL 到视图的映射，而无需编写完整的控制器类和方法。</span></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> &#123;&#125;</span><br><span class="line">    <span class="comment">// 用于定制 Spring MVC 如何解析控制器方法中的参数，包括如何从请求中获取并转换参数值。</span></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">addArgumentResolvers</span><span class="params">(List&lt;HandlerMethodArgumentResolver&gt; resolvers)</span> &#123;&#125;</span><br><span class="line">    <span class="comment">// 用于定制 Spring MVC 如何处理控制器方法的返回值，包括如何将返回值转换为实际的 HTTP 响应。</span></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">addReturnValueHandlers</span><span class="params">(List&lt;HandlerMethodReturnValueHandler&gt; handlers)</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 用于定制 Spring MVC 如何处理 HTTP 请求和响应的数据格式，允许你添加或调整默认的消息转换器，以支持特定的数据格式。</span></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">extendMessageConverters</span><span class="params">(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)</span> &#123;&#125;</span><br><span class="line">    <span class="comment">// 用于定制 Spring MVC 如何处理控制器方法中抛出的异常，允许你添加额外的异常处理逻辑。</span></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">extendHandlerExceptionResolvers</span><span class="params">(List&lt;HandlerExceptionResolver&gt; resolvers)</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1746000464694-3.png"></p>
<h5 id="WebMvcConfigurer接口的实现类WebMvcAutoConfigurationAdapter"><a href="#WebMvcConfigurer接口的实现类WebMvcAutoConfigurationAdapter" class="headerlink" title="WebMvcConfigurer接口的实现类WebMvcAutoConfigurationAdapter"></a><code>WebMvcConfigurer</code>接口的实现类<code>WebMvcAutoConfigurationAdapter</code></h5><p><code>WebMvcAutoConfigurationAdapter</code>是Spring Boot框架提供的，实现了Spring MVC中的<code>WebMvcConfigurer</code>接口，对Spring MVC的所有行为进行了默认的配置。</p>
<p>如果想要改变这些默认配置，应该怎么办呢？看源码：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730353008999-076f3b3f-2a0b-4936-a9f2-5d6cfe88b346.png"></p>
<p>可以看到，该类上有一个注解<code>@EnableConfigurationProperties({ WebMvcProperties.class, WebProperties.class })</code>，该注解负责启用配置属性。会将配置文件<code>application.properties</code>或<code>application.yml</code>中的配置传递到该类中。因此可以通过<code>application.properties</code>或<code>application.yml</code>配置文件来改变Spring Boot对SpringMVC的默认配置。<code>WebMvcProperties</code>和<code>WebProperties</code>源码如下： </p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730354494823-2adf83a4-aa2a-4fed-a5df-66b156de15c5.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730354507221-6424a72a-0728-478b-92eb-e52d3d5a6f38.png"></p>
<p>通过以上源码得知要改变SpringBoot对SpringMVC的默认配置，需要在配置文件中使用以下前缀的配置：</p>
<ul>
<li>spring.mvc：<font style="color:rgb(44, 44, 54);">主要用于配置 Spring MVC 的相关行为，例如路径匹配、视图解析、静态资源处理等</font></li>
<li>spring.web：通常用于配置一些通用的 Web 层设置，如资源处理、安全性配置等。</li>
</ul>
<h3 id="自动配置中的静态资源处理"><a href="#自动配置中的静态资源处理" class="headerlink" title="自动配置中的静态资源处理"></a>自动配置中的静态资源处理</h3><p>web站点中的静态资源指的是：js、css、图片等。</p>
<h4 id="静态资源处理源码分析"><a href="#静态资源处理源码分析" class="headerlink" title="静态资源处理源码分析"></a>静态资源处理源码分析</h4><p>关于<strong>SpringBoot对静态资源处理的默认配置</strong>，查看<code>WebMvcAutoConfigurationAdapter</code>源码，核心源码如下：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730356581883-80169fed-c487-4b68-a1f2-70ef95d6c9a6.png"></p>
<p>对以上源码进行解释：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 检查 resourceProperties 中的 addMappings 属性是否为 false。如果为 false，则表示不启用默认的静态资源映射处理。</span></span><br><span class="line">    <span class="comment">// 在application.properties配置文件中进行`spring.web.resources.add-mappings=false`配置，可以将其设置为false。</span></span><br><span class="line">    <span class="comment">// 当然，如果没有配置的话，默认值是true。</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.resourceProperties.isAddMappings()) &#123;</span><br><span class="line">        logger.debug(<span class="string">&quot;Default resource handling disabled&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 配置 WebJars 的静态资源处理。</span></span><br><span class="line">    <span class="comment">// this.mvcProperties.getWebjarsPathPattern()的执行结果是：/webjars/**</span></span><br><span class="line">    <span class="comment">// 也就是说，如果请求路径是 http://localhost:8080/webjars/** ，则自动去类路径下的 /META-INF/resources/webjars/ 目录中找静态资源。</span></span><br><span class="line">    <span class="comment">// 如果要改变这个默认的配置，需要在application.properties文件中进行这样的配置：`spring.mvc.webjars-path-pattern=...`</span></span><br><span class="line">    addResourceHandler(registry, <span class="built_in">this</span>.mvcProperties.getWebjarsPathPattern(),</span><br><span class="line">            <span class="string">&quot;classpath:/META-INF/resources/webjars/&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 配置普通静态资源处理</span></span><br><span class="line">    <span class="comment">// this.mvcProperties.getStaticPathPattern()的执行结果是：/**</span></span><br><span class="line">    <span class="comment">// this.resourceProperties.getStaticLocations()的执行结果是：&#123; &quot;classpath:/META-INF/resources/&quot;,&quot;classpath:/resources/&quot;, &quot;classpath:/static/&quot;, &quot;classpath:/public/&quot; &#125;</span></span><br><span class="line">    <span class="comment">// 也就是说，如果请求路径是：http://localhost:8080/**，根据控制器方法优先原则，会先去找合适的控制器方法，如果没有合适的控制器方法，静态资源处理才会生效，则自动去类路径下的/META-INF/resources/、/resources/、/static/、/public/ 4个位置找。</span></span><br><span class="line">    <span class="comment">// 如果要改变这个默认的配置，需要在application.properties中进行如下的两个配置：</span></span><br><span class="line">    <span class="comment">// 配置URL：spring.mvc.static-path-pattern=...</span></span><br><span class="line">    <span class="comment">// 配置物理路径：spring.web.resources.static-locations=...,...,...,...</span></span><br><span class="line">    addResourceHandler(registry, <span class="built_in">this</span>.mvcProperties.getStaticPathPattern(), (registration) -&gt; &#123;</span><br><span class="line">        registration.addResourceLocations(<span class="built_in">this</span>.resourceProperties.getStaticLocations());</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.servletContext != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">ServletContextResource</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServletContextResource</span>(<span class="built_in">this</span>.servletContext, SERVLET_LOCATION);</span><br><span class="line">            registration.addResourceLocations(resource);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 让springboot的静态资源处理失效</span></span><br><span class="line"><span class="comment">#spring.web.resources.add-mappings=false</span></span><br><span class="line"><span class="comment">#spring.web.resources.add-mappings=true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 配置静态资源webjars的path pattern</span></span><br><span class="line"><span class="comment">#spring.mvc.webjars-path-pattern=/webjars/**</span></span><br><span class="line"><span class="attr">spring.mvc.webjars-path-pattern</span>=<span class="string">/wjs/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 配置普通静态资源的path pattern</span></span><br><span class="line"><span class="comment">#spring.mvc.static-path-pattern=/**</span></span><br><span class="line"><span class="comment">#spring.mvc.static-path-pattern=/static/**</span></span><br><span class="line"><span class="comment"># 配置普通静态资源文件存储位置</span></span><br><span class="line"><span class="comment">#spring.web.resources.static-locations=classpath:/META-INF/resources/,classpath:/resources/,classpath:/static/,classpath:/public/</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 配置普通静态资源的path pattern</span></span><br><span class="line"><span class="comment">#spring.mvc.static-path-pattern=/abc/**</span></span><br><span class="line"><span class="comment"># 配置普通静态资源文件存储位置</span></span><br><span class="line"><span class="comment">#spring.web.resources.static-locations=classpath:/static1/,classpath:/static2/</span></span><br></pre></td></tr></table></figure>

<h4 id="关于WebJars静态资源处理"><a href="#关于WebJars静态资源处理" class="headerlink" title="关于WebJars静态资源处理"></a>关于WebJars静态资源处理</h4><p>默认规则是：当请求路径是<code>/webjars/**</code>，则会去<code>classpath:/META-INF/resources/webjars/</code>找。前面的路径可以更改，后面的是固定的无法更改</p>
<p><strong>WebJars介绍</strong></p>
<p><font style="color:rgb(44, 44, 54);">WebJars 是一种将常用的前端库（如 jQuery、Bootstrap、Font Awesome 等）打包成 JAR 文件的形式，方便在 Java 应用程序中使用。WebJars 提供了一种标准化的方式来管理前端库，使其更容易集成到 Java 项目中，并且可以利用 Maven 的依赖管理功能。</font></p>
<p><font style="color:rgb(44, 44, 54);"></font></p>
<p><strong><font style="color:rgb(44, 44, 54);">WebJars在SpringBoot中的使用</font></strong></p>
<p><font style="color:rgb(44, 44, 54);">WebJars官网：</font><a target="_blank" rel="noopener" href="https://www.webjars.org/">https://www.webjars.org/</a></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730364165294-a000b7b4-9fdb-4c40-99f5-c47f2f25ad9e.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1746088949741-11.png"></p>
<p>在官网上可以找到某个webjars的maven依赖，将依赖加入到SpringBoot项目中，例如我们添加vue的依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--webjars：将前端库打成jar包，方便在java项目中引入，也可以使用maven进行依赖管理。--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.webjars.npm<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>vue<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>如下图表示加入成功：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730364253405-dc6801f0-6122-49eb-9e77-36ef92668f5b.png"></p>
<p>在jar包列表中也可以看到：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730364333436-43d60b44-fb7b-454d-b586-f948930ea146.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1746088949741-11.png"></p>
<p>在SpringBoot中，对WebJars的默认访问规则是：当请求路径是<code>/webjars/**</code>，则会去<code>classpath:/META-INF/resources/webjars/</code>找。</p>
<p>因此我们要想访问上图的<code>index.js</code>，则应该发送这样的请求路径：<code>http://localhost:8080/webjars/vue/3.5.12/index.js</code></p>
<p>启动服务器，打开浏览器，访问，测试结果如下：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730364535656-fd9fb574-ce9d-4278-96a4-7d71207e1446.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1746088949741-11.png"></p>
<p>和IDEA中的文件对比一下，完全一样则表示测试成功：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730364567084-7ac48323-e220-4e10-a4b6-dc5a30ab6955.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1746088949741-11.png"></p>
<h4 id="关于普通静态资源处理"><a href="#关于普通静态资源处理" class="headerlink" title="关于普通静态资源处理"></a>关于普通静态资源处理</h4><p>SpringBoot对普通静态资源处理的规则是：</p>
<p>当请求路径是<a href="http://localhost:8080/**">http://localhost:8080/**</a>，根据控制器方法优先原则，会先去找合适的控制器方法，如果没有合适的控制器方法，静态资源处理才会生效，则自动去类路径下的以下4个位置查找：</p>
<ul>
<li>classpath:&#x2F;META-INF&#x2F;resources&#x2F;</li>
<li>classpath:&#x2F;resources&#x2F;</li>
<li>classpath:&#x2F;static&#x2F;</li>
<li>classpath:&#x2F;public&#x2F;</li>
</ul>
<p>我们可以在项目中分别创建以上4个目录，在4个目录当中放入静态资源，例如4张图片：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250502145100506.png" alt="image-20250502145100506"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250502145102928.png" alt="image-20250502145102928"></p>
<p>然后启动服务器，打开浏览器，访问，测试是否可以正常访问图片：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730365066712-a89265e6-eb88-4306-b95b-bc85d2e72f9d.png"></p>
<h4 id="关于静态资源缓存处理"><a href="#关于静态资源缓存处理" class="headerlink" title="关于静态资源缓存处理"></a>关于静态资源缓存处理</h4><p>不管是webjars的静态资源还是普通静态资源，统一都会执行以下这个方法，这个方法最后几行代码就是关于静态资源的缓存处理方式。</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730362324912-ff074309-5a29-4ee9-84df-804311a07314.png"></p>
<p><strong>什么是静态资源缓存，谁缓存，有什么用？</strong></p>
<p>静态资源缓存指的是浏览器的缓存行为，浏览器可以将静态资源（js、css、图片、声音、视频）缓存到浏览器中，只要下一次用户访问同样的静态资源直接从缓存中取，不再从服务器中获取，可以降低服务器的压力，提高用户的体验。而这个缓存策略可以在服务器端程序中进行设置，SpringBoot对静态资源缓存的默认策略就是以下这三行代码：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730365697951-98a6687d-dc95-49fe-bf63-6afac28ac62b.png"></p>
<p>以上三行代码的解释如下：</p>
<ul>
<li>registration.setCachePeriod(getSeconds(this.resourceProperties.getCache().getPeriod()));<ul>
<li>设置缓存的过期时间（如果没有指定单位，默认单位是秒）</li>
<li>浏览器会<strong>根据响应头中的缓存控制信息</strong>决定是否从本地缓存中加载资源，而不是每次都从服务器重新请求。这有助于减少网络流量和提高页面加载速度。</li>
<li>假设你配置了静态资源缓存过期时间为 1 小时（3600 秒），那么浏览器在首次请求某个静态资源后，会在接下来的一小时内从本地缓存加载该资源，而不是重新请求服务器。</li>
<li>可以通过<code>application.properties</code>的来修改默认的过期时间，例如：<code>spring.web.resources.cache.period=3600</code><font style="color:rgb(51, 51, 51);">或者</font><code>spring.web.resources.cache.period=1h</code></li>
</ul>
</li>
<li>registration.setCacheControl(this.resourceProperties.getCache().getCachecontrol().toHttpCacheControl());<ul>
<li>设置静态资源的 Cache-Control HTTP 响应头，告诉浏览器如何去缓存这些资源。</li>
<li><code>Cache-Control</code><font style="color:rgb(44, 44, 54);"> HTTP 响应头   是HTTP响应协议的一部分内容。如下图响应协议的响应头信息中即可看到</font><code>Cache-Control</code><font style="color:rgb(44, 44, 54);">的字样：</font></li>
</ul>
</li>
</ul>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730367060571-fb49d8ba-39d5-4a04-9c6b-cbce0add9283.png"></p>
<pre><code>常见的 Cache-Control 指令包括：
    * max-age=&lt;seconds&gt;：表示响应在多少秒内有效。
    * public：表示响应可以被任何缓存机制（如代理服务器）缓存。
    * private：表示响应只能被用户的浏览器缓存
    * no-cache：表示在使用缓存的资源之前必须重新发送一次请求进行验证。
    * no-store：表示不缓存任何响应的资源。
- 例如：max-age=3600, public：表示响应在 3600 秒内有效，并且可以被任何缓存机制缓存。
- 可以通过`spring.web.resources.cache.cachecontrol.max-age=3600`以及`spring.web.resources.cache.cachecontrol.cache-public=true`进行重新配置。
</code></pre>
<ul>
<li>registration.setUseLastModified(this.resourceProperties.getCache().isUseLastModified());<ul>
<li>设置静态资源在响应时，是否在响应头中添加资源的最后一次修改时间。SpringBoot默认配置的是：在响应头中添加响应资源的最后一次修改时间。</li>
<li>浏览器发送请求时，会将缓存中的资源的最后修改时间和服务器端资源的最后一次修改时间进行比对，如果没有变化，仍然从缓存中获取。</li>
<li>可以通过<code>spring.web.resources.cache.use-last-modified=false</code>来进行重新配置。</li>
</ul>
</li>
</ul>
<h4 id="静态资源缓存测试"><a href="#静态资源缓存测试" class="headerlink" title="静态资源缓存测试"></a>静态资源缓存测试</h4><p>根据之前源码分析，得知<code>静态资源缓存</code>相关的配置应该使用<code>spring.web.resources.cache</code>：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730429586708-40337969-1725-4459-879b-2299ab2a4405.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730429704722-ad0a5409-038f-48f1-9986-809c24f82369.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1746172740747-15.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730429724705-e10888fe-f2aa-4b87-9581-e2641c3e30fd.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730429747795-51fcc7b3-9dc6-49e3-8cbf-647cfff03b09.png"></p>
<p>在<code>application.properties</code>文件中对缓存进行如下的配置：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 静态资源缓存设置</span></span><br><span class="line"><span class="comment"># 1. 缓存有效期</span></span><br><span class="line"><span class="comment">#spring.web.resources.cache.period=3600</span></span><br><span class="line"><span class="attr">spring.web.resources.cache.period</span>=<span class="string">100</span></span><br><span class="line"><span class="comment"># 2. 缓存控制（cachecontrol配置的话，period会被覆盖失效）</span></span><br><span class="line"><span class="attr">spring.web.resources.cache.cachecontrol.max-age</span>=<span class="string">20</span></span><br><span class="line"><span class="comment"># 3. 是否使用缓存的最后修改时间（默认是：使用）</span></span><br><span class="line"><span class="attr">spring.web.resources.cache.use-last-modified</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"># 4. 是否开启静态资源默认处理方式（默认是：开启）</span></span><br><span class="line"><span class="attr">spring.web.resources.add-mappings</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure>



<p>注意：<code>cachecontrol.max-age</code>配置的话，<code>period</code>会被覆盖。</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730430084806-2086f0b6-646a-4e6a-a39c-8fa8dba74be0-1746172755878-26.png"></p>
<p>启动服务器测试：看看是否在20秒内走缓存，20秒之后是不是就不走缓存了！！！</p>
<p>第一次访问：请求服务器</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250502160244349.png" alt="image-20250502160244349"></p>
<p>第二次访问：20秒内开启一个新的浏览器窗口，再次访问，发现走了缓存</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250502160251111.png" alt="image-20250502160251111"></p>
<p>第三次访问：20秒后开启一个新的浏览器窗口，再次访问，发现重新请求服务器</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250502160257426.png" alt="image-20250502160257426"></p>
<p>提示，为什么显示<code>304</code>，这是因为这个配置：<code>spring.web.resources.cache.use-last-modified=true</code>要去和最后一次修改作对比</p>
<h4 id="web应用的欢迎页面"><a href="#web应用的欢迎页面" class="headerlink" title="web应用的欢迎页面"></a>web应用的欢迎页面</h4><h5 id="欢迎页测试"><a href="#欢迎页测试" class="headerlink" title="欢迎页测试"></a>欢迎页测试</h5><p>先说结论：只要在静态资源路径下提供<code>index.html</code>，默认被当做欢迎页面。静态资源路径指的是之前的4个路径：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; &quot;classpath:/META-INF/resources/&quot;, &quot;classpath:/resources/&quot;, &quot;classpath:/static/&quot;, &quot;classpath:/public/&quot; &#125;</span><br></pre></td></tr></table></figure>

<p>测试一下，在<code>classpath:/static/</code>目录下新建<code>index.html</code>页面：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730422047114-993504b3-e8b2-4570-a789-53d1427bb0be.png"></p>
<p>启动服务器，测试结果如下：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730422096295-c5fedb9e-df71-4cac-9a24-f2d6da9b071f.png"></p>
<p>如果同时在4个静态资源路径下都提供<code>index.html</code>，哪个页面会被当做欢迎页呢？</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730422239619-ba967027-498c-4f90-a139-c1565c91328d.png"></p>
<p>启动服务器，测试结果如下：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730422275754-3b1e145f-f34b-4eac-ae6f-0187eb852282.png"></p>
<p>原因是什么呢？这是因为<code>classpath:/META-INF/resources/</code>是数组的首元素，因此先从这个路径下找欢迎页。</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730422431137-93db3613-613e-434b-b7b8-c9f1af68636c.png"></p>
<h5 id="欢迎页源码分析"><a href="#欢迎页源码分析" class="headerlink" title="欢迎页源码分析"></a>欢迎页源码分析</h5><p>在<code>WebMvcAutoConfiguration</code>类中有一个内部类<code>EnableWebMvcConfiguration</code>，这个类中有这样一段代码：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730424626175-06c18960-d1bc-4ea7-a9f2-84079dd105ca.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730424702185-b359161c-2221-4106-837c-1a6a4bb16683.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730424718260-3d97f911-f050-42a6-b2c3-78a739d39f2d.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730424745404-720c4fe8-118e-4133-9514-efab29e7e39e.png"></p>
<p>通过以上源码追踪，得出结论：只要请求路径是<code>/**</code>的，会依次去<code>{ &quot;classpath:/META-INF/resources/&quot;, &quot;classpath:/resources/&quot;, &quot;classpath:/static/&quot;, &quot;classpath:/public/&quot; }</code>这四个位置找<code>index.html</code>页面作为欢迎页。</p>
<h5 id="一个小小的疑惑"><a href="#一个小小的疑惑" class="headerlink" title="一个小小的疑惑"></a>一个小小的疑惑</h5><p>我们来看一下<code>WebMvcAutoConfiguration</code>的生效条件：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730424986145-0d76b7da-06c5-4942-a5f2-3e55f0249c89.png"></p>
<p>上图红框内表示，要求Spring容器中缺失<code>WebMvcConfigurationSupport</code>这个Bean，<code>WebMvcAutoConfiguration</code>才会生效。</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1746178039575-48.png"></p>
<p>但是我们来看一下<code>EnableWebMvcConfiguration</code>的继承结构：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730425120392-dda2febe-d932-452c-9599-6df5859a2062.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250502203407401.png" alt="image-20250502203407401"></p>
<p>很明显，<code>EnableWebMvcConfiguration</code>就是一个<code>WebMvcConfigurationSupport</code>这样的Bean。</p>
<p>那疑问就有了：既然容器中存在<code>WebMvcConfigurationSupport</code>这样的Bean，<code>WebMvcAutoConfiguration</code>为什么还会生效呢？</p>
<p>原因是因为：<code>EnableWebMvcConfiguration</code>是<code>WebMvcAutoConfiguration</code>类的内部类。在<code>WebMvcAutoConfiguration</code>进行加载的时候，<code>EnableWebMvcConfiguration</code>这个内部类还没有加载。因此这个时候在容器中还不存在<code>WebMvcConfigurationSupport</code>的Bean，所以<code>WebMvcAutoConfiguration</code>仍然会生效。</p>
<p><strong><font style="color:#DF2A3F;">以上所说的</font></strong><code>WebMvcAutoConfiguration</code><strong><font style="color:#DF2A3F;">类中的内部类</font></strong><code>EnableWebMvcConfiguration</code><strong><font style="color:#DF2A3F;">，是用来启用Web MVC默认配置的。</font></strong></p>
<p><strong><font style="color:#DF2A3F;">注意区分：WebMvcAutoConfiguration的两个内部类：</font></strong></p>
<ul>
<li><code>WebMvcAutoConfigurationAdapter</code>作用是用来：修改配置的</li>
<li><code>EnableWebMvcConfiguration</code>作用是用来：启用配置的</li>
</ul>
<h5 id="favorite-icon（小图标）"><a href="#favorite-icon（小图标）" class="headerlink" title="favorite icon（小图标）"></a>favorite icon（小图标）</h5><p>favicon（也称为“收藏夹图标”或“网站图标”）是大多数现代网页浏览器的默认行为之一。当用户访问一个网站时，浏览器通常会尝试从该网站的根目录下载名为 favicon.ico 的文件，并将其用作标签页的图标。</p>
<p>如果网站没有提供 favicon.ico 文件，浏览器可能会显示一个默认图标，或者根本不显示任何图标。为了确保良好的用户体验，网站开发者通常会在网站的根目录下放置一个 favicon.ico 文件。</p>
<p>与其他静态资源一样，Spring Boot 会在配置的静态内容位置检查是否存在 <code>favicon.ico</code>文件。如果存在这样的文件，它将自动作为应用程序的 favicon 使用。</p>
<p>以上官方说明的：将<code>favicon.ico</code>文件放到静态资源路径下即可。</p>
<p>web站点没有提供<code>favicon.ico</code>时：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730427725460-6c4062dc-df53-495c-8709-431dd38f2337.png"></p>
<p>我们在<a target="_blank" rel="noopener" href="https://www.iconfont.cn/">https://www.iconfont.cn/</a> （阿里巴巴提供的图标库）上随便找一个图标，然后将图片名字命名为<code>favicon.ico</code>，然后将其放到SpringBoot项目的静态资源路径下：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730427919469-60975be4-d0d3-43ba-8435-98d9da427282.png"></p>
<p>启动服务器测试：记住（ctrl + F5强行刷新一下，避免影响测试效果）</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730428251364-894a09fe-92fb-408c-89d0-42d8e27b222b.png"></p>
<h2 id="SpringBoot的web手动配置-静态资源处理"><a href="#SpringBoot的web手动配置-静态资源处理" class="headerlink" title="SpringBoot的web手动配置(静态资源处理)"></a>SpringBoot的web手动配置(静态资源处理)</h2><p>如果你对SpringBoot默认的静态资源处理方式不满意。可以通过两种方式来改变这些默认的配置：</p>
<ul>
<li><p>如果你对SpringBoot默认的静态资源处理方式不满意。可以通过两种方式来改变这些默认的配置：</p>
<ul>
<li>第一种：配置文件方式<ul>
<li>通过修改<code>application.properties</code>或<code>application.yml</code></li>
<li>添加<code>spring.mvc</code>和<code>spring.web</code>相关的配置。</li>
</ul>
</li>
</ul>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730431752471-f806b5a3-924c-4b84-9c13-6999dad0493b-1746261760607-7.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730431765824-5d3ec11d-aad5-44c8-a32e-dd255bec24ea-1746261760607-9.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730431775131-4bec5477-fd86-4ab2-afa1-4b1927b2aafc-1746261760607-11.png"></p>
<ul>
<li>第二种：编写代码方式<ul>
<li>SpringMVC框架为我们提供了<code>WebMvcConfigurer</code>接口，需要改变默认的行为，可以<code>编写一个类</code>实现<code>WebMvcConfigurer</code>接口，并<code>对应重写</code>接口中的方法即可改变默认的配置行为。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="配置文件方式"><a href="#配置文件方式" class="headerlink" title="配置文件方式"></a>配置文件方式</h3><p>要修改<code>访问静态资源URL的前缀</code>，这样配置：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 让springboot的静态资源处理失效,这个不影响META-INF</span></span><br><span class="line"><span class="comment">#spring.web.resources.add-mappings=true</span></span><br><span class="line"><span class="comment"># Spring MVC的相关配置</span></span><br><span class="line"><span class="comment"># 1. 设置webjars静态资源的请求路径的前缀</span></span><br><span class="line"><span class="attr">spring.mvc.webjars-path-pattern</span>=<span class="string">/wjs/**</span></span><br><span class="line"><span class="comment"># 2. 设置普通静态资源的请求路径的前缀(path-pattern)，也就是浏览器的链接</span></span><br><span class="line"><span class="attr">spring.mvc.static-path-pattern</span>=<span class="string">/abc/**</span></span><br></pre></td></tr></table></figure>

<p>要修改<code>静态资源的存放位置</code>，这样配置：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.web.resources.static-locations</span>=<span class="string">classpath:/static1/,classpath:/static2/</span></span><br></pre></td></tr></table></figure>

<p>进行以上配置之后：</p>
<ol>
<li>访问webjars的请求路径应该是这样的：<a href="http://localhost:8080/wjs/">http://localhost:8080/wjs/</a>….</li>
<li>访问普通静态资源的请求路径应该是这样的：<a href="http://localhost:8080/static/">http://localhost:8080/static/</a>….</li>
<li>普通静态资源的存放位置也应该放到<code>classpath:/static1/,classpath:/static2/</code>下面，其他位置无效。</li>
</ol>
<p><strong>访问webjars测试结果如下：</strong></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730433063487-fe214e35-a43c-4ad0-9760-742f6bfcdcf6.png"></p>
<p><strong>访问普通静态资源测试结果如下：</strong></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730433000967-37e76b55-5715-4387-a135-5daacd53a755.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250503164646779.png" alt="image-20250503164646779"></p>
<p>如果访问<code>dog2.jpg</code>，就无法访问了：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250503170828711.png" alt="image-20250503170828711"></p>
<p>但是，存储在<code>classpath:/META-INF/resources/</code>目录下的<code>dog1.jpg</code>仍然是可以访问的：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730433537233-e7fe1330-22d3-4b36-8c43-bbdc9a578f99.png"></p>
<p>因此，存储在<code>classpath:/META-INF/resources/</code>位置的静态资源会被默认加载，不受手动配置的影响。</p>
<h3 id="编写代码方式"><a href="#编写代码方式" class="headerlink" title="编写代码方式"></a>编写代码方式</h3><p>我们在前面提到过，想要定制Spring MVC的行为，也可以编写类实现Spring MVC框架提供的一个接口<code>WebMvcConfigurer</code>，想定制哪个行为就重写哪个方法即可。</p>
<p>编写的类只要纳入IoC容器的管理。因此有以下两种实现方式：</p>
<ul>
<li>第一种：编写类实现<code>WebMvcConfigurer</code>接口，重写对应的方法。</li>
<li>第二种：以组件的形式存在：编写一个方法，用<code>@Bean</code>注解标注。</li>
</ul>
<h4 id="第一种方式"><a href="#第一种方式" class="headerlink" title="第一种方式"></a>第一种方式</h4><p>编写配置类，对于<code>web</code>开发来说，配置类一般起名为：<code>WebConfig</code>。配置类一般存放到<code>config</code>包下，因此在SpringBoot主入口程序同级目录下新建<code>config</code>包，在<code>config</code>包下新建<code>WebConfig</code>类</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250504032848114.png" alt="image-20250504032848114"></p>
<p>重写使用快捷键ctrl+o然后搜addResourceHandlers</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里的这种配置：在springboot默认的自动配置基础之上进行扩展配置。也就是说springboot之前的配置仍然生效。</span></span><br><span class="line"><span class="comment">// 使用该注解标注，表示该类为配置类。</span></span><br><span class="line"><span class="comment">//@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 静态资源处理，需要重写的方法是：addResourceHandlers</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">// 使用注册器 registry 绑定path pattern以及真实的静态资源文件存储路径</span></span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/abc/**&quot;</span>) <span class="comment">// 配置路径访问模式</span></span><br><span class="line">                .addResourceLocations(<span class="string">&quot;classpath:/static1/&quot;</span>, <span class="string">&quot;classpath:/static2/&quot;</span>); <span class="comment">// 配置静态资源路径</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：将<code>application.properties</code>文件中之前的所有配置全部注释掉。让其恢复到最原始的默认配置。</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250504033257856.png" alt="image-20250504033257856"></p>
<p>启动服务器进行测试：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730444208880-ca582b52-a68f-4918-9ead-f342c5ebbf38.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730444226844-d1e40613-8c6c-43a5-95a1-1c0d34d101bb.png"></p>
<p>通过测试，我们的配置是生效的。</p>
<p>我们再来看看，默认的配置是否还生效？</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730444289901-3304e315-67e2-4d6c-93b8-0db5f48a24a7.png"></p>
<p>我们可以看到，Spring Boot对Spring MVC的默认自动配置是生效的。</p>
<p><strong><font style="color:#DF2A3F;">因此，以上的方式只是在Spring MVC默认行为之外扩展行为。</font></strong></p>
<p>如果你不想再继续使用SpringBoot提供的默认行为，可以使用<code>@EnableWebMvc</code>进行标注。例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加这个注解之后，表示不在使用springboot的提供的默认的自动配置。</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="comment">// 以下配置完全使用自己的，不在基于springboot的配置进行扩展。</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 静态资源处理，需要重写的方法是：addResourceHandlers</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">// 使用注册器 registry 绑定path pattern以及真实的静态资源文件存储路径</span></span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/abc/**&quot;</span>) <span class="comment">// 配置路径访问模式</span></span><br><span class="line">                .addResourceLocations(<span class="string">&quot;classpath:/static1/&quot;</span>, <span class="string">&quot;classpath:/static2/&quot;</span>); <span class="comment">// 配置静态资源路径</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试结果：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730444605358-87fe9bc0-edfb-4fff-9bc0-ae4a97b50042.png"></p>
<p>可以看到，默认配置已经不再生效。</p>
<p>再来看看，我们自己的配置是否仍然生效：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730444650423-57b49f40-b595-4c27-935e-1c6361f20ba4.png"></p>
<p>仍然生效。</p>
<h4 id="第二种方式"><a href="#第二种方式" class="headerlink" title="第二种方式"></a>第二种方式</h4><p>采用<code>@Bean</code>注解提供一个<code>WebMvcConfigurer</code>组件，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig2</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> WebMvcConfigurer <span class="title function_">aaa</span><span class="params">()</span>&#123;<span class="comment">//方法名随意</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">WebMvcConfigurer</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">                registry.addResourceHandler(<span class="string">&quot;/xyz/**&quot;</span>)</span><br><span class="line">                        .addResourceLocations(<span class="string">&quot;classpath:/static1/&quot;</span>, <span class="string">&quot;classpath:/static2/&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试结果如下：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730444971338-0aca22a6-ff00-4644-9e21-2d08765b62e4.png"></p>
<p>通过了测试，并且以上代码也是在原有配置基础上进行扩展。</p>
<p>如果要弃用默认配置，仍然使用	<code>@EnableWebMvc</code>注解进行标注。自行测试！</p>
<h4 id="其他配置也这样做即可"><a href="#其他配置也这样做即可" class="headerlink" title="其他配置也这样做即可"></a>其他配置也这样做即可</h4><p>以上对<code>静态资源处理</code>进行了手动配置，也可以做其他配置，例如拦截器：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line"><span class="comment">//@EnableWebMvc</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig2</span> &#123;</span><br><span class="line">    <span class="comment">//拦截器配置</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> WebMvcConfigurer <span class="title function_">bbb</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">WebMvcConfigurer</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">                registry.addInterceptor(<span class="keyword">new</span> <span class="title class_">HandlerInterceptor</span>() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;拦截器的preHandle&quot;</span>);</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;拦截器的postHandle&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;拦截器的afterCompletion&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>启动服务器，打开浏览器，发送请求<a href="http://localhost:8080/static/dog5.jpg">http://localhost:8080/static/dog5.jpg</a>，后台执行结果如下：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730445490551-7c8fbe3f-a792-4307-8c46-21a365e0b25d.png"></p>
<p>这说明拦截器生效。</p>
<h4 id="为什么只要容器中有WebMvcConfigurer组件即可呢"><a href="#为什么只要容器中有WebMvcConfigurer组件即可呢" class="headerlink" title="为什么只要容器中有WebMvcConfigurer组件即可呢"></a>为什么只要容器中有<code>WebMvcConfigurer</code>组件即可呢</h4><p>源码分析：</p>
<p><code>WebMvcAutoConfiguration</code>部分源码：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730446108216-7ff9fb75-c9dd-4ba3-8b59-23f6c78d0b1a.png"></p>
<p><code>WebMvcAutoConfiguration</code>类的内部类<code>EnableWebMvcConfiguration</code>，这个类继承了<code>DelegatingWebMvcConfiguration</code>（Delegating是委派的意思。）</p>
<p><code>DelegatingWebMvcConfiguration</code>中的<code>setConfigurers()</code>方法用来设置配置。而配置参数是一个List集合，这个List集合中存放的是<code>WebMvcConfigurer</code>接口的实例，并且可以看到这个方法上面使用了<code>@Autowired</code>进行了自动注入，这也就是说为什么只要是IoC容器中的组件就能生效的原因。</p>
<p>我们再次进入到<code>this.configurers.addWebMvcConfigurers(configurers);</code>方法中进一步查看源码：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730446847673-e2758f97-fcc9-4c72-bc9c-ea4463afe751.png"></p>
<p>对于<code>WebMvcConfigurerComposite</code>类的代码来说，它是一个非常典型的<code>**&lt;font style=&quot;color:#DF2A3F;&quot;&gt;组合模式&lt;/font&gt;**</code>。</p>
<p>组合模式的关键点：</p>
<ol>
<li>组合多个 WebMvcConfigurer 实例：WebMvcConfigurerComposite 通过 delegates 列表组合了多个 WebMvcConfigurer 实例。</li>
<li>统一接口：WebMvcConfigurerComposite 实现了 WebMvcConfigurer 接口，因此可以像一个单一的 WebMvcConfigurer 一样被使用。</li>
<li>代理调用：在实现 WebMvcConfigurer 接口的方法时，WebMvcConfigurerComposite 会遍历 delegates 列表，调用每个 WebMvcConfigurer 实例的相应方法。</li>
</ol>
<p>总结：WebMvcConfigurerComposite 主要采用了组合模式的思想，将多个 WebMvcConfigurer 实例组合在一起，形成一个整体。</p>
<p>注意：组合模式是GoF 23种设计模式中的结构型设计模式。</p>
<h2 id="web请求的路径匹配"><a href="#web请求的路径匹配" class="headerlink" title="web请求的路径匹配"></a>web请求的路径匹配</h2><p>我们在学习SpringMVC的时候，路径匹配规则中学习了<code>Ant</code>风格的路径匹配规则。大家可以翻看一下之前的Spring MVC视频。</p>
<p>在<code>Spring Boot3</code>中，对web请求的路径匹配提供了两种规则：</p>
<ul>
<li>第一种：AntPathMatcher（Ant风格）【<strong><font style="color:#DF2A3F;">较旧</font></strong>】</li>
<li>第二种：PathPatternParser（从Spring5.3中引入的。在SpringBoot2.4中引入的。）【<strong><font style="color:#DF2A3F;">较新：效率高</font></strong>】<ul>
<li><strong><font style="color:#DF2A3F;">效率比Ant高，一般新项目中使用</font></strong></li>
</ul>
</li>
</ul>
<p>SpringBoot3中默认使用的是<code>PathPatternParser</code>，不需要任何配置。如果要使用<code>AntPathMatcher</code>，就需要进行如下的配置：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.mvc.pathmatch.matching-strategy</span>=<span class="string">ant_path_matcher</span></span><br></pre></td></tr></table></figure>

<h3 id="AntPathMatcher"><a href="#AntPathMatcher" class="headerlink" title="AntPathMatcher"></a>AntPathMatcher</h3><p>Ant风格的路径匹配规则回顾：</p>
<p><strong><font style="color:#DF2A3F;">*</font></strong>	匹配任意长度的任意字符序列（不包括路径分隔符）。示例：&#x2F;foo&#x2F;*.html 匹配 &#x2F;foo&#x2F;bar.html 和 &#x2F;foo&#x2F;baz.html。</p>
<p><font style="color:#DF2A3F;">******</font>	匹配任意数量的目录层级。示例：&#x2F;foo&#x2F;** 匹配 &#x2F;foo&#x2F;bar、&#x2F;foo&#x2F;bar&#x2F;baz 和 &#x2F;foo&#x2F;bar&#x2F;baz&#x2F;qux。</p>
<p><strong><font style="color:#DF2A3F;">?</font></strong>	<strong>匹配</strong>任意单个字符**。示例：&#x2F;foo?bar 匹配 &#x2F;foobar 和 &#x2F;fooxbar。</p>
<p><strong><font style="color:#DF2A3F;">[]</font></strong>	匹配指定范围内的单个字符。示例：&#x2F;foo[a-z]bar 匹配 &#x2F;fooabar、&#x2F;foobbar 等。</p>
<p><strong><font style="color:#DF2A3F;">{}</font></strong>	路径变量，用于提取路径的一部分作为参数。示例：&#x2F;users&#x2F;{userId} 匹配 &#x2F;users&#x2F;123，提取 userId&#x3D;123。</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1746344666214-9.png"></p>
<p>如果在SpringBoot3中启用Ant风格，记得配置：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.mvc.pathmatch.matching-strategy</span>=<span class="string">ant_path_matcher</span></span><br></pre></td></tr></table></figure>

<p>如下代码：请分析以下路径匹配的是什么样的路径。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//+代表1-n个字符，如果去掉就是任意一个字符。</span></span><br><span class="line">    <span class="comment">//？一个字符</span></span><br><span class="line">    <span class="comment">//**任意层级</span></span><br><span class="line">    <span class="comment">//最后必须是.do结尾</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;path:[a-z]+&#125;/a?/**/*.do&quot;)</span></span><br><span class="line">    <span class="comment">//HttpServletRequest是请求对象，后面是拿到用户传进来的path</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testPath</span><span class="params">(HttpServletRequest request, <span class="meta">@PathVariable</span> String path)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">requsetURI</span> <span class="operator">=</span> request.getRequestURI();</span><br><span class="line">        <span class="keyword">return</span> requsetURI + <span class="string">&quot;path = &quot;</span> + path;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>启动服务器并测试路径：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730472107928-af151fcc-d9b2-439a-825e-660f87f2c952.png"></p>
<h3 id="PathPatternParser"><a href="#PathPatternParser" class="headerlink" title="PathPatternParser"></a>PathPatternParser</h3><p>项目中不做配置，或者按照以下方式配置，都是<code>PathPatternParser</code>：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.mvc.pathmatch.matching-strategy</span>=<span class="string">path_pattern_parser</span></span><br></pre></td></tr></table></figure>

<p><code>PathPatternParser</code>风格是兼容Ant风格的。只有一个地方<code>PathPatternParser</code>不支持，Ant支持。在Ant风格中，<code>**</code>可以出现在任意位置。在<code>PathPatternParser</code>中只允许<code>**</code>出现在路径的末尾。</p>
<p>可以测试一下，将配置文件中的Ant风格注释掉，采用<code>PathPatternParser</code>风格。然后控制器代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.springboot.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PathController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;path:[a-z]+&#125;/a?/**/*.do&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">path</span><span class="params">(HttpServletRequest request, <span class="meta">@PathVariable</span> String path)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> request.getRequestURI() + <span class="string">&quot;,&quot;</span> + path;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>启动服务器报错：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730472557923-8f34cf00-6454-465b-b5e8-562520bbf095.png"></p>
<p>提示你，如果在路径当中出现了<code>**</code>，需要将路径匹配规则替换为Ant风格。因此路径当中如果出现<code>**</code>，那么必须使用Ant风格。除此之外，<code>PathPatternParser</code>均可用。</p>
<p>我们再来测试一下，<code>**</code>放到末尾，对于<code>PathPatternParser</code>是否可用？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/&#123;path:[a-z]+&#125;/a?/*.do/**&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">path</span><span class="params">(HttpServletRequest request, <span class="meta">@PathVariable</span> String path)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> request.getRequestURI() + <span class="string">&quot;,&quot;</span> + path;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>启动服务器测试，可用：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730472772231-d18e628f-1b62-4757-9299-eaa604344ce6.png"></p>
<h3 id="路径匹配相关源码"><a href="#路径匹配相关源码" class="headerlink" title="路径匹配相关源码"></a>路径匹配相关源码</h3><p>底层选择路径匹配规则的源码是：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250505170404560.png" alt="image-20250505170404560"></p>
<h2 id="内容协商"><a href="#内容协商" class="headerlink" title="内容协商"></a>内容协商</h2><p>内容协商机制是Spring MVC框架提供的，接下来主要是学习在SpringBoot中是如何支持SpringMVC内容协商机制的。</p>
<h3 id="对内容协商的理解"><a href="#对内容协商的理解" class="headerlink" title="对内容协商的理解"></a>对内容协商的理解</h3><p>内容协商机制是指服务器根据客户端的请求来决定返回资源的最佳表示形式。</p>
<p>白话文描述：客户端要什么格式的数据，咱后端就应该返回什么格式的数据。</p>
<ul>
<li>客户端要JSON，咱就响应JSON。</li>
<li>客户端要XML，咱就响应XML。</li>
<li>客户端要YAML，咱就响应YAML。</li>
</ul>
<p>你可能会有疑问：客户端接收数据时统一采用一种格式，例如JSON，不就行了吗。哪那么多事儿呀！！！</p>
<p>但在实际的开发中，不是这样的，例如：</p>
<ul>
<li>遗留的老客户端系统，仍然处理的是XML格式的数据。</li>
<li>要求处理速度快的这种客户端系统，一般要求返回JSON格式的数据。</li>
<li>要求安全性高的客户端系统，一般要求返回XML格式的数据。</li>
</ul>
<p>因此，在现代的开发中，不同的客户端可能需要后端系统返回不同格式的数据。总之后端应该满足这种多样化的需求。</p>
<h3 id="实现内容协商的两种方式"><a href="#实现内容协商的两种方式" class="headerlink" title="实现内容协商的两种方式"></a>实现内容协商的两种方式</h3><p>通常通过HTTP请求头（如 Accept）或请求参数（如 format）来指定客户端偏好接收的内容类型（如JSON、XML等）。服务器会根据这些信息选择最合适的格式进行响应。</p>
<h4 id="通过HTTP请求头（如-Accept）"><a href="#通过HTTP请求头（如-Accept）" class="headerlink" title="通过HTTP请求头（如 Accept）"></a>通过HTTP请求头（如 Accept）</h4><p>SpringBoot框架中，在程序员不做任何配置的情况下，优先考虑的是这种方式。</p>
<p>服务器会根据客户端发送请求时提交的请求头中的”Accept: application&#x2F;json” 或 “Accept: application&#x2F;xml” 或 “Accept: text&#x2F;html”来决定响应什么格式的数据。</p>
<p>客户端发送请求给服务器的时候，如何设置请求头的<code>Accept</code>？有以下几种常见实现方式：</p>
<ul>
<li>写代码<ul>
<li>fetch API</li>
<li>ajax的XMLHttpRequest</li>
<li>axios库</li>
<li>jQuery库……</li>
</ul>
</li>
<li>用工具<ul>
<li>接口测试工具，例如：Postman、Apifox等。</li>
<li>命令行工具：curl</li>
</ul>
</li>
</ul>
<p>对于我们编写的以下Controller来说：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span> <span class="comment">// 相当于@Controller + @ResponseBody ，默认是将数据转换成json字符串进行响应。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/detail&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">detail</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userService.findUserById();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们使用了<code>@RestController</code>，也就是使用了<code>@ResponseBody</code>。因此默认支持的是返回JSON数据。怎么才能支持返回XML格式的数据呢？需要做以下两步：</p>
<p>第一步：引入一个依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.dataformat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-dataformat-xml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>第二步：在实体类上添加一个注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@JacksonXmlRootElement</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后是接口的实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    User <span class="title function_">findUserById</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">findUserById</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;jackson&quot;</span>, <span class="number">30</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>遇到问题：实际参数列表和形式参数列表长度不同、java: 无法将类xxx中的构造器xxx应用到给定类型| lombok相关</p>
<p>idea运行maven项目时，报错这个（如标题）<br>解决方案记录：<br>找到了之前的、能运行成功不报错的 maven项目。参考其pom.<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=xml%E6%96%87%E4%BB%B6&spm=1001.2101.3001.7020">xml文件</a>中lombok相关部分，将<code>&lt;path&gt;</code>标签下的<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=lombok&spm=1001.2101.3001.7020">lombok</a>加个版本号，就运行成功了：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">path</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.36<span class="tag">&lt;/<span class="name">version</span>&gt;</span>   // 添加了这行</span><br><span class="line"><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>接下来，我们使用<code>curl</code>命令行工具，来模拟发送请求，并在请求头中设置<code>Accept</code>：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250505173456946.png" alt="image-20250505173456946"></p>
<p>可以很清楚的看到，服务器根据不同的请求头返回了不同格式的数据。</p>
<ul>
<li><code>Accept: application/xml</code>则返回XML格式的数据</li>
<li><code>Accept: application/json</code>则返回JSON格式的数据</li>
</ul>
<h4 id="通过请求参数（如-format）"><a href="#通过请求参数（如-format）" class="headerlink" title="通过请求参数（如 format）"></a>通过请求参数（如 format<font style="color:rgb(44, 44, 54);">）</font></h4><p>接下来我们使用请求参数的方式，来测试一下服务器的响应，注意：默认的请求参数名为<code>format</code>。</p>
<p>我们仍然使用<code>curl</code>命令行工具进行测试：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250507032900090.png" alt="image-20250507032900090"></p>
<p>我们可以看到，并没有达到我们想要的效果，这是因为<code>SpringBoot优先考虑的不是通过请求参数format方式</code>。如何优先考虑使用<code>format</code>方式呢？做如下配置：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 采用format方式实现内容协商，如果没有配置这个选项，默认采用的是Accept字段方式实现内容协商。</span></span><br><span class="line"><span class="comment"># 注意format参数方式，参数名固定是 format</span></span><br><span class="line"><span class="attr">spring.mvc.contentnegotiation.favor-parameter</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure>

<p>再次测试：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250507194814197.png" alt="image-20250507194814197"></p>
<p>可以看到，现在SpringBoot已经优先考虑使用<code>请求参数format</code>方式了。</p>
<p>当然，请求参数的名字可以不使用<code>format</code>吗？支持定制化吗？答案是支持的，例如你希望请求参数的名字为<code>type</code>，可以做如下配置：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 内容协商时，设置请求参数的名字，默认为format</span></span><br><span class="line"><span class="attr">spring.mvc.contentnegotiation.parameter-name</span>=<span class="string">type</span></span><br></pre></td></tr></table></figure>

<p>再次使用<code>curl</code>工具进行测试：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730517197351-b400c853-b45b-474b-9380-53d4d901d697.png"></p>
<h3 id="HttpMessageConverter接口"><a href="#HttpMessageConverter接口" class="headerlink" title="HttpMessageConverter接口"></a>HttpMessageConverter接口</h3><h4 id="HttpMessageConverter的理解"><a href="#HttpMessageConverter的理解" class="headerlink" title="HttpMessageConverter的理解"></a>HttpMessageConverter的理解</h4><p><code>HttpMessageConverter</code>接口被翻译为：<code>Http消息转换器</code>。它起到转换<code>Http消息</code>的作用。</p>
<p>什么是<code>Http消息</code>？所谓的<code>Http消息</code>本质上就是浏览器向服务器发送请求时提交的数据，或者服务器向浏览器响应的数据。</p>
<p>而<code>HttpMessageConverter</code>接口就是负责完成<code>请求/响应</code>时的数据格式转换的。</p>
<p>在Spring MVC中提供了很多<code>HttpMessageConverter</code>接口的实现类，不同的<code>Http消息转换器</code>具有不同的转换效果，有的负责将Java对象转换为JSON格式的字符串，有的负责将Java对象转换成XML格式的字符串。</p>
<h4 id="常见的HttpMessageConverter"><a href="#常见的HttpMessageConverter" class="headerlink" title="常见的HttpMessageConverter"></a>常见的HttpMessageConverter</h4><p>内置的常见的<code>HttpMessageConverter</code>的实现类包括：</p>
<ul>
<li><font style="color:#DF2A3F;">【请求】提交的表单（form）数据转换成Java对象的主要任务是由 FormHttpMessageConverter 消息转换器完成的</font></li>
<li><font style="color:#DF2A3F;">【请求】提交的JSON数据转换成Java对象的主要任务是由 MappingJackson2HttpMessageConverter 消息转换器完成的。（我们通常使用的</font><code>&lt;font style=&quot;color:#DF2A3F;&quot;&gt;@RequestBody&lt;/font&gt;</code><font style="color:#DF2A3F;">注解）</font></li>
<li>【响应】将Java对象转换成JSON格式的数据，并将其写入HTTP响应体的任务是由 MappingJackson2HttpMessageConverter 消息转换器完成。（我们通常使用的<code>@ResponseBody</code>注解)</li>
<li>【响应】将Java对象转换成XML格式的数据，并将其写入HTTP响应体的任务通常由 Jaxb2RootElementHttpMessageConverter 消息转换器完成。</li>
<li>【响应】将 String 直接写入到响应体的任务是由 StringHttpMessageConverter 消息转换器完成。</li>
<li>……</li>
</ul>
<h4 id="请求时通过哪些条件确定使用哪个转换器"><a href="#请求时通过哪些条件确定使用哪个转换器" class="headerlink" title="请求时通过哪些条件确定使用哪个转换器"></a>请求时通过哪些条件确定使用哪个转换器</h4><p>请求时通常根据以下条件来确定使用哪个消息转换器：</p>
<ol>
<li>请求的 Content-Type 字段：</li>
</ol>
<p>Spring MVC 会检查请求的 Content-Type 字段，以确定请求体的数据格式（例如 application&#x2F;json、application&#x2F;x-www-form-urlencoded、application&#x2F;xml 等）。</p>
<ol start="2">
<li>方法参数类型：</li>
</ol>
<p>控制器方法中接收请求体的参数类型（例如 @RequestBody）。</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250515190721635.png" alt="image-20250515190721635"></p>
<h4 id="响应时通过哪些条件确定使用哪个转换器"><a href="#响应时通过哪些条件确定使用哪个转换器" class="headerlink" title="响应时通过哪些条件确定使用哪个转换器"></a>响应时通过哪些条件确定使用哪个转换器</h4><p>响应时通常根据以下条件来确定使用哪个消息转换器：</p>
<ol>
<li>请求提交时，请求头上的Accept字段 ：</li>
</ol>
<p>Spring MVC 会检查客户端请求的 Accept 字段，以确定客户端期望的响应格式（例如 application&#x2F;json、application&#x2F;xml 等）。</p>
<ol start="2">
<li>方法返回值类型：</li>
</ol>
<p>控制器方法的返回值类型（例如 @ResponseBody）。</p>
<p>例如1：@ResponseBody + 控制器方法的返回值是String，例如public String name(){}，则使用StringHttpMessageConverter转换器。（将字符串直接写入响应体）</p>
<p>例如2：@ResponseBody + 控制器方法的返回值是User，例如public User name(){}，则使用MappingJackson2HttpMessageConverter转换器。（将java对象转换成json格式的字符串写入到响应体）</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250515190726743.png" alt="image-20250515190726743"></p>
<h4 id="系统默认提供了哪些HttpMessageConverter"><a href="#系统默认提供了哪些HttpMessageConverter" class="headerlink" title="系统默认提供了哪些HttpMessageConverter"></a>系统默认提供了哪些HttpMessageConverter</h4><p>查看源码：</p>
<p>WebMvcAutoConfiguration.EnableWebMvcConfiguration extends DelegatingWebMvcConfiguration extends WebMvcConfigurationSupport</p>
<p><code>WebMvcAutoConfiguration</code>内部类<code>EnableWebMvcConfiguration</code></p>
<p><code>EnableWebMvcConfiguration</code>继承了<code>DelegatingWebMvcConfiguration</code></p>
<p><code>DelegatingWebMvcConfiguration</code>继承了<code>WebMvcConfigurationSupport</code></p>
<p>在<code>WebMvcConfigurationSupport</code>类中有这样一个方法：<code>addDefaultHttpMessageConverters()</code> 用来添加默认的<code>HttpMessageConverter</code>对象。</p>
<p>通过断点调试，可以发现默认支持6个HttpMessageConverter，如下：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730774897755-ad87ddc8-4700-40e4-baee-a28d94000e7a.png"></p>
<p>这6个<code>HttpMessageConverter</code>作用如下：</p>
<ol>
<li><strong>ByteArrayHttpMessageConverter:</strong></li>
</ol>
<p>用于将字节数组(byte[])与HTTP消息体之间进行转换。这通常用于处理二进制数据，如图片或文件。</p>
<ol start="2">
<li><strong>StringHttpMessageConverter:</strong></li>
</ol>
<p>用于将字符串(String)与HTTP消息体之间进行转换。它支持多种字符集编码，能够处理纯文本内容。</p>
<ol start="3">
<li><strong>ResourceHttpMessageConverter:</strong></li>
</ol>
<p>用于将Spring的Resource对象与HTTP消息体之间进行转换。Resource是Spring中表示资源的接口，可以读取文件等资源。这个转换器对于下载文件或发送静态资源有用。</p>
<ol start="4">
<li><strong>ResourceRegionHttpMessageConverter:</strong></li>
</ol>
<p>用于处理资源的部分内容（即“Range”请求），特别是当客户端请求大文件的一部分时。这对于实现视频流媒体等功能很有用。</p>
<ol start="5">
<li><strong>AllEncompassingFormHttpMessageConverter:</strong></li>
</ol>
<p>用于处理表单，是一个比较全面的form消息转换器。处理标准的application&#x2F;x-www-form-urlencoded格式的数据，以及包含文件上传的multipart&#x2F;form-data格式的数据。</p>
<ol start="6">
<li><strong>MappingJackson2HttpMessageConverter:</strong></li>
</ol>
<p>使用Jackson库来序列化和反序列化JSON数据。可以将Java对象转换为JSON格式的字符串，反之亦然。</p>
<p>另外，通过以下源码，也可以看到SpringBoot是根据类路径中是否存在某个类，而决定是否添加对应的消息转换器的：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730775823305-dfc2b0c5-6ca1-4e8f-902b-506e3d86246d.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730775878229-960b3144-1727-4467-899a-6bd16f6bc965.png"></p>
<p>因此，我们只要引入相关的依赖，让类路径存在某个类，则对应的消息转换器就会被加载。</p>
<h3 id="定义自己的HttpMessageConverter"><a href="#定义自己的HttpMessageConverter" class="headerlink" title="定义自己的HttpMessageConverter"></a>定义自己的HttpMessageConverter</h3><p>可以看到以上6个消息转换器中没有yaml相关的消息转换器，可见，如果要实现yaml格式的内容协商，yaml格式的消息转换器就需要我们自定义了。</p>
<h4 id="第一步：引入能够处理yaml格式的依赖"><a href="#第一步：引入能够处理yaml格式的依赖" class="headerlink" title="第一步：引入能够处理yaml格式的依赖"></a>第一步：引入能够处理yaml格式的依赖</h4><p>任何一个能够处理yaml格式数据的库都可以，这里选择使用<code>jackson</code>的库，因为它既可以处理json，xml，又可以处理yaml。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--这个依赖也是jackson家族提供的，可以将java对象转换成yaml格式的字符串。--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.dataformat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-dataformat-yaml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>编写测试程序，简单测试一下这个库的用法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这只是一个测试程序，测试jackson家族提供的将对象转换成yaml格式字符串的api</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestYAMLApi</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建yamlfactory对象，输出--- username: &quot;jackson&quot; age: 30，这三个横是yaml文档里单独的文档标记，意思是独立文档</span></span><br><span class="line">        <span class="comment">//YAMLFactory yamlFactory = new YAMLFactory();</span></span><br><span class="line">        <span class="comment">//去掉这三个横的方式：disable是使失效的意思，把 写文档开始头 的给禁用</span></span><br><span class="line">        <span class="type">YAMLFactory</span> <span class="variable">yamlFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">YAMLFactory</span>().disable(YAMLGenerator.Feature.WRITE_DOC_START_MARKER);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建 对象映射器 对象，把yaml传进去就是专门做的一个yaml一个转换</span></span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>(yamlFactory);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 准备一个java对象</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;jackson&quot;</span>, <span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将java对象转换成字符串</span></span><br><span class="line">        <span class="comment">// 到底转成什么格式取决于这个objectmapper传的工厂是什么</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> objectMapper.writeValueAsString(user);</span><br><span class="line">        System.out.println(str);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行结果如下：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250523171507850.png" alt="image-20250523171507850"></p>
<h4 id="第二步：新增一种媒体类型yaml"><a href="#第二步：新增一种媒体类型yaml" class="headerlink" title="第二步：新增一种媒体类型yaml"></a>第二步：新增一种媒体类型yaml</h4><p>默认支持xml和json两种媒体类型，并没有支持yaml，如果要支持yaml格式的，需要新增一个yaml媒体类型，在springboot的配置文件中进行如下配置：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新增一种媒体类型yaml</span></span><br><span class="line"><span class="comment"># 媒体类型的名字可以自定义。不一定叫做yaml。具体的媒体类型值也是可以修改的，不一定是 text/yaml</span></span><br><span class="line"><span class="comment"># 以下配置中媒体类型的名字是：yaml，媒体类型的值是：text/yaml</span></span><br><span class="line"><span class="comment">#在这里配置内容协商，后面的.yaml是类型，等号后面是媒体类型的名字，这个名字是随便写的，text是父媒体类型，yaml是子媒体类型</span></span><br><span class="line"><span class="comment"># http://localhost:8080?format=yaml</span></span><br><span class="line"><span class="attr">spring.mvc.contentnegotiation.media-types.yaml</span>=<span class="string">text/yaml</span></span><br></pre></td></tr></table></figure>

<p>注意，以上<code>types</code>后面的<code>yaml</code>是媒体类型的名字，名字随意，如果媒体类型起名为<code>xyz</code>，那么发送请求时的路径应该是这样的：<a href="http://localhost:8080/detail?format=xyz">http://localhost:8080/detail?format=xyz</a></p>
<h4 id="第三步：自定义HttpMessageConverter"><a href="#第三步：自定义HttpMessageConverter" class="headerlink" title="第三步：自定义HttpMessageConverter"></a>第三步：自定义HttpMessageConverter</h4><p>编写类<code>YamlHttpMessageConverter</code>继承<code>AbstractHttpMessageConverter</code>，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这是一个消息转换器，专门处理yaml格式数据的。</span></span><br><span class="line"><span class="comment">// 注意，所有的消息转换器必须实现 HttpMessageConverter接口，或者继承AbstractHttpMessageConverter抽象类。并实现/重写方法。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">YamlHttpMessageConverter</span> <span class="keyword">extends</span> <span class="title class_">AbstractHttpMessageConverter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//对象映射器，定义成属性，给下面的将java对象转换成yaml格式的字符串用，new yamlFactory返回的也是yamlFactory</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>(<span class="keyword">new</span> <span class="title class_">YAMLFactory</span>().disable(YAMLGenerator.Feature.WRITE_DOC_START_MARKER));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 非常重要的一步：要将媒体类型 text/yaml 和 消息转换器进行绑定。通过构造方法，前面写媒体主类型，后面写媒体子类型，在配置文件里，Charset.forName是指定字符集</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">YamlHttpMessageConverter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="keyword">new</span> <span class="title class_">MediaType</span>(<span class="string">&quot;text&quot;</span>, <span class="string">&quot;yaml&quot;</span>, Charset.forName(<span class="string">&quot;UTF-8&quot;</span>)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 这个方法用来指定此消息转换器只适合于哪些类型的对象。</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">boolean</span> <span class="title function_">supports</span><span class="params">(Class clazz)</span> &#123;</span><br><span class="line">        <span class="comment">// 表示只有User类型的对象才能够使用该消息转换器进行转换。</span></span><br><span class="line">        <span class="keyword">return</span> User.class.isAnnotationPresent(clazz);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 这个是将yaml格式的字符串转换成java对象</span></span><br><span class="line">    <span class="comment">// @RequestBody</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Object <span class="title function_">readInternal</span><span class="params">(Class clazz, HttpInputMessage inputMessage)</span> <span class="keyword">throws</span> IOException, HttpMessageNotReadableException &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将java对象转换成yaml格式的字符串</span></span><br><span class="line">    <span class="comment">// @ResponseBody</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">writeInternal</span><span class="params">(Object o, HttpOutputMessage outputMessage)</span> <span class="keyword">throws</span> IOException, HttpMessageNotWritableException &#123;</span><br><span class="line">        <span class="comment">// 要转换的话需要拿到一个ObjectMapper对象，就需要在上面创建一个对象映射器，通过这个去写</span></span><br><span class="line">        <span class="comment">// ObjectMapper对象，outputMessage.getBody()的执行结果是输出流，o是个java对象，传入这两个objectMapper就可以把这个对象转换成yaml格式的字符串</span></span><br><span class="line">        objectMapper.writeValue(outputMessage.getBody(), o);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="第四步：配置消息转换器"><a href="#第四步：配置消息转换器" class="headerlink" title="第四步：配置消息转换器"></a>第四步：配置消息转换器</h4><p>addefaultHttpjMessageConverters这个方法默认往整个容器当中添加httpmessage转换器，默认是加了六个转换器，现在往里面再配一个新的转换器，也就是配进去</p>
<p>重写<code>WebMvcConfigurer</code>接口的<code>configureMessageCongnverters</code>方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//配置的意思</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">webConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configureMessageConverters</span><span class="params">(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)</span> &#123;</span><br><span class="line">        <span class="comment">// 将新的消息转换器进行配置，上面方法前面的list集合是消息转换器的集合，去调用这个converters</span></span><br><span class="line">        converters.add(<span class="keyword">new</span> <span class="title class_">YamlHttpMessageConverter</span>());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="SpringBoot整合Thymeleaf"><a href="#SpringBoot整合Thymeleaf" class="headerlink" title="SpringBoot整合Thymeleaf"></a>SpringBoot整合Thymeleaf</h2><h3 id="传统web应用和前后端分离"><a href="#传统web应用和前后端分离" class="headerlink" title="传统web应用和前后端分离"></a>传统web应用和前后端分离</h3><p>如果你是做前后端分离的项目，这一章节的内容将用不上。</p>
<p>现代开发大部分应用都会采用前后端分离的方式进行开发，前端是一个独立的系统，后端也是一个独立的系统，后端系统只给前端系统提供数据（JSON数据），不需要后端解析模板页面，前端系统拿到后端提供的数据之后，前端负责填充数据即可。因此这一章节内容作为了解。</p>
<p>传统的WEB应用（非前后端分离）：浏览器页面上展示成什么效果，后端服务器说了算，这是传统web应用最大的特点。</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730789733440-1dc2d749-19c5-4363-b35d-bf6e6008265c.png"></p>
<p>前后端分离的应用：前端是一个独立的系统，后端也是一个独立的系统，后端系统不再负责页面的渲染，后端系统只负责给前端系统提供开放的API接口，后端系统只负责数据的收集，然后将数据以JSON&#x2F;XML等格式响应给前端系统。前端系统拿到接口返回的数据后，将数据填充到页面上。</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250526035425532.png" alt="image-20250526035425532"></p>
<p>前后端分离的好处：</p>
<ul>
<li>职责清晰：前端专注于用户界面和用户体验，后端专注于业务逻辑和数据处理。</li>
<li>开发效率高：前后端可以并行开发，互不影响，提高开发速度。</li>
<li>可维护性强：代码结构更清晰，便于维护和扩展。</li>
<li>技术栈灵活：前后端可以独立选择最适合的技术栈。</li>
<li>响应式设计：前端可以更好地处理不同设备和屏幕尺寸。</li>
<li>性能优化：前后端可以独立优化，提升整体性能。</li>
<li>易于测试：前后端接口明确，便于单元测试和集成测试。</li>
</ul>
<h3 id="SpringBoot整合Thymeleaf-1"><a href="#SpringBoot整合Thymeleaf-1" class="headerlink" title="SpringBoot整合Thymeleaf"></a>SpringBoot整合Thymeleaf</h3><p>Java的模板技术有很多，SpringBoot支持以下的模板技术：</p>
<ol>
<li><strong>Thymeleaf</strong>：<ul>
<li><strong>特点</strong>：Thymeleaf 是一个现代的服务器端Java模板引擎，它支持HTML5，XML，TEXT，JAVASCRIPT，CSS等多种模板类型。它能够在浏览器中预览，这使得前端开发更加便捷。Thymeleaf 提供了一套强大的表达式语言，可以轻松地处理数据绑定、条件判断、循环等。</li>
<li><strong>优势</strong>：<strong><font style="color:#DF2A3F;">与Spring框架集成良好，也是SpringBoot官方推荐的</font></strong>。</li>
</ul>
</li>
<li><strong>FreeMarker</strong>：<ul>
<li><strong>特点</strong>：FreeMarker 是一个用Java编写的模板引擎，主要用来生成文本输出，如HTML网页、邮件、配置文件等。它不依赖于Servlet容器，可以在任何环境中运行。</li>
<li><strong>优势</strong>：模板语法丰富，灵活性高，支持宏和函数定义，非常适合需要大量定制化的项目。</li>
</ul>
</li>
<li><strong>Velocity</strong>：<ul>
<li><strong>特点</strong>：Velocity 是另一个强大的模板引擎，最初设计用于与Java一起工作，但也可以与其他技术结合使用。它提供了简洁的模板语言，易于学习和使用。</li>
<li><strong>优势</strong>：轻量级，性能优秀，特别适合需要快速生成静态内容的应用。</li>
</ul>
</li>
<li><strong>Mustache</strong>：<ul>
<li><strong>特点</strong>：Mustache 是一种逻辑无感知的模板语言，可以用于多种编程语言，包括Java。它的设计理念是让模板保持简单，避免模板中出现复杂的逻辑。</li>
<li><strong>优势</strong>：逻辑无感知，确保模板的简洁性和可维护性，易于与前后端开发人员协作。</li>
</ul>
</li>
<li><strong>Groovy Templates</strong>：<ul>
<li><strong>特点</strong>：Groovy 是一种基于JVM的动态语言，它可以作为模板引擎使用。Groovy Templates 提供了非常灵活的模板编写方式，可以直接嵌入Groovy代码。</li>
<li><strong>优势</strong>：对于熟悉Groovy语言的开发者来说，使用起来非常方便，可以快速实现复杂逻辑。</li>
</ul>
</li>
</ol>
<p>这些模板技术各有千秋，选择哪一种取决于项目的具体需求和个人偏好。Spring Boot 对这些模板引擎都提供了良好的支持，通常只需要在项目中添加相应的依赖，然后按照官方文档配置即可开始使用。</p>
<p><font style="color:#DF2A3F;">提醒：SpringBoot内嵌了Servlet容器（例如：Tomcat、Jetty等），使用SpringBoot不太适合使用JSP模板技术，因为SpringBoot项目最终打成jar包之后，放在jar包中的jsp文件不能被Servlet容器解析。</font></p>
<p>要在SpringBoot中整合Thymeleaf，按照以下步骤操作：</p>
<p>第一步：引入thymeleaf启动器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>第二步：编写配置文件，指定前缀和后缀（<strong><font style="color:#DF2A3F;">默认不配置就是以下配置</font></strong>）</p>
<p>这个是给视图解析器使用的，方法里会有个返回值用于返回逻辑视图名称，如果返回的是一个hello，这时后端的视图解析器就起作用，把下面的前缀加在hello的前面，后缀加后面，变成classpath:&#x2F;templates&#x2F;hello.html，但这个不是html文件而是thymeleaf模板文件，这个就成了物理视图名称。引入web启动器的时候会在resources下自动生成这个文件目录</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.thymeleaf.prefix</span>=<span class="string">classpath:/templates/</span></span><br><span class="line"><span class="attr">spring.thymeleaf.suffix</span>=<span class="string">.html</span></span><br></pre></td></tr></table></figure>

<p>第三步：编写控制器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.springboot.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不能使用 @RestController，这个是返回json，我们不能返回json，我们是跳页面</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/h&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">helloThymeleaf</span><span class="params">(<span class="meta">@RequestParam(&quot;name&quot;)</span> String name, Model model)</span> &#123;</span><br><span class="line">        <span class="comment">// 将接收到的name数据存储到域对象中</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;name&quot;</span>, name);</span><br><span class="line">        <span class="comment">// 逻辑视图名</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>; <span class="comment">// 最终的物理视图名：classpath:/templates/hello.html</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>第四步：编写thymeleaf模板页面</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>hello, thymeleaf<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello,<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;name&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>启动服务器，测试地址为：<a href="http://localhost:8080/hello?name=jackson">http://localhost:8080/hello?name=jackson</a></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250526231739354.png" alt="image-20250526231739354"></p>
<h3 id="Thymeleaf的自动配置"><a href="#Thymeleaf的自动配置" class="headerlink" title="Thymeleaf的自动配置"></a>Thymeleaf的自动配置</h3><p>Thymeleaf的自动配置类：<code>ThymeleafAutoConfiguration.java</code></p>
<p>@EnableConfigurationProperties这个注解可以把配置文件里的配置绑定到thymeleaf属性对象上，</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250526232140913.png" alt="image-20250526232140913"></p>
<p>我们通过查看上图中红框中的类，可以找到thymeleaf的相关配置：也就是以spring.thymeleaf前缀开头的配置信息绑定到属性类对象上</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250526232506026.png" alt="image-20250526232506026"></p>
<p>与thymeleaf相关的配置统一使用<code>spring.thymeleaf</code>即可。并且通过源码可以进一步了解到默认的前缀和后缀：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250526232938532.png" alt="image-20250526232938532"></p>
<p>也就是说，默认情况下，只要放在<code>classpath:/templates/</code>目录下的<code>xxx.html</code>会被自动当做为thymeleaf的模板文件被thymeleaf模板引擎解析。因此放在<code>classpath:/templates/</code>目录下的<code>html</code>文件不是静态页面，而是动态的thymeleaf模板页面。</p>
<p>自定义的话修改配置文件</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.thymeleaf.prefix</span>=<span class="string">classpath:/t/</span></span><br><span class="line"><span class="attr">spring.thymeleaf.suffix</span>=<span class="string">.thymeleaf</span></span><br></pre></td></tr></table></figure>

<p>然后创建对应的文件</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250526234327526.png" alt="image-20250526234327526"></p>
<p>这时之前的hello.html就失效了</p>
<h3 id="Thymeleaf核心语法"><a href="#Thymeleaf核心语法" class="headerlink" title="Thymeleaf核心语法"></a>Thymeleaf核心语法</h3><h4 id="th-text与th-utext-替换标签体内容"><a href="#th-text与th-utext-替换标签体内容" class="headerlink" title="th:text与th:utext 替换标签体内容"></a>th:text与th:utext 替换标签体内容</h4><p><code>th:text</code>与th:utext都是用来替换标签体内容的，例如：如果什么都不写的效果是</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello,<span class="tag">&lt;<span class="name">span</span> &gt;</span>这里是标签体<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250526234928844.png" alt="image-20250526234928844"></p>
<p>注意：在根标签<html>中引入 xmlns:th&#x3D;”<a target="_blank" rel="noopener" href="http://www.thymeleaf.org"/">http://www.thymeleaf.org&quot;</a>，在编写<code>th:</code>语法时有智能提示。</p>
<p>加上后就可以替换，运行效果为hello,jackson</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello,<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;name&#125;&quot;</span>&gt;</span>这里是标签体<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello,<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:utext</span>=<span class="string">&quot;$&#123;name&#125;&quot;</span>&gt;</span>这里是标签体<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试结果：<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250527001115509.png" alt="image-20250527001115509"></p>
<p>提示：标签体中的内容即使是一段HTML代码，也只是会被当做普通文本对待。例如我们让存储在域中的文本内容是一段HTML代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">(<span class="meta">@RequestParam(&quot;name&quot;)</span> String name, Model model)</span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;name&quot;</span>, name);</span><br><span class="line">        <span class="comment">// 向域对象当中绑定一段html代码</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;htmlCode&quot;</span>,<span class="string">&quot;&lt;a href=&#x27;http://www.bjpowernode.com&#x27;&gt;动力节点&lt;/a&gt;&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;htmlCode&#125;&quot;</span>&gt;</span>我是一个DIV<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试结果：<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250527000813168.png" alt="image-20250527000813168"></p>
<p><code>th:utext</code>会将内容当做一段HTML代码解析并替换。将以上测试代码修改为：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:utext</span>=<span class="string">&quot;$&#123;htmlCode&#125;&quot;</span>&gt;</span>我是一个DIV<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试结果：<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250527000930037.png" alt="image-20250527000930037"></p>
<h4 id="th-任意属性名-动态替换该属性的值"><a href="#th-任意属性名-动态替换该属性的值" class="headerlink" title="th:任意属性名 动态替换该属性的值"></a>th:任意属性名 动态替换该属性的值</h4><p>分开设置：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 向域对象当中绑定公司名和公司地址</span></span><br><span class="line">model.addAttribute(<span class="string">&quot;company&quot;</span>, <span class="string">&quot;动力节点&quot;</span>);</span><br><span class="line">model.addAttribute(<span class="string">&quot;companyUrl&quot;</span>, <span class="string">&quot;http://www.bjpowernode.com&quot;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;$&#123;companyUrl&#125;&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://www.baidu.com&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;company&#125;&quot;</span>&gt;</span>百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试结果：由<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250527002116948.png" alt="image-20250527002116948">变成了<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250527002133005.png" alt="image-20250527002133005"></p>
<p>也就是说th后面加了href就可以动态替换链接，加了text就可以替换文本</p>
<h4 id="th-attr-属性合并设置"><a href="#th-attr-属性合并设置" class="headerlink" title="th:attr 属性合并设置"></a>th:attr 属性合并设置</h4><p>分开设置：</p>
<p>合并设置：使用<code>th:attr</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 向域对象中存储一个样式</span></span><br><span class="line">model.addAttribute(<span class="string">&quot;style&quot;</span>, <span class="string">&quot;color:red&quot;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;$&#123;companyUrl&#125;&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://www.baidu.com&quot;</span> <span class="attr">th:style</span>=<span class="string">&quot;$&#123;style&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color:green&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;company&#125;&quot;</span>&gt;</span>百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--属性合并--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:attr</span>=<span class="string">&quot;href=$&#123;companyUrl&#125;,style=$&#123;style&#125;&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://www.baidu.com&quot;</span>  <span class="attr">style</span>=<span class="string">&quot;color:green&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;company&#125;&quot;</span>&gt;</span>百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试结果：<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250527003204961.png" alt="image-20250527003204961"></p>
<h4 id="th-指令"><a href="#th-指令" class="headerlink" title="th:指令"></a>th:指令</h4><p>指令非常多，具有代表性的例如：<code>th:if</code>，该指令用来控制元素<code>隐藏</code>和<code>显示</code>。true就是显示，flase就是不显示</p>
<p>在<code>static</code>静态资源目录下存放一张图片：dog1.jpg<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250527192830398.png" alt="image-20250527192830398"></p>
<p>然后编写这样的模板代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--默认会去static去找这个文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;dog1.jpg&quot;</span> <span class="attr">th:if</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试结果，图片是显示的：<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250527193044240.png" alt="image-20250527193044240"></p>
<p>如果<code>th:if</code>的值修改为<code>false</code>，我们会发现隐藏了。</p>
<p>也可以通过网址参数进行控制，在hellocontroller里添加代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">(<span class="meta">@RequestParam(&quot;name&quot;)</span> String name, Model model, <span class="meta">@RequestParam(&quot;flag&quot;)</span> Integer flag)</span>&#123;</span><br><span class="line">     <span class="comment">// 根据flag向域对象当中存储数据</span></span><br><span class="line">        <span class="comment">//可以通过</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="number">1</span> == flag)&#123;</span><br><span class="line">            model.addAttribute(<span class="string">&quot;display&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="number">0</span> == flag)&#123;</span><br><span class="line">            model.addAttribute(<span class="string">&quot;display&quot;</span>, <span class="string">&quot;false&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--修改代码--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;/dog1.jpg&quot;</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;display&#125;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>访问网址<a href="http://localhost:8080/hello?name=jackson&flag=1%E6%97%B6%E6%9C%89%E5%9B%BE%E7%89%87%EF%BC%8Cflag=0%E6%97%B6%E6%B2%A1%E6%9C%89%E5%9B%BE%E7%89%87">http://localhost:8080/hello?name=jackson&amp;flag=1时有图片，flag=0时没有图片</a></p>
<h4 id="表达式"><a href="#表达式" class="headerlink" title="@{} 表达式"></a>@{} 表达式</h4><p><code>${}</code>表达式语法是专门用来获取<code>model</code>中绑定的数据的。</p>
<p><code>@{}</code>表达式语法是专门用来维护URL请求路径的。它可以动态设置项目的根路径。</p>
<p>正常显示的web路径是<a href="http://localhost:8080/dog1.jpg%EF%BC%8C%E4%BD%86%E5%A6%82%E6%9E%9C%E5%B0%86web%E5%BA%94%E7%94%A8%E7%9A%84%E6%A0%B9%E8%B7%AF%E5%BE%84%E8%BF%9B%E8%A1%8C%E4%BA%86%E4%BF%AE%E6%94%B9%EF%BC%8C%E5%B0%86%E5%85%B6%E9%85%8D%E7%BD%AE%E4%B8%BA%EF%BC%9A%60/myweb%60">http://localhost:8080/dog1.jpg，但如果将web应用的根路径进行了修改，将其配置为：`/myweb`</a></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.servlet.context-path</span>=<span class="string">/myweb</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 向域对象当中绑定一个URL</span></span><br><span class="line">model.addAttribute(<span class="string">&quot;imgUrl&quot;</span>, <span class="string">&quot;/dog1.jpg&quot;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">读取然后替换到这里</span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">th:src</span>=<span class="string">&quot;$&#123;imgUrl&#125;&quot;</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;display&#125;&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>这时候访问图片就需要在<a href="http://localhost:8080/dog1.jpg%E9%87%8C%E5%8A%A0%E4%B8%8A/myweb%EF%BC%8C%E5%A6%82%E6%9E%9C%E9%9C%80%E8%A6%81@%7B%7D%E6%9D%A5%E8%BF%9B%E8%A1%8C%E7%BB%B4%E6%8A%A4%EF%BC%8C%E8%87%AA%E5%8A%A8%E6%B7%BB%E5%8A%A0%E8%BF%99%E4%BA%9B%EF%BC%8C%E4%BB%A3%E7%A0%81%E6%98%AF">http://localhost:8080/dog1.jpg里加上/myweb，如果需要@{}来进行维护，自动添加这些，代码是</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;$&#123;imgUrl&#125;&#125;&quot;</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;display&#125;&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="thymeleaf的内置工具"><a href="#thymeleaf的内置工具" class="headerlink" title="thymeleaf的内置工具"></a>thymeleaf的内置工具</h4><p>内置工具很多，可以参考官方文档：[<a target="_blank" rel="noopener" href="https://www.thymeleaf.org/doc/tutorials/3.1/usingthymeleaf.html#strings]">https://www.thymeleaf.org/doc/tutorials/3.1/usingthymeleaf.html#strings]</a>(</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250529014408038.png" alt="image-20250529014408038"></p>
<p>例如我们要完成这样一个效果，用户提交用户名时，如果名字中含有<code>jack</code>则显示<code>狗狗图片</code>，否则不显示。</p>
<p>模板代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;$&#123;imgUrl&#125;&#125;&quot;</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;#strings.contains(name,&#x27;jack&#x27;)&#125;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试结果1：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1730798493853-7e6e9545-f7dd-43b3-b157-7c853fb2da66.png"></p>
<p>测试结果2</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1730798509202-cb67e7fe-f8ab-487e-ba9e-470ab50dcfbf.png"></p>
<h4 id="thymeleaf也支持运算符"><a href="#thymeleaf也支持运算符" class="headerlink" title="thymeleaf也支持运算符"></a>thymeleaf也支持运算符</h4><p>例如<code>&gt;</code>运算符，我们实现这样一个功能，如果提供的用户名长度大于6，则显示狗狗图片：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--名字长度大于6就为true--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;name&#125;&quot;</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;#strings.length(name) &gt; 6&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试结果1：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1730798722013-6be35719-74db-4349-86d9-d5c8b99f0d5b.png"></p>
<p>另外thymeleaf也支持三目运算符：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 向域对象当中存储一个性别</span></span><br><span class="line">model.addAttribute(<span class="string">&quot;gender&quot;</span>, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<p>如果性别是true，则显示男，false，则显示女。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--传进来的如果是true就是男，否则是女--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;gender ? &#x27;男&#x27; : &#x27;女&#x27;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="thymeleaf的字符串拼接"><a href="#thymeleaf的字符串拼接" class="headerlink" title="thymeleaf的字符串拼接"></a>thymeleaf的字符串拼接</h4><p>加单引号就是字符串，不加就是一个对象</p>
<p>第一种方式：使用加号 <code>+</code>，然后访问<a href="http://localhost:8080/hello?name=jackson&flag=1">http://localhost:8080/hello?name=jackson&amp;flag=1</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--strings.toUpperCase(name)是变大写--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello,<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;&#x27;姓名：&#x27; + #strings.toUpperCase(name) + &#x27;。&#x27;&#125;&quot;</span>&gt;</span>这里是标签体<span class="tag">&lt;/<span class="name">span</span>&gt;</span> <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250529021028901.png" alt="image-20250529021028901"></p>
<p>第二种方式：使用竖线 <code>||</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello,<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;|姓名：$&#123;#strings.toUpperCase(name)&#125;。|&quot;</span>&gt;</span>这里是标签体<span class="tag">&lt;/<span class="name">span</span>&gt;</span> <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250529021241021.png" alt="image-20250529021241021"></p>
<h4 id="循环遍历"><a href="#循环遍历" class="headerlink" title="循环遍历"></a>循环遍历</h4><p>创建bean包，user类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line">   <span class="keyword">private</span> Integer age;</span><br><span class="line">   <span class="keyword">private</span> Boolean gender;</span><br><span class="line">   <span class="keyword">private</span> String desc;</span><br><span class="line">   <span class="keyword">private</span> String location;</span><br></pre></td></tr></table></figure>

<p>创建service包，Userservice类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    List&lt;User&gt; <span class="title function_">getAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>再创建impl，userserviceimpl</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 创建集合对象</span></span><br><span class="line">        List&lt;User&gt; users = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        users.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;jackson&quot;</span>, <span class="number">20</span>, <span class="literal">true</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;BEIJING&quot;</span>));</span><br><span class="line">        users.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;lucy&quot;</span>, <span class="number">21</span>, <span class="literal">false</span>, <span class="string">&quot;my name is lucy&quot;</span>, <span class="string">&quot;TIANJIN&quot;</span>));</span><br><span class="line">        users.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;tom&quot;</span>, <span class="number">22</span>, <span class="literal">false</span>, <span class="string">&quot;my name is tom&quot;</span>, <span class="string">&quot;SHANGHAI&quot;</span>));</span><br><span class="line">        users.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;smith&quot;</span>, <span class="number">23</span>, <span class="literal">true</span>, <span class="string">&quot;my name is smith&quot;</span>, <span class="string">&quot;SHENZHEN&quot;</span>));</span><br><span class="line">        users.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;ford&quot;</span>, <span class="number">24</span>, <span class="literal">true</span>, <span class="string">&quot;my name is ford&quot;</span>, <span class="string">&quot;WUHAN&quot;</span>));</span><br><span class="line">        users.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;king&quot;</span>, <span class="number">24</span>, <span class="literal">true</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> users;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>再在controller包下新建UserController</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">list</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">        <span class="comment">// 获取数据</span></span><br><span class="line">        List&lt;User&gt; users = userService.getAll();</span><br><span class="line">        <span class="comment">// 绑定到域对象中</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;user&quot;</span>, users);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;List&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后由ai生成了js和css样式，这里就不再复制</p>
<p>在templates里新建一个list.html</p>
<p>说明：</p>
<ul>
<li>${users}：代表集合</li>
<li>user：代表集合中的每个元素</li>
<li>${user.name}：元素的name属性值</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>动态表格示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/style.css&#x27;&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>动态表格<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;add-row-form&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">id</span>=<span class="string">&quot;email&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;电子邮件&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>添加行<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>序号<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>年龄<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>性别<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>简介<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>居住地<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>状态信息<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">id</span>=<span class="string">&quot;table-body&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--这里的user对应的是下面的user名称，都不是固定的，user是集合中的元素，在后面加个逗号可以传过来一个state状态对象，名字随便写--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 状态对象是保存循环过程中的一个状态信息的--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;user,state : $&#123;users&#125;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;user.name&#125;&quot;</span>&gt;</span>张三<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;user.age&#125;&quot;</span>&gt;</span>30<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;user.gender ? &#x27;男&#x27; : &#x27;女&#x27;&#125;&quot;</span>&gt;</span>男<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;user.desc&#125;&quot;</span>&gt;</span>我是一个很棒的人<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--行内写法[[]]和[()]都可以，一样的效果--&gt;</span></span><br><span class="line">                状态信息：内联表达式<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                下标：[[$&#123;state.index&#125;]]<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                序号：[($&#123;state.count&#125;)]<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                当前对象：[($&#123;state.current&#125;)]<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                元素总数：[($&#123;state.size&#125;)]<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                是否为偶数行：[($&#123;state.even&#125;)]<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                是否为奇数行：[($&#123;state.odd&#125;)]<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                是否是第一个元素：[($&#123;state.first&#125;)]<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                是否是最后一个元素：[($&#123;state.last&#125;)]<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>访问网址：<a href="http://localhost:8080/list">http://localhost:8080/list</a></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250529033645437.png" alt="image-20250529033645437"></p>
<p>注意：以上<code>[[${state.index}]]</code>这种语法属于thymeleaf中的<code>内联表达式</code>写法。也可以写成：<code>[(${state.index})]</code></p>
<p>另外，状态对象<code>state</code>的属性包括：</p>
<ul>
<li>index：下标</li>
<li>count：序号</li>
<li>current：当前对象</li>
<li>size：元素总数</li>
<li>even：是否为偶数行</li>
<li>odd：是否为奇数行</li>
<li>first：是否为第一个元素</li>
<li>last：是否为最后一个元素</li>
</ul>
<h4 id="条件判断th-if"><a href="#条件判断th-if" class="headerlink" title="条件判断th:if"></a>条件判断th:if</h4><p>th:if 语法用来决定元素是否显示：true显示。false隐藏。</p>
<div th:if="true">我是一个div元素</div>，则显示该div

<div th:if="false">我也是一个div元素</div>，则隐藏该div

<p>实现这样一个功能：用户如果没有留下简介，则显示<code>你比较懒没有留下任何介绍信息</code>，如果留下了简介，则显示具体的简介信息。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 这两种写法都可以&lt;td th:if=&quot;为空&quot;&gt;你这个人很懒&lt;/td&gt;，为空就很懒，不为空就显示简介--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;#strings.isEmpty(user.desc)&#125;&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;你这个人很懒&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;not #strings.isEmpty(user.desc)&#125;&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;user.desc&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="条件判断th-switch"><a href="#条件判断th-switch" class="headerlink" title="条件判断th:switch"></a>条件判断th:switch</h4><p>实现一个这样的功能：如果城市是beijing，就显示汉字北京，以此类推，其他值显示未知。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">th:switch</span>=<span class="string">&quot;$&#123;user.location&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:case</span>=<span class="string">&quot;BEIJING&quot;</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:case</span>=<span class="string">&quot;SHANGHAI&quot;</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:case</span>=<span class="string">&quot;TIANJIN&quot;</span>&gt;</span>天津<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:case</span>=<span class="string">&quot;WUHAN&quot;</span>&gt;</span>武汉<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:case</span>=<span class="string">&quot;SHENZHEN&quot;</span>&gt;</span>深圳<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:case</span>=<span class="string">&quot;*&quot;</span>&gt;</span>未知<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250529181805712.png" alt="image-20250529181805712"></p>
<h4 id="thymeleaf属性优先级"><a href="#thymeleaf属性优先级" class="headerlink" title="thymeleaf属性优先级"></a>thymeleaf属性优先级</h4><p>thymeleaf的属性优先级非常重要，因为它直接决定了模板的解析和执行顺序。</p>
<p>以下是Thymeleaf属性的优先级从高到低的列表，以表格形式展示：</p>
<table>
<thead>
<tr>
<th>优先级</th>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><code>th:if</code></td>
<td>如果条件为真，则渲染该元素。</td>
</tr>
<tr>
<td>2</td>
<td><code>th:unless</code></td>
<td>如果条件为假，则渲染该元素。</td>
</tr>
<tr>
<td>3</td>
<td><code>th:with</code></td>
<td>定义局部变量。</td>
</tr>
<tr>
<td>4</td>
<td><code>th:switch</code></td>
<td>开始一个 switch 语句。</td>
</tr>
<tr>
<td>5</td>
<td><code>th:case</code></td>
<td>定义 switch 语句中的 case 分支。</td>
</tr>
<tr>
<td>6</td>
<td><code>th:each</code></td>
<td>遍历列表，用于循环。</td>
</tr>
<tr>
<td>7</td>
<td><code>th:remove</code></td>
<td>移除元素或其属性。</td>
</tr>
<tr>
<td>8</td>
<td><code>th:attr</code></td>
<td>设置或修改元素的属性。</td>
</tr>
<tr>
<td>9</td>
<td><code>th:classappend</code></td>
<td>追加 CSS 类。</td>
</tr>
<tr>
<td>10</td>
<td><code>th:styleappend</code></td>
<td>追加内联样式。</td>
</tr>
<tr>
<td>11</td>
<td><code>th:src</code></td>
<td>设置元素的 <code>src</code> 属性。</td>
</tr>
<tr>
<td>12</td>
<td><code>th:href</code></td>
<td>设置元素的 <code>href</code> 属性。</td>
</tr>
<tr>
<td>13</td>
<td><code>th:value</code></td>
<td>设置元素的 <code>value</code> 属性。</td>
</tr>
<tr>
<td>14</td>
<td><code>th:text</code></td>
<td>设置元素的文本内容。</td>
</tr>
<tr>
<td>15</td>
<td><code>th:utext</code></td>
<td>设置元素的未转义文本内容。</td>
</tr>
<tr>
<td>16</td>
<td><code>th:html</code></td>
<td>设置元素的 HTML 内容。</td>
</tr>
<tr>
<td>17</td>
<td><code>th:fragment</code></td>
<td>定义模板片段。</td>
</tr>
<tr>
<td>18</td>
<td><code>th:insert</code></td>
<td>插入一个模板片段。</td>
</tr>
<tr>
<td>19</td>
<td><code>th:replace</code></td>
<td>替换当前元素为一个模板片段。</td>
</tr>
<tr>
<td>20</td>
<td><code>th:include</code></td>
<td>包含一个模板片段的内容。</td>
</tr>
<tr>
<td>21</td>
<td><code>th:block</code></td>
<td>用于逻辑分组，不产生任何HTML输出。</td>
</tr>
</tbody></table>
<p>对于thymeleaf属性优先级，我总结了以下一段话，把它记住即可：</p>
<p><strong>“先控制，再遍历，后操作，末内容。”</strong></p>
<p>具体来说：</p>
<ol>
<li><strong>先控制</strong>：<code>th:if</code> 和 <code>th:unless</code> 用于条件控制，决定是否渲染元素。</li>
<li><strong>再遍历</strong>：<code>th:each</code> 用于遍历列表，生成多个元素。</li>
<li><strong>后操作</strong>：<code>th:with</code>、<code>th:switch</code>、<code>th:case</code>、<code>th:remove</code>、<code>th:attr</code> 等用于局部变量定义、条件分支、属性操作等。</li>
<li><strong>末内容</strong>：<code>th:text</code>、<code>th:utext</code>、<code>th:html</code> 等用于设置元素的内容。</li>
</ol>
<h4 id="…-表达式"><a href="#…-表达式" class="headerlink" title="*{…} 表达式"></a>*{…} 表达式</h4><p><code>*{...}</code> 主要用于在上下文中访问对象的属性。这种表达式通常在表单处理和对象绑定场景中使用。</p>
<p><strong>语法</strong>：<code>*{property}</code>：访问当前**<font style="color:#DF2A3F;">上下文</font>**对象的某个属性。</p>
<p><strong>使用场景</strong></p>
<ul>
<li>表单绑定：在表单中绑定对象的属性。</li>
<li>对象属性访问：在模板中访问对象的属性，特别是当对象是当前上下文的一部分时。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--&lt;tr th:each=&quot;user,state : $&#123;users&#125;&quot;&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--将每一次循环的user对象作为tr上下文对象绑定，这样下面的user.就不用写了，外面的$改为*--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:object</span>=<span class="string">&quot;$&#123;user&#125;&quot;</span> <span class="attr">th:each</span>=<span class="string">&quot;user,state : $&#123;users&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;td th:text=&quot;$&#123;user.name&#125;&quot;&gt;张三&lt;/td&gt;</span></span><br><span class="line"><span class="comment">         &lt;td th:text=&quot;$&#123;user.age&#125;&quot;&gt;30&lt;/td&gt;--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;*&#123;name&#125;&quot;</span>&gt;</span>张三<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;*&#123;age&#125;&quot;</span>&gt;</span>30<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<ol>
<li><strong>表单绑定</strong></li>
</ol>
<p>假设你有一个 <code>User</code> 对象，包含 <code>name</code> 和 <code>age</code> 属性，你可以在表单中使用 <code>*{...}</code> 表达式来绑定这些属性：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:object</span>=<span class="string">&quot;$&#123;user&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/submit&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;name&quot;</span>&gt;</span>Name:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">th:field</span>=<span class="string">&quot;*&#123;name&#125;&quot;</span> /&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;age&quot;</span>&gt;</span>Age:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">id</span>=<span class="string">&quot;age&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">th:field</span>=<span class="string">&quot;*&#123;age&#125;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在这个例子中：</p>
<ul>
<li><code>th:object=&quot;${user}&quot;</code> 将 <code>user</code> 对象设置为当前上下文对象。</li>
<li><code>th:field=&quot;*{name}&quot;</code> 和 <code>th:field=&quot;*{age}&quot;</code> 分别绑定到 <code>user</code> 对象的 <code>name</code> 和 <code>age</code> 属性。</li>
</ul>
<ol start="2">
<li><strong>对象属性访问</strong></li>
</ol>
<p>假设你有一个 <code>User</code> 对象，包含 <code>name</code> 和 <code>age</code> 属性，你可以在模板中使用 <code>*{...}</code> 表达式来访问这些属性：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:object</span>=<span class="string">&quot;$&#123;user&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Name: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;*&#123;name&#125;&quot;</span>&gt;</span>Default Name<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Age: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;*&#123;age&#125;&quot;</span>&gt;</span>Default Age<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在这个例子中：</p>
<ul>
<li><code>th:object=&quot;${user}&quot;</code> 将 <code>user</code> 对象设置为当前上下文对象。</li>
<li><code>*{name}</code> 和 <code>*{age}</code> 分别访问 <code>user</code> 对象的 <code>name</code> 和 <code>age</code> 属性。</li>
</ul>
<p>**与 **<code>${...}</code> 的区别</p>
<ul>
<li><code>${...}</code>：标准表达式，用于访问模型中的变量和执行简单的表达式。</li>
<li><code>*{...}</code>：属性选择表达式，用于在上下文中访问对象的属性，通常与 <code>th:object</code> 一起使用。</li>
</ul>
<h4 id="代码片段共享"><a href="#代码片段共享" class="headerlink" title="代码片段共享"></a>代码片段共享</h4><p>片段是Thymeleaf中用于代码复用的基本机制。你可以将共享的部分提取到单独的HTML文件中，然后在其他模板中引用这些片段。</p>
<p>页面中公共的header.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--th:fragment的作用是把这段代码起个名叫h，方面以后用--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">header</span> <span class="attr">th:fragment</span>=<span class="string">&quot;h&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">nav</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--@&#123;/a&#125;的作用是绑定一个路径--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/a&#125;&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/b&#125;&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>页面中公共的footer.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">footer</span> <span class="attr">th:fragment</span>=<span class="string">&quot;f&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="symbol">&amp;copy;</span> 2024 北京动力节点<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在<code>a.html</code>中包含以上两个公共部分：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>主页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ~&#123;&#125;是专门用来做代码共享的，里面的header是文件名，引用在这，然后是h是代码片段的名字 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">&quot;~&#123;header :: h&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>欢迎来到主页<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是主页的主要内容.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">&quot;~&#123;footer :: f&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在<code>b.html</code>中包含以上两个公共部分：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>关于我们<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">&quot;~&#123;header :: h&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>关于我们<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>动力节点专注IT培训16年.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">&quot;~&#123;footer :: f&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>然后在UserController里加上</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 只编写一个控制器方法，不做任何业务逻辑，只是为了跳转视图。</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/a&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">a</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;a&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/b&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">b</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;b&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>效果图：<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250530171447529.png" alt="image-20250530171447529"></p>
<p>主要作用是代码复用。实现此功能的主要代码：</p>
<ul>
<li><p>在公共代码部分使用<code>th:fragment=&quot;片段名称&quot;</code>来声明公共代码片段的名字。</p>
</li>
<li><p>在需要引入的地方使用<code>th:replace=&quot;~{文件名去掉后缀 :: 片段名称}&quot;</code>来引入。</p>
</li>
</ul>
<p><strong><font style="color:#DF2A3F;">小插曲：在springboot中如何实现：直接将请求路径映射到特定的视图，而不需要编写controller？</font></strong></p>
<p>以前是在springmvc配置文件中配置一个viewName对应的控制器，现在新建：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250530172345613.png" alt="image-20250530172345613"></p>
<p>使用<code>ViewControllerRegistry</code>进行视图与控制器的注册</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 基于springboot的自动配置扩展配置</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">// 添加 视图控制器 与 视图名称 的映射关系</span></span><br><span class="line">        <span class="comment">// /a是视图控制器，a是视图名字，这样就不用在UserController里写方法了</span></span><br><span class="line">        registry.addViewController(<span class="string">&quot;/a&quot;</span>).setViewName(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">        registry.addViewController(<span class="string">&quot;/b&quot;</span>).setViewName(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="thymeleaf页面修改如何立即生效"><a href="#thymeleaf页面修改如何立即生效" class="headerlink" title="thymeleaf页面修改如何立即生效"></a>thymeleaf页面修改如何立即生效</h3><p>第一步：引入springboot提供的<code>dev tools</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>第二步：关闭应用重启功能，如果不关闭会导致每一次修改java代码后立即重启应用，不建议。我们现在只希望做到的功能是，修改thymeleaf模板文件后立即生效。</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#关闭应用重启功能</span></span><br><span class="line"><span class="attr">spring.devtools.restart.enabled</span>=<span class="string">false</span></span><br></pre></td></tr></table></figure>

<p>第三步：修改代码后在IDEA中按组合键<code>ctrl+f9</code></p>
<p>以上三步配合即可。</p>
<h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><p><strong>在controller层如果程序出现了异常，并且这个异常未被捕获，springboot提供的异常处理机制将生效。</strong></p>
<p>Spring Boot 提供异常处理机制主要是为了提高应用的健壮性和用户体验。它的好处包括：</p>
<ol>
<li><strong>统一错误响应</strong>：可以定义全局异常处理器来统一处理各种异常，确保返回给客户端的错误信息格式一致，便于前端解析。</li>
<li><strong>提升用户体验</strong>：能够优雅地处理异常情况，避免直接将技术性错误信息暴露给用户，而是显示更加友好的提示信息。</li>
<li><strong>简化代码</strong>：开发者不需要在每个可能抛出异常的方法中重复编写异常处理逻辑，减少冗余代码，使业务代码更加清晰简洁。</li>
<li><strong>增强安全性</strong>：通过控制异常信息的输出，防止敏感信息泄露，增加系统的安全性。</li>
</ol>
<h3 id="自适应的错误处理机制"><a href="#自适应的错误处理机制" class="headerlink" title="自适应的错误处理机制"></a>自适应的错误处理机制</h3><p>springboot会根据请求头的Accept字段来决定错误的响应格式。</p>
<p>这种机制的好处就是：客户端设备自适应，提高用户的体验。</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1731424148788-8a9c52cc-7683-479a-a8b8-9075d779bc4e.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1748680254183-2.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1731424190201-4c9b9781-08ae-48f7-8b4a-9956b3b700d7.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1730804471502-31c64115-c49a-4d76-92e0-90e9ae543b32-1748680254183-2.png"></p>
<h3 id="SpringMVC的错误处理方案"><a href="#SpringMVC的错误处理方案" class="headerlink" title="SpringMVC的错误处理方案"></a>SpringMVC的错误处理方案</h3><p><strong><font style="color:#DF2A3F;">重点：如果程序员使用了SpringMVC的错误处理方案，SpringBoot的错误处理方案不生效。</font></strong></p>
<h4 id="局部控制-ExceptionHandler"><a href="#局部控制-ExceptionHandler" class="headerlink" title="局部控制 @ExceptionHandler"></a>局部控制 @ExceptionHandler</h4><p>在控制器当中编写一个方法，方法使用@ExceptionHandler注解进行标注，凡是<strong>这个控制器</strong>当中出现了<strong>对应的异常</strong>，则走这个方法来进行异常的处理。局部生效。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span><span class="comment">//响应json，相当于下面两个注解</span></span><br><span class="line"><span class="comment">/*@Controller</span></span><br><span class="line"><span class="comment">@ResponseBody*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// RESTFul风格</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/resource/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="comment">//被@ResponseBody标注了返回的如果是user对象，消息转换器返回的是json，这里已经是String了就会转换成String</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getResource</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>&#123;<span class="comment">//上面的id通过路径的方式传到这里的id</span></span><br><span class="line">        <span class="comment">// 通过http://localhost:8080/resource/2来正常运行，但如果改为1就会捕捉异常</span></span><br><span class="line">        <span class="keyword">if</span> (id == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="comment">// IllegalArgumentException是lang包下的叫无效参数异常</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;无效ID：&quot;</span> + id);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span><span class="string">&quot;ID = &quot;</span> + id;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    下面的加这里</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="http://localhost:8080/resource/2%EF%BC%9A![image-20250531164616038](https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250531164616038.png)">http://localhost:8080/resource/2：![image-20250531164616038](https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250531164616038.png)</a></p>
<p><a href="http://localhost:8080/resource/1%EF%BC%9A%E8%BF%99%E6%98%AFspringboot%E8%87%AA%E5%B8%A6%E7%9A%84%E5%BC%82%E5%B8%B8">http://localhost:8080/resource/1：这是springboot自带的异常</a></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250531164633636.png" alt="image-20250531164633636"></p>
<p>用mvc局部方式，接着添加：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// springmvc中的异常处理方案：局部方式。</span></span><br><span class="line"><span class="comment">// 只有在UserController中发生 IllegalArgumentException 异常时，会走下面这个方法进行异常处理。</span></span><br><span class="line"><span class="comment">// 把异常类型传给这个注解，这句话的意思是只要当前这个控制器出现了异常，就会走这个方法</span></span><br><span class="line"><span class="comment">// 会把上面new的异常内存地址传到带有这个注解的方法参数上</span></span><br><span class="line"><span class="meta">@ExceptionHandler(IllegalArgumentException.class)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">handlerIllegalArgumentException</span><span class="params">(IllegalArgumentException e)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;错误信息：&quot;</span> + e.getMessage();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250531170439631.png" alt="image-20250531170439631"></p>
<p>可以再编写一个OtherController，让它也发生<code>IllegalArgumentException</code>异常，看看它会不会走局部的错误处理机制。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OtherController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/other/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getResource</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(id == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;无效ID：&quot;</span> + id);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ID = &quot;</span> + id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="http://localhost:8080/other/1%EF%BC%8C%E4%BB%85%E5%B1%80%E9%83%A8%E7%94%9F%E6%95%88![image-20250531170706304](https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250531170706304.png)">http://localhost:8080/other/1，仅局部生效![image-20250531170706304](https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250531170706304.png)</a></p>
<h4 id="全局控制-ControllerAdvice-ExceptionHandler"><a href="#全局控制-ControllerAdvice-ExceptionHandler" class="headerlink" title="全局控制 @ControllerAdvice + @ExceptionHandler"></a>全局控制 @ControllerAdvice + @ExceptionHandler</h4><p>也可以把以上局部生效的方法单独放到一个类当中，这个类使用@ControllerAdvice注解标注，凡是<strong>任何控制器</strong>当中出现了<strong>对应的异常</strong>，则走这个方法来进行异常的处理。全局生效。</p>
<p>(弹幕里看到说有什么异常的话记得加上thymeleaf插件)</p>
<p>将之前的局部处理方案的代码注释掉。使用全局处理方式，编写以下类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @ControllerAdvice + @ExceptionHandler 可以用来定义全局异常处理器。</span></span><br><span class="line"><span class="comment">// 针对于所有的控制器都有效。</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@ControllerAdvice</span><span class="comment">//注释掉表示springmvc不再管理这个异常</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line">    <span class="meta">@ExceptionHandler(IllegalArgumentException.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span><span class="comment">//为什么之前在otherController不用加？因为使用了@RestController</span></span><br><span class="line">    <span class="comment">//不加就会认为下面return的是一个逻辑视图名字</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">handlerIllegalArgumentException</span><span class="params">(IllegalArgumentException e)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;错误信息：&quot;</span> + e.getMessage();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="SpringBoot的错误处理方案"><a href="#SpringBoot的错误处理方案" class="headerlink" title="SpringBoot的错误处理方案"></a>SpringBoot的错误处理方案</h3><p><strong><font style="color:#DF2A3F;">重点：如果SpringMVC没有对应的处理方案，会开启SpringBoot默认的错误处理方案。</font></strong></p>
<p>SpringBoot默认的错误处理方案如下：</p>
<ol>
<li>如果客户端要的是json，则直接响应json格式的错误信息。</li>
<li>如果客户端要的是html页面，则按照下面方案：</li>
</ol>
<ul>
<li><p>第一步（精确错误码文件）：去<code>classpath:/templates/error/</code>目录下找<code>404.html``500.html</code>等<code>精确错误码.html</code>文件。如果找不到，则去静态资源目录下的&#x2F;error目录下找。如果还是找不到，才会进入下一步。</p>
</li>
<li><p>第二步（模糊错误码文件）：去<code>classpath:/templates/error/</code>目录下找<code>4xx.html``5xx.html</code>等<code>模糊错误码.html</code>文件。如果找不到，则去静态资源目录下的&#x2F;error目录下找。如果还是找不到，才会进入下一步。</p>
</li>
<li><p>第三步（通用错误页面）：去找<code>classpath:/templates/error.html</code>如果找不到则进入下一步。</p>
</li>
<li><p>第四步（默认错误处理）：如果上述所有步骤都未能找到合适的错误页面，Spring Boot 会使用内置的默认错误处理机制，即 <code>/error</code> 端点。</p>
</li>
</ul>
<p>比如随便输入一个没有任何html的文件网址，就会走第四步显示error错误</p>
<p>在文件下有这样的网页<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250531185737696.png" alt="image-20250531185737696"></p>
<p>优先去templates找，但如果把这个404改成404a，精确查找找不到了就会桉顺序去找static下的404，直到四个路径都找不到了再进行模糊错误码查找</p>
<p>如果以上都没有了，就会去这里找，这是一个通用的错误</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250531190534893.png" alt="image-20250531190534893"></p>
<h3 id="如何在错误页获取错误信息"><a href="#如何在错误页获取错误信息" class="headerlink" title="如何在错误页获取错误信息"></a>如何在错误页获取错误信息</h3><p>Spring Boot 默认会在模型Model中放置以下信息：</p>
<ul>
<li>timestamp: 错误发生的时间戳</li>
<li>status: HTTP 状态码</li>
<li>error: 错误类型（如 “Not Found”）</li>
<li>exception: 异常类名</li>
<li>message: 错误消息</li>
<li>trace: 堆栈跟踪</li>
</ul>
<p>在thymeleaf中使用 <code>${message}</code>即可取出信息。</p>
<p>注意：**<font style="color:#DF2A3F;">springboot3.3.5</font>**版本默认只向Model对象中绑定了<code>timestamp``status``error</code>。如果要保存<code>exception``message``trace</code>，需要开启以下三个配置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">server.error.include-stacktrace=always</span><br><span class="line">server.error.include-exception=true</span><br><span class="line">server.error.include-message=always</span><br></pre></td></tr></table></figure>

<p>在error里写上代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>error<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>error通用错误<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">异常发生时间：<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;timestamp&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">HTTP状态码：<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;status&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">错误类型：<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;error&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">异常类名：<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;exception&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">错误信息：<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;message&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">堆栈跟踪：<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;trace&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250531191142990.png" alt="image-20250531191142990"></p>
<p>配置后：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250531191222271.png" alt="image-20250531191222271"></p>
<h3 id="前后端分离项目的错误处理方案"><a href="#前后端分离项目的错误处理方案" class="headerlink" title="前后端分离项目的错误处理方案"></a>前后端分离项目的错误处理方案</h3><p>统一使用SpringMVC的错误处理方案，定义全局的异常处理机制：@ControllerAdvice + @ExceptionHandler</p>
<p>返回json格式的错误信息，其它的就不需要管了，因为前端接收到错误信息怎么处理是他自己的事儿。</p>
<h3 id="服务器端负责页面渲染的项目错误处理方案"><a href="#服务器端负责页面渲染的项目错误处理方案" class="headerlink" title="服务器端负责页面渲染的项目错误处理方案"></a>服务器端负责页面渲染的项目错误处理方案</h3><p>建议使用SpringBoot的错误处理方案：</p>
<ol>
<li>如果发生的异常是HTTP错误状态码：<ol>
<li>建议常见的错误码给定<code>精确错误码.html</code></li>
<li>建议不常见的错误码给定<code>模糊错误码.html</code></li>
</ol>
</li>
<li>如果发生的异常不是HTTP错误状态码，而是业务相关异常：<ol>
<li>在程序中处理具体的业务异常，自己通过程序来决定跳转到哪个错误页面。</li>
</ol>
</li>
<li>建议提供<code>classpath:/templates/error.html</code>来处理通用错误。</li>
</ol>
<h2 id="国际化（了解）"><a href="#国际化（了解）" class="headerlink" title="国际化（了解）"></a>国际化（了解）</h2><p>在Spring Boot中实现国际化（i18n）(i到n之间有18个字母）是一个常见的需求，它允许应用程序根据用户的语言和地区偏好显示不同的文本。</p>
<h3 id="实现国际化"><a href="#实现国际化" class="headerlink" title="实现国际化"></a>实现国际化</h3><h4 id="第一步：创建资源文件"><a href="#第一步：创建资源文件" class="headerlink" title="第一步：创建资源文件"></a>第一步：创建资源文件</h4><p>创建包含不同语言版本的消息文件。这些文件通常放在<code>src/main/resources</code>目录下，并且以<code>.properties</code>为扩展名。例如：</p>
<ul>
<li><code>messages.properties</code> (默认语言，如英语)</li>
<li><code>messages_zh_CN.properties</code> (简体中文)</li>
<li><code>messages_fr.properties</code> (法语)</li>
</ul>
<p>注意这个zh_CN或者fr是固定的不能动，messages可以动</p>
<p>每个文件都应包含相同的消息键，但值应对应于相应的语言。例如：</p>
<p><strong>messages.properties</strong>:</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">welcome.message</span>=<span class="string">Welcome to our application!</span></span><br></pre></td></tr></table></figure>

<p><strong>messages_zh_CN.properties</strong>:</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">welcome.message</span>=<span class="string">欢迎来到我们的应用！</span></span><br></pre></td></tr></table></figure>

<p><strong>messages_fr.properties</strong>:</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">welcome.message</span>=<span class="string">Bienvenue dans notre application !</span></span><br></pre></td></tr></table></figure>

<p>修改好后需要在settings里找到file encodings把字符设置成utf-8</p>
<h4 id="第二步：在模板文件中取出消息"><a href="#第二步：在模板文件中取出消息" class="headerlink" title="第二步：在模板文件中取出消息"></a>第二步：在模板文件中取出消息</h4><p>语法格式为：#{welcome.message}井号是资源文件当中的key</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>welcome<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--把配置文件中的前面那里拿过来--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">th:text</span>=<span class="string">&quot;#&#123;welcome.message&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>要跳转到这个页面还需要写个控制器</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250601024131104.png" alt="image-20250601024131104"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> &#123;</span><br><span class="line">        registry.addViewController(<span class="string">&quot;/welcome&quot;</span>).setViewName(<span class="string">&quot;welcome&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="http://localhost:8080/welcome![image-20250601024201624](https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250601024201624.png)">http://localhost:8080/welcome![image-20250601024201624](https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250601024201624.png)</a></p>
<p>如果将浏览器默认语言环境修改为法文</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1731512808484-d61096e2-4d1d-446c-a26f-33c1505d76e4.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1731512824927-f649b549-0add-4450-9dc3-9e2a4331c025.png"></p>
<h3 id="国际化实现原理"><a href="#国际化实现原理" class="headerlink" title="国际化实现原理"></a>国际化实现原理</h3><p>做国际化的自动配置类是：<code>MessageSourceAutoConfiguration</code></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1731513242246-ac4e59e3-a1e9-45c3-a346-41ae1b41f658.png"></p>
<p>通过以上源码得知，国际化对应的配置前缀是：<code>spring.message</code>，只要是这个开头的都会绑定到MessageSourceProperties上，这个文件的默认值就是message，但也可以修改</p>
<p>例如在<code>application.properties</code>中进行如下配置：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置国际化文件命名的基础名称</span></span><br><span class="line"><span class="attr">spring.messages.basename</span>=<span class="string">messages</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 指定国际化信息的字符编码方式</span></span><br><span class="line"><span class="attr">spring.messages.encoding</span>=<span class="string">UTF-8</span></span><br></pre></td></tr></table></figure>

<p>注意：标准标识符：en_US 和 zh_CN 这样的标识符是固定的，不能更改。可以设置的是basename。</p>
<h3 id="在程序当中如何获取国际化信息"><a href="#在程序当中如何获取国际化信息" class="headerlink" title="在程序当中如何获取国际化信息"></a>在程序当中如何获取国际化信息</h3><p>也就是通过java程序获取properties里面后面的那个welcome.message的配置信息</p>
<p>在国际化自动配置类中可以看到这样一个Bean：MessageSource，它是专门用来处理国际化的。我们可以将它注入到我们的程序中，然后调用相关方法在程序中获取国际化信息。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在java程序当中获取属性资源文件中的配置信息。</span></span><br><span class="line"><span class="comment">// 获取国际化的信息。</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MessageSource messageSource;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping(&quot;/test&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSource</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">        <span class="comment">// 第一个是属性资源文件中的key（配置文件中的welcome.message就是key），第二个传个空，第三个传语言环境（通过浏览器发送请求，请求协议的请求头当中肯定有语言环境）</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> messageSource.getMessage(<span class="string">&quot;welcome.message&quot;</span>, <span class="literal">null</span>, request.getLocale());</span><br><span class="line">        <span class="keyword">return</span> message;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="定制web容器"><a href="#定制web容器" class="headerlink" title="定制web容器"></a>定制web容器</h2><h3 id="web服务器切换为jetty"><a href="#web服务器切换为jetty" class="headerlink" title="web服务器切换为jetty"></a>web服务器切换为jetty</h3><p>pringboot默认嵌入的web服务器是Tomcat，如何切换到jetty服务器？</p>
<p>实现方式：排除Tomcat，添加Jetty依赖</p>
<p>切换前：<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250601174925674.png" alt="image-20250601174925674"></p>
<p>**修改 **<code>pom.xml</code> 文件：在 <code>pom.xml</code> 中，确保你使用 <code>spring-boot-starter-web</code> 并排除 Tomcat，然后添加 Jetty 依赖。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 排除 Tomcat --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 添加 Jetty 依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jetty<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>再次重启就变成这样：<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250601175200907.png" alt="image-20250601175200907"></p>
<h3 id="web服务器切换原理"><a href="#web服务器切换原理" class="headerlink" title="web服务器切换原理"></a>web服务器切换原理</h3><p>从哪里可以看出springboot是直接将tomcat服务器嵌入到应用中的呢？看这个类：<code>ServletWebServerFactoryAutoConfiguration</code></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1731572949358-481582b6-0e79-4f4c-b556-b1ec3c13882c.png"></p>
<p>以上代码显示嵌入的是3个服务器。但并不是都生效，我们来看一下生效条件：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1731573044414-b1cb4767-de21-4897-9d38-36e6382a8581.png"></p>
<p>生效条件是，看类路径当中是否有对应服务器相关的类，如果有则生效。<code>spring-boot-web-starter</code>这个web启动器引入的时候，大家都知道，它间接引入的是tomcat服务器的jar包。因此默认Tomcat服务器被嵌入。如果想要切换web服务器，将tomcat相关jar包排除掉，引入jetty的jar包之后，jetty服务器就会生效，这就是切换web服务器的原理。</p>
<h3 id="web服务器优化"><a href="#web服务器优化" class="headerlink" title="web服务器优化"></a>web服务器优化</h3><p>通过以下源码得知，web服务器的相关配置和<code>ServerProperties</code>有关系：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1731573299936-414ae5c8-87a8-4810-b448-ac1b67f3cfb2.png"></p>
<p>查看<code>ServerProperties</code>源码：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1731573337370-7d40853c-9c5a-4750-a40d-cf00d1528fb4.png"></p>
<p>得知web服务器的配置都是以<code>server</code>开头的。</p>
<p>那么如果要配置tomcat服务器怎么办？要配置jetty服务器怎么办？请看一下源码</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1731573416792-229c5dbb-4a42-4037-934d-bd004bc46a7d.png"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/1731573452454-a150e6b1-6fa0-411c-b2a5-063f5b03be6b.png"></p>
<p>通过以上源码得知，如果要对tomcat服务器进行配置，前缀为：<code>server.tomcat</code></p>
<p>如果要对jetty服务器进行配置，前缀为：<code>server.jetty</code>。</p>
<p>在以后的开发中关于tomcat服务器的常见优化配置有：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这个参数决定了 Tomcat 在接收请求时，如果在指定的时间内没有收到完整的请求数据，将会关闭连接。这个超时时间是从客户端发送请求开始计算的。</span></span><br><span class="line"><span class="comment"># 防止长时间占用资源：如果客户端发送请求后，长时间没有发送完所有数据，Tomcat 会在这个超时时间内关闭连接，从而释放资源，避免资源被长时间占用。</span></span><br><span class="line"><span class="attr">server.tomcat.connection-timeout</span>=<span class="string">20000</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 设置 Tomcat 服务器处理请求的最大线程数为 200。</span></span><br><span class="line"><span class="comment"># 如果超过这个数量的请求同时到达，Tomcat 会将多余的请求放入一个等待队列中。</span></span><br><span class="line"><span class="comment"># 如果等待队列也满了（由 server.tomcat.accept-count 配置），新的请求将被拒绝，通常会返回一个“503 Service Unavailable”错误。</span></span><br><span class="line"><span class="attr">server.tomcat.max-threads</span>=<span class="string">200</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 用来设置等待队列的最大容量，也就是301时会返回一个503错误</span></span><br><span class="line"><span class="attr">server.tomcat.accept-count</span>=<span class="string">100</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 设置 Tomcat 服务器在空闲时至少保持 10 个线程处于活动状态，以便快速响应新的请求。</span></span><br><span class="line"><span class="attr">server.tomcat.min-spare-threads</span>=<span class="string">10</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 允许 Tomcat 服务器在关闭后立即重新绑定相同的地址和端口，即使该端口还在 TIME_WAIT 状态</span></span><br><span class="line"><span class="comment"># 当一个网络连接关闭时，操作系统会将该连接的端口保持在 TIME_WAIT 状态一段时间（通常是 2-4 分钟），以确保所有未完成的数据包都能被正确处理。在这段时间内，该端口不能被其他进程绑定。</span></span><br><span class="line"><span class="attr">server.tomcat.address-reuse-enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 设置 Tomcat 服务器绑定到所有可用的网络接口，使其可以从任何网络地址访问。</span></span><br><span class="line"><span class="attr">server.tomcat.bind-address</span>=<span class="string">0.0.0.0</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 设置 Tomcat 服务器使用 HTTP/1.1 协议处理请求。</span></span><br><span class="line"><span class="attr">server.tomcat.protocol</span>=<span class="string">HTTP/1.1</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 设置 Tomcat 服务器的会话(session)超时时间为 30 分钟。具体来说，如果用户在 30 分钟内没有与应用进行任何交互，其会话将被自动注销。</span></span><br><span class="line"><span class="attr">server.tomcat.session-timeout</span>=<span class="string">30</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 设置 Tomcat 服务器的静态资源缓存时间为 3600 秒（即 1 小时），这意味着浏览器会在 1 小时内缓存这些静态资源，减少重复请求。</span></span><br><span class="line"><span class="attr">server.tomcat.resource-cache-period</span>=<span class="string">3600</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 解决get请求乱码。对请求行url进行编码。</span></span><br><span class="line"><span class="attr">server.tomcat.uri-encoding</span>=<span class="string">UTF-8</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 设置 Tomcat 服务器的基础目录为当前工作目录（. 表示当前目录）。这个配置指定了 Tomcat 服务器的工作目录，包括日志文件、临时文件和其他运行时生成的文件的存放位置。 生产环境中可能需要重新配置。</span></span><br><span class="line"><span class="attr">server.tomcat.basedir</span>=<span class="string">.</span></span><br></pre></td></tr></table></figure>

<h1 id="第6章-SpringBoot实用技术整合"><a href="#第6章-SpringBoot实用技术整合" class="headerlink" title="第6章 SpringBoot实用技术整合"></a>第6章 SpringBoot实用技术整合</h1><h2 id="logo设置"><a href="#logo设置" class="headerlink" title="logo设置"></a>logo设置</h2><h3 id="关闭logo图标"><a href="#关闭logo图标" class="headerlink" title="关闭logo图标"></a>关闭logo图标</h3><p>就是这个东西<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250601180758039.png" alt="image-20250601180758039"></p>
<h4 id="配置方式"><a href="#配置方式" class="headerlink" title="配置方式"></a>配置方式</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.main.banner-mode</span>=<span class="string">off</span></span><br><span class="line"><span class="comment">#默认是console打印到控制台上</span></span><br><span class="line"><span class="comment">#off是关闭，log是打印到日志文件上</span></span><br></pre></td></tr></table></figure>

<h4 id="代码方式"><a href="#代码方式" class="headerlink" title="代码方式"></a>代码方式</h4><p>第一种代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot322WebServerApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//SpringApplication.run(Springboot322WebServerApplication.class, args);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 关闭logo使用代码方式实现（第一种</span></span><br><span class="line">        <span class="type">SpringApplication</span> <span class="variable">springApplication</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SpringApplication</span>(Springboot322WebServerApplication.class);</span><br><span class="line">        springApplication.setBannerMode(Banner.Mode.OFF);</span><br><span class="line">        springApplication.run(args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>第二种代码：流式编程&#x2F;链式编程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot322WebServerApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//SpringApplication.run(Springboot322WebServerApplication.class, args);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 流式编程/链式编程（第二种</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">SpringApplicationBuilder</span>()</span><br><span class="line">                .sources(Springboot322WebServerApplication.class)</span><br><span class="line">                .bannerMode(Banner.Mode.OFF)</span><br><span class="line">                .run(args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="修改logo图标"><a href="#修改logo图标" class="headerlink" title="修改logo图标"></a>修改logo图标</h3><p>在<code>src/main/resources</code>目录下存放一个<code>banner.txt</code>文件。文件名固定。</p>
<p>利用一些网站生成图标：</p>
<p><a target="_blank" rel="noopener" href="https://www.bootschool.net/ascii">https://www.bootschool.net/ascii</a> （支持中文、英文）</p>
<p><a target="_blank" rel="noopener" href="http://patorjk.com/software/taag/">http://patorjk.com/software/taag/</a> （只支持英文）</p>
<p><a target="_blank" rel="noopener" href="https://www.degraeve.com/img2txt.php">https://www.degraeve.com/img2txt.php</a> （只支持图片）</p>
<p>获取图标粘贴到<code>banner.txt</code>文件中运行程序即可。</p>
<h2 id="PageHelper整合"><a href="#PageHelper整合" class="headerlink" title="PageHelper整合"></a>PageHelper整合</h2><p>官网地址：<a target="_blank" rel="noopener" href="https://pagehelper.github.io/">https://pagehelper.github.io/</a></p>
<h3 id="引入依赖"><a href="#引入依赖" class="headerlink" title="引入依赖"></a>引入依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="编写代码"><a href="#编写代码" class="headerlink" title="编写代码"></a>编写代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VipController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> VipService vipService;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping(&quot;/list/&#123;pageNo&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> PageInfo&lt;Vip&gt; <span class="title function_">list</span><span class="params">(<span class="meta">@PathVariable(&quot;pageNo&quot;)</span> Integer pageNo)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.设置当前页码和每页显示的记录条数</span></span><br><span class="line">        PageHelper.startPage(pageNo, Constant.PAGE_SIZE);</span><br><span class="line">        <span class="comment">// 2.获取数据（PageHelper会自动给SQL语句添加limit）</span></span><br><span class="line">        List&lt;Vip&gt; vips = vipService.findAll();</span><br><span class="line">        <span class="comment">// 3.将分页数据封装到PageInfo</span></span><br><span class="line">        PageInfo&lt;Vip&gt; vipPageInfo = <span class="keyword">new</span> <span class="title class_">PageInfo</span>&lt;&gt;(vips);</span><br><span class="line">        <span class="keyword">return</span> vipPageInfo;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>新建项目引入<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250601182848347.png" alt="image-20250601182848347"></p>
<p>然后用mybatis工程逆向生成，右击数据库的表选择<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250601182926687.png" alt="image-20250601182926687"></p>
<p>生成了以下这些文件：<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250602030329716.png" alt="image-20250602030329716"></p>
<p>然后把这些文件都重新写一下</p>
<p>Vipmapper.java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">VipMapper</span> &#123;</span><br><span class="line">  List&lt;Vip&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>VipMapper.xml:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.powernode.ph.repository.VipMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.powernode.ph.bean.Vip&quot;</span>&gt;</span></span><br><span class="line">    select * from t_vip</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>application.properties</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.application.name</span>=<span class="string">springboot3-23-ph</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 数据源配置</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">spring.datasource.type</span>=<span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">liuqi3711022</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/springboot</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># mybatis配置(说确保表里的cardnumber与bean的vip里的cardnumber对应上</span></span><br><span class="line"><span class="attr">mybatis.configuration.map-underscore-to-camel-case</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"># 这个是mapper配置文件</span></span><br><span class="line"><span class="attr">mybatis.mapper-locations</span>=<span class="string">classpath:/mapper/*.xml</span></span><br></pre></td></tr></table></figure>

<p>然后主入口程序：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这样可以扫描到vipmapper</span></span><br><span class="line"><span class="meta">@MapperScan(basePackages = &quot;com.powernode.ph.repository&quot;)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot323PhApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Springboot323PhApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>包的路径复制可以使用以下操作：右击文件夹然后选择copypath</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250602025817341.png" alt="image-20250602025817341"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250602025833119.png" alt="image-20250602025833119"></p>
<p>然后创建以下：<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250602030943496.png" alt="image-20250602030943496"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">VipService</span> &#123;</span><br><span class="line">    List&lt;Vip&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VipServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">VipService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> VipMapper vipMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Vip&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> vipMapper.selectAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后新建Controller包和VipController类，引入时可以设置每页显示的数量为一个常数，新建util包和Constant类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 系统常量类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Constant</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 每页显示3条记录</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">PAGE_SIZE</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VipController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> VipService vipService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// RESTFul编程风格</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/List/&#123;pageNo&#125;&quot;)</span><span class="comment">//这个括号会传进来页码</span></span><br><span class="line">    <span class="keyword">public</span> PageInfo&lt;Vip&gt; <span class="title function_">list</span><span class="params">(<span class="meta">@PathVariable</span> <span class="type">int</span> pageNo)</span>&#123;</span><br><span class="line">        <span class="comment">// 1.设置当前页码和每页显示的记录条数</span></span><br><span class="line">        <span class="comment">// 这条语句执行时PageHelper会自动为查询语句添加limit ，再执行下面的findAll，虽然查询语句是*，但不会全查</span></span><br><span class="line">        PageHelper.startPage(pageNo, Constant.PAGE_SIZE);</span><br><span class="line">        <span class="comment">// 2.查询数据</span></span><br><span class="line">        List&lt;Vip&gt; vips = vipService.findAll();</span><br><span class="line">        <span class="comment">// 3.将数据封装到PageInfo对象当中即可</span></span><br><span class="line">        PageInfo&lt;Vip&gt; vipPageInfo = <span class="keyword">new</span> <span class="title class_">PageInfo</span>&lt;&gt;(vips);</span><br><span class="line">        <span class="keyword">return</span> vipPageInfo;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后访问<a href="http://localhost:8080/list/1">http://localhost:8080/list/1</a></p>
<h2 id="web层响应结果封装"><a href="#web层响应结果封装" class="headerlink" title="web层响应结果封装"></a>web层响应结果封装</h2><p>web层其实就是Controller层，对于前后端分离的系统来说，为了降低沟通成本，我们有必要给前端系统开发人员返回统一格式的JSON数据。多数开发团队一般都会封装一个<code>R</code>对象来解决统一响应格式的问题。</p>
<h3 id="封装R对象"><a href="#封装R对象" class="headerlink" title="封装R对象"></a>封装R对象</h3><p>在上面的代码继续新建result包，新建一个类R</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 统一的WEB层返回数据。统一格式，降低前后端沟通成本。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;T&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">R</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="comment">// 响应的状态码: 200、500、404</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> code;</span><br><span class="line">    <span class="comment">// 响应的消息描述：成功，失败，删除失败，修改失败，添加失败</span></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    <span class="comment">// 响应的对象：支持任意类型的对象</span></span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 为了方便返回数据，一般这里的方法都是静态方法。</span></span><br><span class="line">    <span class="comment">// 方法一般包括两大类：一类是成功，一类是失败。（重载）</span></span><br><span class="line">    <span class="comment">// 响应成功的消息，但是不携带任何数据，因为不一定每次返回R对象都会有数据data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; R&lt;T&gt; <span class="title function_">OK</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> R.&lt;T&gt;builder()</span><br><span class="line">                .code(<span class="number">200</span>)</span><br><span class="line">                .msg(<span class="string">&quot;成功&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 响应成功的消息，携带数据data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; R&lt;T&gt; <span class="title function_">OK</span><span class="params">(T data)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> R.&lt;T&gt;builder()</span><br><span class="line">                .code(<span class="number">200</span>)</span><br><span class="line">                .msg(<span class="string">&quot;成功&quot;</span>)</span><br><span class="line">                .data(data)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 响应失败的消息。默认的code是400，失败的消息：失败</span></span><br><span class="line">    <span class="comment">// 失败是不可能携带数据。</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; R&lt;T&gt; <span class="title function_">FAIL</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> R.&lt;T&gt;builder()</span><br><span class="line">                .code(<span class="number">400</span>)</span><br><span class="line">                .msg(<span class="string">&quot;失败&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 响应失败的消息，controller层的程序员可以通过此方法指定特定的code和特定的消息。</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; R&lt;T&gt; <span class="title function_">FAIL</span><span class="params">(<span class="type">int</span> code, String msg)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> R.&lt;T&gt;builder()</span><br><span class="line">                .code(code)</span><br><span class="line">                .msg(msg)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果出现了builder错误，就看<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_69669164/article/details/146015501?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-1-146015501-blog-134867178.235%5Ev43%5Epc_blog_bottom_relevance_base3&spm=1001.2101.3001.4242.2&utm_relevant_index=3">https://blog.csdn.net/weixin_69669164/article/details/146015501?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-1-146015501-blog-134867178.235^v43^pc_blog_bottom_relevance_base3&amp;spm=1001.2101.3001.4242.2&amp;utm_relevant_index=3</a></p>
<p>测试数据</p>
<p>再新建个bean的User</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后vipController添加</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/detail&quot;)</span></span><br><span class="line"><span class="keyword">public</span> R&lt;User&gt; <span class="title function_">detail</span><span class="params">()</span>&#123;<span class="comment">// 是下面return返回的</span></span><br><span class="line">    <span class="comment">// 这个数据是service返回的数据</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;jackson&quot;</span>, <span class="number">20</span>);</span><br><span class="line">    <span class="comment">// 相应给前端</span></span><br><span class="line">    <span class="comment">//return R.OK(user);</span></span><br><span class="line">    <span class="comment">//return R.OK();// 不携带数据</span></span><br><span class="line">    <span class="comment">//return R.FAIL();</span></span><br><span class="line">    <span class="keyword">return</span> R.FAIL(<span class="number">404</span>, <span class="string">&quot;资源找不到&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="改进R对象"><a href="#改进R对象" class="headerlink" title="改进R对象"></a>改进R对象</h3><p>以上<code>R</code>对象存在的问题是，难以维护，项目中可能会出现很多这样的代码：R.FAIL(400, “修改失败”)。</p>
<p>引入枚举类型进行改进：创建enums包和codeEnum类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 专门维护code+msg的一个枚举类型</span></span><br><span class="line"><span class="comment">//@Data 不能用data，就需要手动添加setter getter注解或者方法</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="comment">//@Setter这里也不能添加</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">CodeEnum</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ;</span></span><br><span class="line">    <span class="comment">//这地方没有写枚举值，那么由于后面有其他代码，这里至少要写一个“;”</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//这些会传到下面的字段上，统一去维护</span></span><br><span class="line">    OK(<span class="number">200</span>, <span class="string">&quot;成功&quot;</span>),</span><br><span class="line">    FAIL(<span class="number">400</span>, <span class="string">&quot;失败&quot;</span>),</span><br><span class="line">    BAD_REQUEST(<span class="number">400</span>, <span class="string">&quot;请求错误&quot;</span>),</span><br><span class="line">    NOT_FOUND(<span class="number">404</span>, <span class="string">&quot;Not Found&quot;</span>),</span><br><span class="line">    INTERNAL_ERROR(<span class="number">500</span>, <span class="string">&quot;内部服务器错误&quot;</span>),</span><br><span class="line">    MODIFICATION_FAILED(<span class="number">400</span>, <span class="string">&quot;修改失败&quot;</span>),</span><br><span class="line">    DELETION_FAILED(<span class="number">400</span>, <span class="string">&quot;删除失败&quot;</span>),</span><br><span class="line">    CREATION_FAILED(<span class="number">400</span>, <span class="string">&quot;创建失败&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// javase当中详细讲过枚举类型</span></span><br><span class="line">    <span class="comment">// 枚举类型当中可以有属性</span></span><br><span class="line">    <span class="comment">// 枚举类型当中可以有构造方法</span></span><br><span class="line">    <span class="comment">// 枚举类型当中可以有setter和getter方法。</span></span><br><span class="line">    <span class="comment">// 在枚举类型当中有一个语法要求，枚举的大括号一开始的位置必须编写枚举值。</span></span><br><span class="line">    <span class="comment">// 每一个枚举值就是一个枚举类型的实例。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Setter</span><span class="comment">// 只能加在字段上</span></span><br><span class="line">    <span class="meta">@Getter</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> code;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Setter</span></span><br><span class="line">    <span class="meta">@Getter</span></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Season</span> &#123;</span><br><span class="line">    <span class="comment">// 这些就是枚举值</span></span><br><span class="line">    <span class="comment">// 其中每一个枚举值都是 Season类型的对象/实例。</span></span><br><span class="line">    SPRING, SUMMER, AUTUMN, WINTER;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 枚举值下面如果没有代码，枚举值列表最后的那个“;”可以省略。</span></span><br><span class="line">    <span class="comment">// 枚举值下面如果有代码，则枚举值列表最后的&quot;;&quot;是不能省略的。</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>改进R：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Builder</span> <span class="comment">// 建造模式</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">R</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="comment">// 响应的状态码: 200、500、404</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> code;</span><br><span class="line">    <span class="comment">// 响应的消息描述：成功，失败，删除失败，修改失败，添加失败</span></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    <span class="comment">// 响应的对象：支持任意类型的对象</span></span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 为了方便返回数据，一般这里的方法都是静态方法。</span></span><br><span class="line">    <span class="comment">// 方法一般包括两大类：一类是成功，一类是失败。（重载）</span></span><br><span class="line">    <span class="comment">// 响应成功的消息，但是不携带任何数据</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; R&lt;T&gt; <span class="title function_">OK</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> R.&lt;T&gt;builder()</span><br><span class="line">                .code(CodeEnum.OK.getCode())</span><br><span class="line">                .msg(CodeEnum.OK.getMsg())</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 响应成功的消息，携带数据data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; R&lt;T&gt; <span class="title function_">OK</span><span class="params">(T data)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> R.&lt;T&gt;builder()</span><br><span class="line">                .code(CodeEnum.OK.getCode())</span><br><span class="line">                .msg(CodeEnum.OK.getMsg())</span><br><span class="line">                .data(data)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 响应失败的消息。默认的code是400，失败的消息：失败</span></span><br><span class="line">    <span class="comment">// 失败是不可能携带数据。</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; R&lt;T&gt; <span class="title function_">FAIL</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> R.&lt;T&gt;builder()</span><br><span class="line">                .code(CodeEnum.FAIL.getCode())</span><br><span class="line">                .msg(CodeEnum.FAIL.getMsg())</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 响应失败的消息，controller层的程序员可以通过此方法指定特定的code和特定的消息。</span></span><br><span class="line">    <span class="comment">/*public static &lt;T&gt; R&lt;T&gt; FAIL(int code, String msg) &#123;</span></span><br><span class="line"><span class="comment">        return R.&lt;T&gt;builder()</span></span><br><span class="line"><span class="comment">                .code(code)</span></span><br><span class="line"><span class="comment">                .msg(msg)</span></span><br><span class="line"><span class="comment">                .build();</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 改成了传入一个codeEnum对象，然后调用里面的方法，获得code和msg</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; R&lt;T&gt; <span class="title function_">FAIL</span><span class="params">(CodeEnum codeEnum)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> R.&lt;T&gt;builder()</span><br><span class="line">                .code(codeEnum.getCode())</span><br><span class="line">                .msg(codeEnum.getMsg())</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>修改VipController</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/detail&quot;)</span></span><br><span class="line"><span class="keyword">public</span> R&lt;User&gt; <span class="title function_">detail</span><span class="params">()</span>&#123;<span class="comment">// 是下面return返回的</span></span><br><span class="line">    <span class="comment">// 这个数据是service返回的数据</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;jackson&quot;</span>, <span class="number">20</span>);</span><br><span class="line">    <span class="comment">// 相应给前端</span></span><br><span class="line">    <span class="comment">//return R.OK(user);</span></span><br><span class="line">    <span class="comment">//return R.OK();// 不携带数据</span></span><br><span class="line">    <span class="comment">//return R.FAIL();</span></span><br><span class="line">    <span class="comment">//return R.FAIL(404, &quot;资源找不到&quot;);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//改进后的写法：这样就传过去了一个codeEnum对象到Rjava里的方法上</span></span><br><span class="line">    <span class="keyword">return</span> R.FAIL(CodeEnum.NOT_FOUND);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="事务管理"><a href="#事务管理" class="headerlink" title="事务管理"></a>事务管理</h2><p>SpringBoot中的事务管理仍然使用的Spring框架中的事务管理机制，在代码实现上更为简单了。不需要手动配置事务管理器，SpringBoot自动配置完成了。我们只需要使用<code>@Transactional</code>注解标注需要控制事务的方法即可。另外事务的特性等仍然延用Spring框架。大家可以在老杜发布的Spring视频教程中详细学习事务管理机制。以下代码是在SpringBoot框架中进行的事务控制：</p>
<p>创建bean包account类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Account</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String actNo; <span class="comment">// 数据库字段名 act_no</span></span><br><span class="line">    <span class="keyword">private</span> Double balance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>创建repository包AccountMapper类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AccountMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据账号获取账户信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> actNo 账号</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 账户对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Account <span class="title function_">selectByActNo</span><span class="params">(String actNo)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新账户信息，注意账号不能更新，其他字段都可以更新。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> account 账户对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 1表示更新成功</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">update</span><span class="params">(Account account)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后使用mybatis插件生成mapper文件<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250603015727039.png" alt="image-20250603015727039"></p>
<p>生成到resources的mapper文件</p>
<p>然后挨个生成查询语句</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250603015909182.png" alt="image-20250603015909182"></p>
<p>AccountMapper.xml:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.powernode.transaction.repository.AccountMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span>&gt;</span></span><br><span class="line">        update t_act set balance = #&#123;balance&#125; where act_no = #&#123;actNo&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByActNo&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Account&quot;</span>&gt;</span></span><br><span class="line">        select * from t_act where act_no = #&#123;actNo&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>入口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//扫描</span></span><br><span class="line"><span class="meta">@MapperScan(basePackages = &quot;com.powernode.transaction.repository&quot;)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Spingboot324TransactionApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Spingboot324TransactionApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配置文件：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据源</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.type</span>=<span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">liuqi3711022</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/springboot</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># mybatis</span></span><br><span class="line"><span class="attr">mybatis.mapper-locations</span>=<span class="string">classpath:/mapper/*.xml</span></span><br><span class="line"><span class="attr">mybatis.configuration.map-underscore-to-camel-case</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">mybatis.type-aliases-package</span>=<span class="string">com.powernode.transaction.bean</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server.error.include-message</span>=<span class="string">always</span></span><br></pre></td></tr></table></figure>

<p>在service下新建AccountService</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 转账的业务方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fromActNo 转出账号</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> toActNo 转入账号</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> money 转账金额</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(String fromActNo, String toActNo, <span class="type">double</span> money)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>实现接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRED)</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AccountMapper accountMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(String fromActNo, String toActNo, <span class="type">double</span> money)</span> &#123;</span><br><span class="line">        <span class="comment">// 转账的业务逻辑</span></span><br><span class="line">        <span class="comment">// 判断转出账户的余额是否足够</span></span><br><span class="line">        <span class="type">Account</span> <span class="variable">fromAct</span> <span class="operator">=</span> accountMapper.selectByActNo(fromActNo);</span><br><span class="line">        <span class="keyword">if</span>(fromAct.getBalance() &lt; money)&#123;</span><br><span class="line">            <span class="comment">//钱少于余额时报错</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TransferException</span>(<span class="string">&quot;余额不足&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 执行到这说明余额充足</span></span><br><span class="line">        <span class="type">Account</span> <span class="variable">toAct</span> <span class="operator">=</span> accountMapper.selectByActNo(toActNo);</span><br><span class="line"></span><br><span class="line">        fromAct.setBalance(fromAct.getBalance() - money);</span><br><span class="line">        toAct.setBalance(toAct.getBalance() + money);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 更新数据库</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> accountMapper.update(fromAct);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 模拟异常</span></span><br><span class="line">        <span class="comment">/*if(1 == 1)&#123;</span></span><br><span class="line"><span class="comment">            throw new TransferException(&quot;转账失败&quot;);</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line"></span><br><span class="line">        count += accountMapper.update(toAct);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果上面更新的count是两条就说明成功了，否则失败</span></span><br><span class="line">        <span class="keyword">if</span>(count != <span class="number">2</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TransferException</span>(<span class="string">&quot;转账失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>新建自定义异常，在exception包下建TransferException类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 转账异常</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TransferException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TransferException</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TransferException</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>然后是控制层</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AccountService accountService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/transfer&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">transfer</span><span class="params">(String fromActNo, String toActNo, <span class="type">double</span> money)</span> &#123;</span><br><span class="line">        <span class="comment">// 如果出现异常，springmvc没有对这个异常进行处理的话，springboot就会接管这个异常处理</span></span><br><span class="line">        accountService.transfer(fromActNo, toActNo, money);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后再resources的templates里弄三个html，error index success</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>fail<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--使用message时需要在配置文件里配置server.error.include-message=always--&gt;</span></span><br><span class="line">[[$&#123;message&#125;]]</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/transfer&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    转出账号：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;fromActNo&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    转入账号：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;toActNo&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    转账金额：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;money&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;转账&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>success<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>转账成功<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>然后需要为index配置东西，建config包webconfig类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> &#123;</span><br><span class="line">        registry.addViewController(<span class="string">&quot;/index&quot;</span>).setViewName(<span class="string">&quot;index&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后访问<a href="http://localhost:8080/index">http://localhost:8080/index</a></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250603031017672.png" alt="image-20250603031017672"></p>
<h2 id="SpringBoot打war包"><a href="#SpringBoot打war包" class="headerlink" title="SpringBoot打war包"></a>SpringBoot打war包</h2><p>第一步：将打包方式设置为war</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250603175623666.png" alt="image-20250603175623666"></p>
<p>第二步：排除内嵌tomcat</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--内嵌的tomcat服务器排除掉--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>第三步：添加servlet api依赖（引入tomcat，但scope设置为provided，这样这个tomcat服务器就不会打入war包了）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--额外添加一个tomcat服务器，实际上是为了添加servlet api。scope设置为provided表示这个不会被打入war包当中。--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>第四步：修改主类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MapperScan(basePackages = &quot;com.powernode.transaction.repository&quot;)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot324TransactionApplication</span> <span class="keyword">extends</span> <span class="title class_">SpringBootServletInitializer</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> SpringApplicationBuilder <span class="title function_">configure</span><span class="params">(SpringApplicationBuilder application)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> application.sources(Springboot324TransactionApplication.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Springboot324TransactionApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>第五步：把target文件删掉，<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250603180308269.png" alt="image-20250603180308269">执行clean和package命令打war包</p>
<p>生成在这里<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250603180458371.png" alt="image-20250603180458371"></p>
<p>第六步：配置tomcat环境，将war包放入到webapps目录下，启动tomcat服务器，并访问。</p>
<p>现在不叫javaee了叫JakarataEE 9</p>
<p><a target="_blank" rel="noopener" href="https://tomcat.apache.org/%E9%80%89tomcat10%E7%84%B6%E5%90%8E![image-20250603181306099](https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250603181306099.png)">https://tomcat.apache.org/选tomcat10然后![image-20250603181306099](https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250603181306099.png)</a></p>
<p>然后解压配置环境</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250603182415314.png" alt="image-20250603182415314"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250603181829786.png" alt="image-20250603181829786"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250603182457572.png" alt="image-20250603182457572"></p>
<p>然后以管理员身份运行</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250603183104661.png" alt="image-20250603183104661"></p>
<p>如果乱码了需要去conf文件下的logging.properties配置，把所有utf-8改成gbk编码</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250603183429762.png" alt="image-20250603183429762"></p>
<p>然后关闭窗口，把之前的war包扔到tomcat的webapps文件夹里，然后再次启动startup.bat就开始自动部署，然后访问<a href="http://localhost:8080/springboot3-24-transaction-0.0.1-SNAPSHOT/index">http://localhost:8080/springboot3-24-transaction-0.0.1-SNAPSHOT/index</a></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/NoteImg/Spring%20Boot%203/Spring%20Boot%203/image-20250603183751064.png" alt="image-20250603183751064"></p>
<h2 id="SpringBoot的日志处理"><a href="#SpringBoot的日志处理" class="headerlink" title="SpringBoot的日志处理"></a>SpringBoot的日志处理</h2><h3 id="日志概述"><a href="#日志概述" class="headerlink" title="日志概述"></a>日志概述</h3><p>用system.out.println输出到控制台没有隐私等问题，其他的等后面再看吧</p>
<h3 id="日志框架包括抽象层面的和具体层面的"><a href="#日志框架包括抽象层面的和具体层面的" class="headerlink" title="日志框架包括抽象层面的和具体层面的"></a>日志框架包括抽象层面的和具体层面的</h3><p>抽象方面的：SFL4J，Commons logging</p>
<p>具体方面的：log4j，log4j2，logback（SpringBoot默认集成的），JUL</p>
<h3 id="日志级别概述："><a href="#日志级别概述：" class="headerlink" title="日志级别概述："></a>日志级别概述：</h3><p>不同日志级别反应的严重程度不一样</p>
<p>1.TRACE:这是最低级别的日志信息，用于记录最详细的信息，通常是在调用应用时使用</p>
<p>2.DEBUG：用于记录程序运行时的详细信息，比如变量的值，进入或退出某个方法等，主要用于开发阶段的调试</p>
<p>3.INFO：记录应用程序的一般信息，如系统启动、服务初始化完成等，表示程序运行正常</p>
<p>4.WARN：警告信息，表示可能存在问题或者异常的情况，但是还不至于导致应用停止工作</p>
<p>5.ERROR：错误信息，表示发生了一个错误事件，该错误可能会导致某些功能无法正常工作</p>
<p>在生产环境中，我们可能会将日志级别设置为INFO或更高级别，以避免输出过多的调试信息。这也是SpringBoot默认的日志级别</p>
<p>在开发或测试环境中，降低为DEBUG甚至TRACE，便于进行详细的错误追踪和调试</p>
<p>日志级别从低到高是1-5.级别越低打印的日志信息就越多</p>
<h3 id="更改日志级别："><a href="#更改日志级别：" class="headerlink" title="更改日志级别："></a>更改日志级别：</h3><p>新建工程然后引用web和lombok，在入口程序这样写</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span> <span class="comment">// 这是lombok的一个注解，这个注解的作用是：为我们维护一个日志对象 log</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot325LogApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		SpringApplication.run(Springboot325LogApplication.class, args);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 直接使用lombok的日志对象 log 记录日志</span></span><br><span class="line">		<span class="comment">// 只能输出下面三个是因为默认是info，所以最多输出到info不能再多了</span></span><br><span class="line">		log.trace(<span class="string">&quot;trace级别日志&quot;</span>);</span><br><span class="line">		log.debug(<span class="string">&quot;debug级别日志&quot;</span>);</span><br><span class="line">		log.info(<span class="string">&quot;info级别日志&quot;</span>);</span><br><span class="line">		log.warn(<span class="string">&quot;warn级别日志&quot;</span>);</span><br><span class="line">		log.error(<span class="string">&quot;error级别日志&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>配置级别：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置日志级别</span></span><br><span class="line"><span class="attr">logging.level.root</span>=<span class="string">DEBUG</span></span><br></pre></td></tr></table></figure>

<h3 id="丰富启动日志"><a href="#丰富启动日志" class="headerlink" title="丰富启动日志"></a>丰富启动日志</h3><p>SpringBoot项目启动过程中的日志的丰富，启动完成后，项目进入正常运行阶段，这两个配置没用</p>
<p>这两个配置不会对我们程序员手动记录的日志起作用</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">trace</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">debug</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure>

<p>trace&#x3D;true:启动SpringBoot的启动跟踪，生成包含启动信息的详细跟踪文件，内容是包含debug&#x3D;true输出的内容</p>
<p>debug&#x3D;true：启动SpringBoot的调用模式，增加启动日志的详细程度并显示自动配置报告</p>
<h3 id="日志的粗细粒度"><a href="#日志的粗细粒度" class="headerlink" title="日志的粗细粒度"></a>日志的粗细粒度</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 测试日志控制的粗细粒度</span></span><br><span class="line"><span class="comment"># 全局的日志级别设置为ERROR</span></span><br><span class="line"><span class="attr">logging.level.root</span>=<span class="string">ERROR</span></span><br><span class="line"><span class="comment"># 设置某个包下的所有类的日志级别为INFO</span></span><br><span class="line"><span class="attr">logging.level.com.powernode.springboot.controller</span>=<span class="string">INFO</span></span><br><span class="line"><span class="comment"># 设置某个类的日志级别为TRACE</span></span><br><span class="line"><span class="attr">logging.level.com.powernode.springboot.service.impl</span>=<span class="string">TRACE</span></span><br></pre></td></tr></table></figure>

<p>怎么在项目中打印sql语句？默认级别是info，不会显示sql，但想降低级别又不应用到全局，只sql相关的使用debug</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#全局的日志级别</span></span><br><span class="line"><span class="attr">logging.level.root</span>=<span class="string">INFO</span></span><br><span class="line"><span class="comment"># mapper相关的日志界别（xxx是文件路径</span></span><br><span class="line"><span class="attr">logging.level.com.powernode.xxx.repository</span>=<span class="string">DEBUG</span></span><br></pre></td></tr></table></figure>

<h3 id="日志输出到文件"><a href="#日志输出到文件" class="headerlink" title="日志输出到文件"></a>日志输出到文件</h3><p>这两种方式不可共存</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 以下的两种实现方式不可共存，其实是SpringBoot框架设计的一个小bug，可以在github提交一下</span></span><br><span class="line"><span class="comment">#将日志输出到文件，第一种配置方式：使用path</span></span><br><span class="line"><span class="comment"># 自动在指定的目录下生成一个固定不变的文件：spring.log，名字不可配置</span></span><br><span class="line"><span class="comment">#路径可以随便配置，可以是硬盘上的任意有权限的路径</span></span><br><span class="line"><span class="attr">logging.file.path</span>=<span class="string">./log/</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#将日志输出到文件，第二种配置方式：使用name</span></span><br><span class="line"><span class="comment"># name 和 path 的配置同时存在的话，name生效path无效（path和name不能同时使用）</span></span><br><span class="line"><span class="comment"># 这种方式只能设置日志文件的名字，无法设置日志文件存储的位置</span></span><br><span class="line"><span class="comment"># 日志文件生成到项目的根路径下</span></span><br><span class="line"><span class="attr">logging.file.name</span>=<span class="string">my.log</span></span><br></pre></td></tr></table></figure>

<h3 id="滚动日志"><a href="#滚动日志" class="headerlink" title="滚动日志"></a>滚动日志</h3><p>滚动日志是一种日志管理机制，用于防止日志文件无线增长，通过将日志文件分割成多个文件，每个文件只包含一定时间段或大小的日志记录，滚动日志可以帮助你更好地管理和维护日志文件，避免单个日志文件过大导致难以处理</p>
<p>但这个滚动策略只适合于logback框架，如果使用log4j2就需要单独在log4j2.xml里配置</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#滚动日志配置</span></span><br><span class="line"><span class="comment"># 日志文件达到多大时进行归档，也就是达到100kb就不再增长然后自动打一个压缩包</span></span><br><span class="line"><span class="attr">logging.logback.rollingpolicy.max-file-size</span>=<span class="string">100KB</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 所有的归档日志文件总共达到多大时进行删除，默认是0b表示不删除</span></span><br><span class="line"><span class="attr">logging.logback.rollingpolicy.total-size-cap</span>=<span class="string">50GB</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 归档日志文件最多保留几天</span></span><br><span class="line"><span class="attr">logging.logback.rollingpolicy.max-history</span>=<span class="string">60</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 启动项目时是否要清理归档日志文件</span></span><br><span class="line"><span class="attr">logging.logback.rollingpolicy.clean-history-on-start</span>=<span class="string">false</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 归档日志文件的格式，第一个$取的是spring.log那个文件名放在这，然后年月日，gz是linux中的压缩包扩展名</span></span><br><span class="line"><span class="attr">logging.logback.rollingpolicy.file-name-pattern</span>=<span class="string">$&#123;LOG_FILE&#125;.$d&#123;yyyy-MM-dd&#125;.%i.gz</span></span><br></pre></td></tr></table></figure>

<h3 id="日志框架切换"><a href="#日志框架切换" class="headerlink" title="日志框架切换"></a>日志框架切换</h3><p>也就是排除logback的依赖然后添加别的</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--排除默认的日志依赖--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--使用log4j2日志依赖--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-log4j2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注意：一旦切换log4j2的日志框架，对于之前的配置来说，只有logback的滚动日志不再生效，其他配置仍然生效，如果要在log4j2中进行滚动日志，需要编写log4j2相关的xml配置文件，比较麻烦</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://github.com/Shelter67">Shelter</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://localhost:4000/posts/d6ebbbdf.html">http://localhost:4000/posts/d6ebbbdf.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://localhost:4000" target="_blank">Shelter</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/SSM/">SSM</a><a class="post-meta__tags" href="/tags/Java/">Java</a><a class="post-meta__tags" href="/tags/boot/">boot</a></div><div class="post-share"><div class="social-share" data-image="https://cdn.dreamshelter.cn/blog/source/img/cover/18.png" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/336277b5.html" title="动力云客项目"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/blog/source/img/cover/2.jpg" onerror="onerror=null;src='https://cdn.dreamshelter.cn/blog/source/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">动力云客项目</div></div><div class="info-2"><div class="info-item-1">动力云客项目1.  项目准备项目数据库导入sql文件 前端项目安装nodejs工具，npm是nodejs自带的 下载：https://nodejs.org/en/download 安装：解压即完成安装；node-v20.10.0-win-x64.zip版本； Nodejs环境变量配置在 D:\course\tool\node-v20.10.0-win-x64 下创建2个文件夹：  node_global （依赖库） node_cache （缓存）  然后在当前目录下cmd进入dos窗口，执行：  npm config set prefix “D:\course\tool\node-v20.10.0-win-x64\node_global”  npm config set cache “D:\course\tool\node-v20.10.0-win-x64\node_cache”  然后你可以查一下，看看有没有设置成功：  npm config get prefix npm config get cache  在windows环境变量配置Path，在path变量中添加如下路径： ...</div></div></div></a><a class="pagination-related" href="/posts/aa9df247.html" title="idea笔记"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/blog/source/img/cover/17.jpg" onerror="onerror=null;src='https://cdn.dreamshelter.cn/blog/source/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">idea笔记</div></div><div class="info-2"><div class="info-item-1">常用快捷键：  内置的模板：   </div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/da77c56c.html" title="MVC架构设计模式"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/blog/source/img/cover/4.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-11-15</div><div class="info-item-2">MVC架构设计模式</div></div><div class="info-2"><div class="info-item-1">不使用mvc架构的缺陷在不使用MVC架构模式的前提下，完成银行账户转账。分析这个程序存在哪些问题?  缺点1&gt;代码的复用性太差。(代码的重用性太差) 导致缺点1的原因? 因为没有进行”职能分工”，没有独立组件的概念，所以没有办法进行代码复用。代码和代码之间的耦合度太高，扩展力太差。  缺点2&gt;耦合度高，导致了代码很难护展。  缺点3&gt;操作数据库的代码和业务逻辑混杂在一起，很容易出错。编写代码的时候很容易出错，无法专注业务逻辑的编写。   分析以下AccountTransferServlet他都负责了什么?   负责了数据接收    负责了核心的业务处理    负责了数据库表中数据的CRUD操作 (Create【增】 Retrieve【査】 Update【改】 Delete【删】)    负责了页面的数据展示    公司中一般都有很多员工，每个员工都各司其职，为什么要这样?	保洁阿姨负责打扫卫生	杜老师负责教学大纲的指定	郭老师负责上课	王老师负责学习就业*我们公司只有一个员工。这个员工负责所有的事情。生病了。–&gt;公司倒闭了。 理论基础 javaEE设计模式...</div></div></div></a><a class="pagination-related" href="/posts/9c933fc9.html" title="学习Maven"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/blog/source/img/cover/14.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-04-14</div><div class="info-item-2">学习Maven</div></div><div class="info-2"><div class="info-item-1">maven简介https://www.bilibili.com/video/BV1uApMeWErY?spm_id_from=333.788.videopod.sections&amp;vd_source=b0128143be22d1783a42f5fbf34d9d25 pom.xml 定义了项目的配置、依赖、插件、以及构建的过程 Maven仓库就是存放jiar包的地方，按照作用范围可以分为  本地仓库  就是电脑上的本地目录，默认在  一定要是一个没有中文的路径下。    远程仓库  一般是一个公司或者组织内部搭建的一个仓库，用来给内部的项目提供统一的依赖管理，避免jar包的重复下载 也可以通过中央仓库下载，是Maven官方维护的一个仓库 ，开源jar包都可以在这里找到   私服   maven安装和下载Maven官网：https://maven.apache.org/ Maven下载地址：https://maven.apache.org/download.cgi Nexus下载地址：https://help.sonatype.com/en/download.html 环境变量...</div></div></div></a><a class="pagination-related" href="/posts/7d713e54.html" title="Spirng速成"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/blog/source/img/cover/28.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-04-18</div><div class="info-item-2">Spirng速成</div></div><div class="info-2"><div class="info-item-1"> 给分成了三层，后面的mapper就是mybatis的，如果要获取其他对象就需要在这里面创建类，比如BookService2 b &#x3D; new BookService2这样，但只要一改名字，就需要把所有的对象名字都改，这样耦合度太高。就需要用到spring容器来进行统一管理 ioc就是控制反转的意思，把创建对象的权利交给spring容器  会有一个配置文件叫applicationcontext.xml，里面存放了bean这个，id就是名字，class是类型，然后他自动通过反射机制创建对象，然后放到spring容器里，这个容器可以理解成一个筐，苹果放一个筐梨放一个筐，然后再从这个容器里读取到java程序    1234&lt;bean id = &quot;b&quot; class = &#x27;com.msb.pojo.Book&#x27;&gt;	&lt;property name=&quot;id&quot; value=&quot;1&quot;&gt;&lt;/property&gt;    &lt;property name=&quot;name&quot;...</div></div></div></a><a class="pagination-related" href="/posts/4d910bb8.html" title="Servlet-JSP-课堂笔记"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/blog/source/img/cover/25.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-11-14</div><div class="info-item-2">Servlet-JSP-课堂笔记</div></div><div class="info-2"><div class="info-item-1">关于直播 什么时间直播？ 晚上8:00到10:00   每周直播几天？ 3天（周一、周三、周五） 本周比较特殊：周四周五周六三天直播，从下周开始就是一三五直播。   直播什么内容？ 从JavaWEB开始。（Servlet为核心，从Servlet开始学习。） JSP（JSP使用较少了，但是还有用，所以时间上少一些。快速地学习一下JSP。） AJAX（异步通信技术。） jQuery（JavaScript库。） MyBatis Spring SpringMVC SpringBoot SpringCloud ….    需要提前准备了哪些技术，接下来的课才能听懂？ JavaSE（Java语言的标准版，Java提供的最基本的类库） Java的开发环境搭建 Java的基础语法 Java的面向对象 数组 常用类 异常 集合 多线程 IO流 反射机制 注解Annotation …..   MySQL（数据库） 最基本的要求是：能够编写增删改查等简单的SQL语句即可。   JDBC（Java语言链接数据库） 这是一套Java语言链接数据库的接口。   WEB前端（会一些） HTML（网页） CSS...</div></div></div></a><a class="pagination-related" href="/posts/d2dc75e3.html" title="老杜MyBatis"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/blog/source/img/cover/5.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-12-10</div><div class="info-item-2">老杜MyBatis</div></div><div class="info-2"><div class="info-item-1">一、MyBatis概述1.1 框架 在文献中看到的framework被翻译为框架 Java常用框架： SSM三大框架：Spring + SpringMVC + MyBatis SpringBoot SpringCloud 等。。   框架其实就是对通用代码的封装，提前写好了一堆接口和类，我们可以在做项目的时候直接引入这些接口和类（引入框架），基于这些现有的接口和类进行开发，可以大大提高开发效率。 框架一般都以jar包的形式存在。(jar包中有class文件以及各种配置文件等。) SSM三大框架的学习顺序：MyBatis、Spring、SpringMVC（仅仅是建议）  1.2 三层架构  表现层（UI）：直接跟前端打交互（一是接收前端ajax请求，二是返回json数据给前端） 业务逻辑层（BLL）：一是处理表现层转发过来的前端请求（也就是具体业务），二是将从持久层获取的数据返回到表现层。 数据访问层（DAL）：直接操作数据库完成CRUD，并将获得的数据返回到上一层（也就是业务逻辑层）。 Java持久层框架： MyBatis Hibernate（实现了JPA规范） jOOQ Guz...</div></div></div></a><a class="pagination-related" href="/posts/e25feb6e.html" title="黑马程序员SSM"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/blog/source/img/cover/22.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-03</div><div class="info-item-2">黑马程序员SSM</div></div><div class="info-2"><div class="info-item-1"> spring核心概念   目标:充分解耦 使用IoC容器管理bean(IoC) 在IoC容器内将有依赖关系的bean进行关系绑定(DI)   最终效果 使用对象时不仅可以直接从IoC容器中获取，并且获取到的bean已经绑定了所有的依赖关系    IoC入门案例思路分析 管理什么?(Service与Dao) 如何将被管理的对象告知IoC容器?(配置) 被管理的对象交给IoC容器，如何获取到IoC容器?(接口) IoC容器得到后，如何从容器中获取bean?(接口方法) 使用Spring导入哪些坐标?(pom.xm1)  先导入spring依赖，然后新建 这个就是spring的配置文件，取名applicationContext.xml 123456&lt;!--1.导入spring的坐标spring-context，对应版本是5.2.10.RELEASE--&gt;&lt;!--2.配置bean，id随便写，class对应要管理的对象--&gt;&lt;bean id=&quot;bookDao&quot; class=&quot;com.itheima.dao.impl.BookD...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/blog/source/img/touxiang.jpg" onerror="this.onerror=null;this.src='https://cdn.dreamshelter.cn/blog/source/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Shelter</div><div class="author-info-description">记录自己的成长日志</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">29</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">35</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Shelter67"><i class="fab fa-github"></i><span>没有什么star的github</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/Shelter67" target="_blank" title="GitHub"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:1830191738@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a><a class="social-icon" href="https://space.bilibili.com/8416212" target="_blank" title="Bilibili"><i class="fab fa-bilibili" style="color: #fb7299;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的小小博客！都是基于hexo框架使用，魔改了一些地方，表现得有些二次元，有个博客希望能在未来工作简历上成为加分项吧，但是弄起来还真的挺好玩的</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC1%E7%AB%A0-First-Spring-Boot"><span class="toc-number">1.</span> <span class="toc-text">第1章 First Spring Boot</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A4%E8%AF%86Spring-Boot"><span class="toc-number">1.1.</span> <span class="toc-text">认识Spring Boot</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E5%82%A8%E5%A4%87"><span class="toc-number">1.2.</span> <span class="toc-text">知识储备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E"><span class="toc-number">1.3.</span> <span class="toc-text">主要版本说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#First-Spring-Boot"><span class="toc-number">1.4.</span> <span class="toc-text">First Spring Boot</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%A9%BA%E7%9A%84%E5%B7%A5%E7%A8%8B%EF%BC%8C%E5%B9%B6%E8%AE%BE%E7%BD%AEJDK%E7%89%88%E6%9C%AC21%EF%BC%88Spring-Boot-3%E8%A6%81%E6%B1%82JDK%E6%9C%80%E4%BD%8E%E7%89%88%E6%9C%AC%E6%98%AF17%EF%BC%89"><span class="toc-number">1.4.1.</span> <span class="toc-text">第一步：创建一个空的工程，并设置JDK版本21（Spring Boot 3要求JDK最低版本是17）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E8%AE%BE%E7%BD%AEmaven"><span class="toc-number">1.4.2.</span> <span class="toc-text">第二步：设置maven</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAMaven%E6%A8%A1%E5%9D%97-sb3-01-first-web"><span class="toc-number">1.4.3.</span> <span class="toc-text">第三步：创建一个Maven模块 sb3-01-first-web</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%E6%89%93%E5%BC%80Spring-Boot-3%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%EF%BC%8C%E6%8C%89%E7%85%A7%E6%96%87%E6%A1%A3%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%BF%9B%E8%A1%8C"><span class="toc-number">1.4.4.</span> <span class="toc-text">第四步：打开Spring Boot 3官方文档，按照文档一步一步进行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E6%AD%A5%EF%BC%9A%E8%A6%81%E4%BD%BF%E7%94%A8Spring-Boot-3%EF%BC%8C%E9%9C%80%E8%A6%81%E7%BB%A7%E6%89%BF%E8%BF%99%E4%B8%AA%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%E3%80%82%E4%BB%8E%E5%AE%98%E6%96%B9%E6%8C%87%E5%AF%BC%E6%96%87%E6%A1%A3%E4%B8%AD%E5%A4%8D%E5%88%B6%E4%BB%A5%E4%B8%8B%E5%86%85%E5%AE%B9%EF%BC%9A"><span class="toc-number">1.4.5.</span> <span class="toc-text">第五步：要使用Spring Boot 3，需要继承这个开源项目。从官方指导文档中复制以下内容：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E6%AD%A5%EF%BC%9A%E6%B7%BB%E5%8A%A0Spring-Boot%E7%9A%84web-starter"><span class="toc-number">1.4.6.</span> <span class="toc-text">第六步：添加Spring Boot的web starter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E6%AD%A5%EF%BC%9A%E7%BC%96%E5%86%99Spring-Boot%E4%B8%BB%E5%85%A5%E5%8F%A3%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.4.7.</span> <span class="toc-text">第七步：编写Spring Boot主入口程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%85%AB%E6%AD%A5%EF%BC%9A%E7%BC%96%E5%86%99controller"><span class="toc-number">1.4.8.</span> <span class="toc-text">第八步：编写controller</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B9%9D%E6%AD%A5%EF%BC%9A%E8%BF%90%E8%A1%8Cmain%E6%96%B9%E6%B3%95%E5%B0%B1%E6%98%AF%E5%90%AF%E5%8A%A8web%E5%AE%B9%E5%99%A8"><span class="toc-number">1.4.9.</span> <span class="toc-text">第九步：运行main方法就是启动web容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E6%AD%A5%EF%BC%9A%E6%89%93%E5%BC%80%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AE%BF%E9%97%AE"><span class="toc-number">1.4.10.</span> <span class="toc-text">第十步：打开浏览器访问</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%BF%E6%8D%B7%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E5%BC%8F"><span class="toc-number">1.5.</span> <span class="toc-text">便捷的部署方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%93jar%E5%8C%85%E8%BF%90%E8%A1%8C"><span class="toc-number">1.5.1.</span> <span class="toc-text">打jar包运行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringBoot%E7%9A%84jar%E5%8C%85%E5%92%8C%E6%99%AE%E9%80%9Ajar%E5%8C%85%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%88%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%89"><span class="toc-number">1.5.2.</span> <span class="toc-text">SpringBoot的jar包和普通jar包的区别（面试题）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring-Boot%E8%84%9A%E6%89%8B%E6%9E%B6"><span class="toc-number">1.6.</span> <span class="toc-text">Spring Boot脚手架</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%84%9A%E6%89%8B%E6%9E%B6"><span class="toc-number">1.6.1.</span> <span class="toc-text">什么是脚手架</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BB%BA%E7%AD%91%E5%B7%A5%E7%A8%8B%E4%B8%AD%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6"><span class="toc-number">1.6.1.1.</span> <span class="toc-text">建筑工程中的脚手架</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6"><span class="toc-number">1.6.1.2.</span> <span class="toc-text">软件开发中的脚手架</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Spring-Boot%E8%84%9A%E6%89%8B%E6%9E%B6-1"><span class="toc-number">1.6.1.3.</span> <span class="toc-text">Spring Boot脚手架</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%AE%98%E6%96%B9%E6%8F%90%E4%BE%9B%E7%9A%84"><span class="toc-number">1.6.2.</span> <span class="toc-text">使用官方提供的</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%AE%98%E6%96%B9%E8%84%9A%E6%89%8B%E6%9E%B6%E7%94%9F%E6%88%90Spring-Boot%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.6.2.1.</span> <span class="toc-text">使用官方脚手架生成Spring Boot项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%86%E9%A1%B9%E7%9B%AE%E6%94%BE%E5%88%B0IDEA%E5%BD%93%E4%B8%AD"><span class="toc-number">1.6.2.2.</span> <span class="toc-text">将项目放到IDEA当中</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%84%9A%E6%89%8B%E6%9E%B6%E7%94%9F%E6%88%90%E7%9A%84pom-xml%E6%96%87%E4%BB%B6"><span class="toc-number">1.6.2.3.</span> <span class="toc-text">脚手架生成的pom.xml文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%84%9A%E6%89%8B%E6%9E%B6%E7%94%9F%E6%88%90%E7%9A%84Spring-Boot%E9%A1%B9%E7%9B%AE%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-number">1.6.2.4.</span> <span class="toc-text">脚手架生成的Spring Boot项目的结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E5%86%99controller%E5%B9%B6%E6%B5%8B%E8%AF%95"><span class="toc-number">1.6.2.5.</span> <span class="toc-text">编写controller并测试</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E9%98%BF%E9%87%8C%E6%8F%90%E4%BE%9B%E7%9A%84"><span class="toc-number">1.6.3.</span> <span class="toc-text">使用阿里提供的</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8IDEA%E5%B7%A5%E5%85%B7%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6%E6%8F%92%E4%BB%B6"><span class="toc-number">1.6.4.</span> <span class="toc-text">使用IDEA工具的脚手架插件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC2%E7%AB%A0-Spring-Boot%E6%A0%B8%E5%BF%83%E6%9C%BA%E5%88%B6"><span class="toc-number">2.</span> <span class="toc-text">第2章 Spring Boot核心机制</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BD%95%E4%BB%A5%E7%BB%A7%E6%89%BF%E6%96%B9%E5%BC%8F%E5%BC%95%E5%85%A5SpringBoot"><span class="toc-number">2.1.</span> <span class="toc-text">为何以继承方式引入SpringBoot</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%90%E5%87%BA%E7%96%91%E9%97%AE"><span class="toc-number">2.1.1.</span> <span class="toc-text">提出疑问</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%9C%E4%B8%BA%E7%88%B6%E9%A1%B9%E7%9B%AE%E5%92%8C%E4%BD%9C%E4%B8%BA%E4%BE%9D%E8%B5%96%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.1.2.</span> <span class="toc-text">作为父项目和作为依赖的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E7%90%86%E6%8F%AD%E6%99%93"><span class="toc-number">2.1.3.</span> <span class="toc-text">原理揭晓</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E7%BB%9F%E4%B8%80%E7%AE%A1%E7%90%86%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="toc-number">2.1.4.</span> <span class="toc-text">依赖统一管理的好处</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Starter-%E5%90%AF%E5%8A%A8%E5%99%A8"><span class="toc-number">2.2.</span> <span class="toc-text">Starter-启动器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E5%99%A8%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-number">2.2.1.</span> <span class="toc-text">启动器实现原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%83%BD%E6%9C%89%E5%93%AA%E4%BA%9B%E5%90%AF%E5%8A%A8%E5%99%A8"><span class="toc-number">2.2.2.</span> <span class="toc-text">都有哪些启动器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%98%E6%96%B9%E6%8F%90%E4%BE%9B%E7%9A%84%E5%90%AF%E5%8A%A8%E5%99%A8"><span class="toc-number">2.2.2.1.</span> <span class="toc-text">官方提供的启动器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%9E%E5%AE%98%E6%96%B9%E7%9A%84%E5%90%AF%E5%8A%A8%E5%99%A8"><span class="toc-number">2.2.2.2.</span> <span class="toc-text">非官方的启动器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring-Boot%E6%A0%B8%E5%BF%83%E6%B3%A8%E8%A7%A3"><span class="toc-number">2.3.</span> <span class="toc-text">Spring Boot核心注解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringBootApplication%E6%B3%A8%E8%A7%A3"><span class="toc-number">2.3.1.</span> <span class="toc-text">@SpringBootApplication注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E-SpringBootConfiguration-%E6%B3%A8%E8%A7%A3%EF%BC%9A"><span class="toc-number">2.3.2.</span> <span class="toc-text">关于 @SpringBootConfiguration 注解：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E-EnableAutoConfiguration-%E6%B3%A8%E8%A7%A3%EF%BC%9A"><span class="toc-number">2.3.3.</span> <span class="toc-text">关于 @EnableAutoConfiguration 注解：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E-ComponentScan-%E6%B3%A8%E8%A7%A3%EF%BC%9A"><span class="toc-number">2.3.4.</span> <span class="toc-text">关于 @ComponentScan 注解：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring-Boot%E7%9A%84%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%EF%BC%88%E6%B2%A1%E7%9C%8B%E6%87%82%EF%BC%89"><span class="toc-number">2.4.</span> <span class="toc-text">Spring Boot的单元测试（没看懂）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E4%BD%BF%E7%94%A8%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E6%80%8E%E4%B9%88%E8%B0%83%E7%94%A8service"><span class="toc-number">2.4.1.</span> <span class="toc-text">不使用单元测试怎么调用service</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%A8%A1%E5%9D%97"><span class="toc-number">2.4.1.1.</span> <span class="toc-text">创建模块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E5%86%99service"><span class="toc-number">2.4.1.2.</span> <span class="toc-text">编写service</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E5%9C%A8%E5%85%A5%E5%8F%A3%E7%A8%8B%E5%BA%8F%E4%B8%AD%E8%B0%83%E7%94%A8service"><span class="toc-number">2.4.1.3.</span> <span class="toc-text">直接在入口程序中调用service</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E6%80%8E%E4%B9%88%E8%B0%83%E7%94%A8service"><span class="toc-number">2.4.2.</span> <span class="toc-text">使用单元测试怎么调用service</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#test-starter%E5%BC%95%E5%85%A5%E4%BB%A5%E5%8F%8A%E6%B5%8B%E8%AF%95%E7%B1%BB%E7%BC%96%E5%86%99"><span class="toc-number">2.4.2.1.</span> <span class="toc-text">test-starter引入以及测试类编写</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SpringBootTest%E6%B3%A8%E8%A7%A3"><span class="toc-number">2.4.2.2.</span> <span class="toc-text">@SpringBootTest注解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5service%E5%B9%B6%E8%B0%83%E7%94%A8"><span class="toc-number">2.4.2.3.</span> <span class="toc-text">注入service并调用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%96%E9%83%A8%E5%8C%96%E9%85%8D%E7%BD%AE"><span class="toc-number">2.5.</span> <span class="toc-text">外部化配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%A4%96%E9%83%A8%E5%8C%96%E9%85%8D%E7%BD%AE"><span class="toc-number">2.5.1.</span> <span class="toc-text">什么是外部化配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%96%E9%83%A8%E5%8C%96%E9%85%8D%E7%BD%AE%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">2.5.1.1.</span> <span class="toc-text">外部化配置的方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%96%E9%83%A8%E5%8C%96%E9%85%8D%E7%BD%AE%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-number">2.5.1.2.</span> <span class="toc-text">外部化配置的优势</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%96%E9%83%A8%E5%8C%96%E9%85%8D%E7%BD%AE%E5%AF%B9%E6%AF%94%E4%BC%A0%E7%BB%9F%E9%85%8D%E7%BD%AE"><span class="toc-number">2.5.1.3.</span> <span class="toc-text">外部化配置对比传统配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#application-properties"><span class="toc-number">2.5.2.</span> <span class="toc-text">application.properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Value%E6%B3%A8%E8%A7%A3"><span class="toc-number">2.5.3.</span> <span class="toc-text">使用@Value注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#YAML"><span class="toc-number">2.5.4.</span> <span class="toc-text">YAML</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#YAML%E6%A6%82%E8%BF%B0"><span class="toc-number">2.5.4.1.</span> <span class="toc-text">YAML概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E5%92%8C%E4%BA%A4%E6%8D%A2%E6%A0%BC%E5%BC%8F"><span class="toc-number">2.5.4.2.</span> <span class="toc-text">常见的数据存储和交换格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#YAML%E7%9A%84%E8%AF%AD%E6%B3%95%E8%A7%84%E5%88%99"><span class="toc-number">2.5.4.3.</span> <span class="toc-text">YAML的语法规则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#YAML%E7%9A%84%E4%BD%BF%E7%94%A8%E5%B0%8F%E7%BB%86%E8%8A%82"><span class="toc-number">2.5.4.4.</span> <span class="toc-text">YAML的使用小细节</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%90%88%E5%B9%B6"><span class="toc-number">2.5.5.</span> <span class="toc-text">配置文件合并</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#properties%E6%96%87%E4%BB%B6"><span class="toc-number">2.5.5.1.</span> <span class="toc-text">properties文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#yaml%E6%96%87%E4%BB%B6"><span class="toc-number">2.5.5.2.</span> <span class="toc-text">yaml文件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%88%87%E6%8D%A2"><span class="toc-number">2.5.6.</span> <span class="toc-text">多环境切换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86%E9%85%8D%E7%BD%AE%E7%BB%91%E5%AE%9A%E5%88%B0bean"><span class="toc-number">2.5.7.</span> <span class="toc-text">将配置绑定到bean</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%91%E5%AE%9A%E7%AE%80%E5%8D%95bean"><span class="toc-number">2.5.7.1.</span> <span class="toc-text">绑定简单bean</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%91%E5%AE%9A%E5%B5%8C%E5%A5%97bean"><span class="toc-number">2.5.7.2.</span> <span class="toc-text">绑定嵌套bean</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#EnableConfigurationProperties%E4%B8%8E-ConfigurationPropertiesScan"><span class="toc-number">2.5.7.3.</span> <span class="toc-text">@EnableConfigurationProperties与@ConfigurationPropertiesScan</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%86%E9%85%8D%E7%BD%AE%E8%B5%8B%E5%80%BC%E5%88%B0Bean%E7%9A%84Map-List-Array%E5%B1%9E%E6%80%A7%E4%B8%8A"><span class="toc-number">2.5.7.4.</span> <span class="toc-text">将配置赋值到Bean的Map&#x2F;List&#x2F;Array属性上</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%86%E9%85%8D%E7%BD%AE%E7%BB%91%E5%AE%9A%E5%88%B0%E7%AC%AC%E4%B8%89%E6%96%B9%E5%AF%B9%E8%B1%A1"><span class="toc-number">2.5.7.5.</span> <span class="toc-text">将配置绑定到第三方对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E6%95%B0%E6%8D%AE%E6%9D%A5%E6%BA%90"><span class="toc-number">2.5.7.6.</span> <span class="toc-text">指定数据来源</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ImportResource%E6%B3%A8%E8%A7%A3"><span class="toc-number">2.5.8.</span> <span class="toc-text">@ImportResource注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Environment"><span class="toc-number">2.5.9.</span> <span class="toc-text">Environment</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring-Boot%E4%B8%AD%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8CAOP%E7%9A%84%E5%BC%80%E5%8F%91%EF%BC%88%E9%9C%80%E8%A6%81%E8%A1%A5%E4%B9%A0%EF%BC%89"><span class="toc-number">2.6.</span> <span class="toc-text">Spring Boot中如何进行AOP的开发（需要补习）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Spring-Boot-AOP%E6%A6%82%E8%BF%B0"><span class="toc-number">2.6.1.</span> <span class="toc-text">Spring Boot AOP概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Spring-Boot-AOP%E5%AE%9E%E7%8E%B0"><span class="toc-number">2.6.2.</span> <span class="toc-text">Spring Boot AOP实现</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BASpring-Boot%E9%A1%B9%E7%9B%AE%E5%BC%95%E5%85%A5aop%E5%90%AF%E5%8A%A8%E5%99%A8"><span class="toc-number">2.6.2.1.</span> <span class="toc-text">创建Spring Boot项目引入aop启动器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%96%E5%86%99service%E5%B9%B6%E6%8F%90%E4%BE%9B%E6%96%B9%E6%B3%95"><span class="toc-number">2.6.2.2.</span> <span class="toc-text">编写service并提供方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E5%88%87%E9%9D%A2"><span class="toc-number">2.6.2.3.</span> <span class="toc-text">编写切面</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-number">2.6.2.4.</span> <span class="toc-text">测试</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC3%E7%AB%A0-SSM%E6%95%B4%E5%90%88"><span class="toc-number">3.</span> <span class="toc-text">第3章 SSM整合</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B4%E5%90%88%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6MyBatis"><span class="toc-number">3.1.</span> <span class="toc-text">整合持久层框架MyBatis</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E5%8F%8A%E6%95%B0%E6%8D%AE"><span class="toc-number">3.1.1.</span> <span class="toc-text">准备数据库表及数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BASpringBoot%E9%A1%B9%E7%9B%AE"><span class="toc-number">3.1.2.</span> <span class="toc-text">创建SpringBoot项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E6%95%B0%E6%8D%AE%E6%BA%90%E9%85%8D%E7%BD%AE"><span class="toc-number">3.1.3.</span> <span class="toc-text">编写数据源配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E5%AE%9E%E4%BD%93%E7%B1%BBVip"><span class="toc-number">3.1.4.</span> <span class="toc-text">编写实体类Vip</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99Mapper%E6%8E%A5%E5%8F%A3"><span class="toc-number">3.1.5.</span> <span class="toc-text">编写Mapper接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99Mapper%E6%8E%A5%E5%8F%A3%E7%9A%84XML%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">3.1.6.</span> <span class="toc-text">编写Mapper接口的XML配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0Mapper%E7%9A%84%E6%89%AB%E6%8F%8F"><span class="toc-number">3.1.7.</span> <span class="toc-text">添加Mapper的扫描</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%8A%E8%AF%89MyBatis%E6%A1%86%E6%9E%B6MapperXML%E6%96%87%E4%BB%B6%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="toc-number">3.1.8.</span> <span class="toc-text">告诉MyBatis框架MapperXML文件的位置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lombok%E5%BA%93"><span class="toc-number">3.2.</span> <span class="toc-text">Lombok库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96"><span class="toc-number">3.2.1.</span> <span class="toc-text">添加依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IDEA%E4%B8%AD%E5%AE%89%E8%A3%85Lombok%E6%8F%92%E4%BB%B6"><span class="toc-number">3.2.2.</span> <span class="toc-text">IDEA中安装Lombok插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lombok-%E7%9A%84%E4%B8%BB%E8%A6%81%E6%B3%A8%E8%A7%A3"><span class="toc-number">3.2.3.</span> <span class="toc-text">Lombok 的主要注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-Lombok%EF%BC%9F"><span class="toc-number">3.2.4.</span> <span class="toc-text">如何使用 Lombok？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lombok%E7%9A%84%E5%85%B6%E4%BB%96%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3"><span class="toc-number">3.2.5.</span> <span class="toc-text">Lombok的其他常用注解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Value"><span class="toc-number">3.2.5.1.</span> <span class="toc-text">@Value</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Builder"><span class="toc-number">3.2.5.2.</span> <span class="toc-text">@Builder</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#GoF23%E7%A7%8D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E4%B8%80%EF%BC%9A%E5%BB%BA%E9%80%A0%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.2.5.2.1.</span> <span class="toc-text">GoF23种设计模式之一：建造模式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BB%BA%E9%80%A0%E6%A8%A1%E5%BC%8F%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="toc-number">3.2.5.2.2.</span> <span class="toc-text">建造模式的代码</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Builder%E6%B3%A8%E8%A7%A3%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E5%BB%BA%E9%80%A0%E6%A8%A1%E5%BC%8F%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="toc-number">3.2.5.2.3.</span> <span class="toc-text">使用@Builder注解自动生成建造模式的代码</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Singular"><span class="toc-number">3.2.5.3.</span> <span class="toc-text">@Singular</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Slf4j"><span class="toc-number">3.2.5.4.</span> <span class="toc-text">@Slf4j</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="toc-number">3.2.5.4.1.</span> <span class="toc-text">使用示例</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E5%90%88%E9%80%82%E7%9A%84%E6%B3%A8%E8%A7%A3"><span class="toc-number">3.2.5.4.2.</span> <span class="toc-text">选择合适的注解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">3.2.5.4.3.</span> <span class="toc-text">注意事项</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%BE%9D%E8%B5%96"><span class="toc-number">3.2.5.4.4.</span> <span class="toc-text">示例依赖</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis%E9%80%86%E5%90%91%E7%94%9F%E6%88%90"><span class="toc-number">3.3.</span> <span class="toc-text">MyBatis逆向生成</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6free-mybatis-tools"><span class="toc-number">3.3.1.</span> <span class="toc-text">安装插件free mybatis tools</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8IDEA%E4%B8%AD%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">3.3.2.</span> <span class="toc-text">在IDEA中配置数据源数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%84%9A%E6%89%8B%E6%9E%B6%E5%88%9B%E5%BB%BASpringBoot%E9%A1%B9%E7%9B%AE"><span class="toc-number">3.3.3.</span> <span class="toc-text">使用脚手架创建SpringBoot项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E6%88%90MyBatis%E4%BB%A3%E7%A0%81%E6%94%BE%E5%88%B0SpringBoot%E9%A1%B9%E7%9B%AE%E4%B8%AD"><span class="toc-number">3.3.4.</span> <span class="toc-text">生成MyBatis代码放到SpringBoot项目中</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99mybatis%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE"><span class="toc-number">3.3.5.</span> <span class="toc-text">编写mybatis相关配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E6%B5%8B%E8%AF%95%E7%A8%8B%E5%BA%8F"><span class="toc-number">3.3.6.</span> <span class="toc-text">编写测试程序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B4%E5%90%88SpringMVC%EF%BC%88SSM%E6%95%B4%E5%90%88%EF%BC%89"><span class="toc-number">3.4.</span> <span class="toc-text">整合SpringMVC（SSM整合）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%84%9A%E6%89%8B%E6%9E%B6%E5%88%9B%E5%BB%BASpringBoot%E9%A1%B9%E7%9B%AE-1"><span class="toc-number">3.4.1.</span> <span class="toc-text">使用脚手架创建SpringBoot项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8free-mybatis-tool%E6%8F%92%E4%BB%B6%E9%80%86%E5%90%91%E7%94%9F%E6%88%90MyBatis%E4%BB%A3%E7%A0%81"><span class="toc-number">3.4.2.</span> <span class="toc-text">使用free mybatis tool插件逆向生成MyBatis代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B4%E5%90%88MyBatis"><span class="toc-number">3.4.3.</span> <span class="toc-text">整合MyBatis</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99service-1"><span class="toc-number">3.4.4.</span> <span class="toc-text">编写service</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99controller"><span class="toc-number">3.4.5.</span> <span class="toc-text">编写controller</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%B5%8B%E8%AF%95"><span class="toc-number">3.4.6.</span> <span class="toc-text">启动服务器测试</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC4%E7%AB%A0-Spring-Boot%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">4.</span> <span class="toc-text">第4章 Spring Boot自动配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E6%A6%82%E8%BF%B0"><span class="toc-number">4.1.</span> <span class="toc-text">自动配置概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringBoot%E7%9A%84%E4%B8%A4%E5%A4%A7%E6%A0%B8%E5%BF%83"><span class="toc-number">4.1.1.</span> <span class="toc-text">SpringBoot的两大核心</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%93%E4%BC%9A%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%B8%A6%E6%9D%A5%E7%9A%84%E4%BE%BF%E6%8D%B7"><span class="toc-number">4.1.2.</span> <span class="toc-text">体会自动配置带来的便捷</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E5%85%A5web%E5%90%AF%E5%8A%A8%E5%99%A8%E9%83%BD%E6%9C%89%E5%93%AA%E4%BA%9B%E7%BB%84%E4%BB%B6%E4%BC%9A%E5%87%86%E5%A4%87%E5%A5%BD"><span class="toc-number">4.1.3.</span> <span class="toc-text">引入web启动器都有哪些组件会准备好</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E7%9A%84%E5%8C%85%E6%89%AB%E6%8F%8F%E8%A7%84%E5%88%99"><span class="toc-number">4.1.4.</span> <span class="toc-text">默认的包扫描规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE"><span class="toc-number">4.1.5.</span> <span class="toc-text">默认配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E6%98%AF%E6%8C%89%E9%9C%80%E5%8A%A0%E8%BD%BD%E7%9A%84"><span class="toc-number">4.1.6.</span> <span class="toc-text">自动配置是按需加载的</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringBoot%E6%A1%86%E6%9E%B6%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9D%A1%E4%BB%B6%E6%B3%A8%E8%A7%A3"><span class="toc-number">4.1.7.</span> <span class="toc-text">SpringBoot框架提供的条件注解</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-number">4.2.</span> <span class="toc-text">自动配置实现原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E7%A8%8B%E5%BA%8F%E6%B2%A1%E6%9C%89%E5%BC%80%E5%A7%8B%E6%89%A7%E8%A1%8C%E4%B9%8B%E5%89%8D%E9%83%BD%E5%AF%BC%E5%85%A5%E4%BA%86%E5%93%AA%E4%BA%9B%E4%BE%9D%E8%B5%96"><span class="toc-number">4.2.1.</span> <span class="toc-text">在程序没有开始执行之前都导入了哪些依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8Emain%E6%96%B9%E6%B3%95%E5%BC%80%E5%A7%8B%E6%89%A7%E8%A1%8C%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88"><span class="toc-number">4.2.2.</span> <span class="toc-text">从main方法开始执行之后都发生了什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E7%B1%BB%E9%83%BD%E5%B9%B2%E4%BA%86%E5%95%A5"><span class="toc-number">4.2.3.</span> <span class="toc-text">自动配置类都干了啥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86"><span class="toc-number">4.2.4.</span> <span class="toc-text">总结自动配置原理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC5%E7%AB%A0-Spring-Boot%E7%9A%84web%E5%BC%80%E5%8F%91"><span class="toc-number">5.</span> <span class="toc-text">第5章 Spring Boot的web开发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringBoot%E7%9A%84web%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">5.1.</span> <span class="toc-text">SpringBoot的web自动配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#web%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E7%9A%84%E4%BE%9D%E8%B5%96%E6%98%AF%E5%A6%82%E4%BD%95%E4%BC%A0%E9%80%92%E7%9A%84%EF%BC%88%E8%BF%99%E4%B8%80%E9%83%A8%E5%88%86%E8%A7%86%E9%A2%91%E6%B2%A1%E8%AE%B2%E8%A7%A3%EF%BC%8C%E9%9A%8F%E4%BE%BF%E7%9C%8B%E7%9C%8B%EF%BC%89"><span class="toc-number">5.1.1.</span> <span class="toc-text">web自动配置的依赖是如何传递的（这一部分视频没讲解，随便看看）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#web%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-number">5.1.1.1.</span> <span class="toc-text">web自动配置的实现原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E8%BF%87web%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E7%B1%BB%E9%80%86%E6%8E%A8web%E9%85%8D%E7%BD%AE%E7%9A%84prefix"><span class="toc-number">5.1.1.2.</span> <span class="toc-text">通过web自动配置类逆推web配置的prefix</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Web%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E9%83%BD%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE%E4%BA%86%E4%BB%80%E4%B9%88"><span class="toc-number">5.1.2.</span> <span class="toc-text">Web自动配置都默认配置了什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WebMvcAutoConfiguration%E5%8E%9F%E7%90%86"><span class="toc-number">5.1.3.</span> <span class="toc-text">WebMvcAutoConfiguration原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#WebMvc%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E6%98%AF%E5%90%A6%E7%94%9F%E6%95%88%E7%9A%84%E6%9D%A1%E4%BB%B6"><span class="toc-number">5.1.3.1.</span> <span class="toc-text">WebMvc自动配置是否生效的条件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#WebMvc%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E7%94%9F%E6%95%88%E5%90%8E%E5%BC%95%E5%85%A5%E4%BA%86%E4%B8%A4%E4%B8%AAFilter-Bean"><span class="toc-number">5.1.3.2.</span> <span class="toc-text">WebMvc自动配置生效后引入了两个Filter Bean</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E4%BA%86HiddenHttpMethodFilter-Bean"><span class="toc-number">5.1.3.2.1.</span> <span class="toc-text">引入了HiddenHttpMethodFilter Bean</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E4%BA%86FormContentFilter-Bean"><span class="toc-number">5.1.3.2.2.</span> <span class="toc-text">引入了FormContentFilter Bean</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#WebMvc%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E7%94%9F%E6%95%88%E5%90%8E%E5%BC%95%E5%85%A5%E4%BA%86WebMvcConfigurer%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%B1%BB"><span class="toc-number">5.1.3.3.</span> <span class="toc-text">WebMvc自动配置生效后引入了WebMvcConfigurer接口的实现类</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E4%BA%8EWebMvcConfigurer%E6%8E%A5%E5%8F%A3"><span class="toc-number">5.1.3.3.1.</span> <span class="toc-text">关于WebMvcConfigurer接口</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#WebMvcConfigurer%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%B1%BBWebMvcAutoConfigurationAdapter"><span class="toc-number">5.1.3.3.2.</span> <span class="toc-text">WebMvcConfigurer接口的实现类WebMvcAutoConfigurationAdapter</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E4%B8%AD%E7%9A%84%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E5%A4%84%E7%90%86"><span class="toc-number">5.1.4.</span> <span class="toc-text">自动配置中的静态资源处理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E5%A4%84%E7%90%86%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90"><span class="toc-number">5.1.4.1.</span> <span class="toc-text">静态资源处理源码分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E4%BA%8EWebJars%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E5%A4%84%E7%90%86"><span class="toc-number">5.1.4.2.</span> <span class="toc-text">关于WebJars静态资源处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E6%99%AE%E9%80%9A%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E5%A4%84%E7%90%86"><span class="toc-number">5.1.4.3.</span> <span class="toc-text">关于普通静态资源处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E7%BC%93%E5%AD%98%E5%A4%84%E7%90%86"><span class="toc-number">5.1.4.4.</span> <span class="toc-text">关于静态资源缓存处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E7%BC%93%E5%AD%98%E6%B5%8B%E8%AF%95"><span class="toc-number">5.1.4.5.</span> <span class="toc-text">静态资源缓存测试</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#web%E5%BA%94%E7%94%A8%E7%9A%84%E6%AC%A2%E8%BF%8E%E9%A1%B5%E9%9D%A2"><span class="toc-number">5.1.4.6.</span> <span class="toc-text">web应用的欢迎页面</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%AC%A2%E8%BF%8E%E9%A1%B5%E6%B5%8B%E8%AF%95"><span class="toc-number">5.1.4.6.1.</span> <span class="toc-text">欢迎页测试</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%AC%A2%E8%BF%8E%E9%A1%B5%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90"><span class="toc-number">5.1.4.6.2.</span> <span class="toc-text">欢迎页源码分析</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%80%E4%B8%AA%E5%B0%8F%E5%B0%8F%E7%9A%84%E7%96%91%E6%83%91"><span class="toc-number">5.1.4.6.3.</span> <span class="toc-text">一个小小的疑惑</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#favorite-icon%EF%BC%88%E5%B0%8F%E5%9B%BE%E6%A0%87%EF%BC%89"><span class="toc-number">5.1.4.6.4.</span> <span class="toc-text">favorite icon（小图标）</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringBoot%E7%9A%84web%E6%89%8B%E5%8A%A8%E9%85%8D%E7%BD%AE-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E5%A4%84%E7%90%86"><span class="toc-number">5.2.</span> <span class="toc-text">SpringBoot的web手动配置(静态资源处理)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%96%B9%E5%BC%8F"><span class="toc-number">5.2.1.</span> <span class="toc-text">配置文件方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E4%BB%A3%E7%A0%81%E6%96%B9%E5%BC%8F"><span class="toc-number">5.2.2.</span> <span class="toc-text">编写代码方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">5.2.2.1.</span> <span class="toc-text">第一种方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">5.2.2.2.</span> <span class="toc-text">第二种方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E9%85%8D%E7%BD%AE%E4%B9%9F%E8%BF%99%E6%A0%B7%E5%81%9A%E5%8D%B3%E5%8F%AF"><span class="toc-number">5.2.2.3.</span> <span class="toc-text">其他配置也这样做即可</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%8F%AA%E8%A6%81%E5%AE%B9%E5%99%A8%E4%B8%AD%E6%9C%89WebMvcConfigurer%E7%BB%84%E4%BB%B6%E5%8D%B3%E5%8F%AF%E5%91%A2"><span class="toc-number">5.2.2.4.</span> <span class="toc-text">为什么只要容器中有WebMvcConfigurer组件即可呢</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#web%E8%AF%B7%E6%B1%82%E7%9A%84%E8%B7%AF%E5%BE%84%E5%8C%B9%E9%85%8D"><span class="toc-number">5.3.</span> <span class="toc-text">web请求的路径匹配</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#AntPathMatcher"><span class="toc-number">5.3.1.</span> <span class="toc-text">AntPathMatcher</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PathPatternParser"><span class="toc-number">5.3.2.</span> <span class="toc-text">PathPatternParser</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E5%BE%84%E5%8C%B9%E9%85%8D%E7%9B%B8%E5%85%B3%E6%BA%90%E7%A0%81"><span class="toc-number">5.3.3.</span> <span class="toc-text">路径匹配相关源码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E5%8D%8F%E5%95%86"><span class="toc-number">5.4.</span> <span class="toc-text">内容协商</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E5%86%85%E5%AE%B9%E5%8D%8F%E5%95%86%E7%9A%84%E7%90%86%E8%A7%A3"><span class="toc-number">5.4.1.</span> <span class="toc-text">对内容协商的理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%86%85%E5%AE%B9%E5%8D%8F%E5%95%86%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">5.4.2.</span> <span class="toc-text">实现内容协商的两种方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E8%BF%87HTTP%E8%AF%B7%E6%B1%82%E5%A4%B4%EF%BC%88%E5%A6%82-Accept%EF%BC%89"><span class="toc-number">5.4.2.1.</span> <span class="toc-text">通过HTTP请求头（如 Accept）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%EF%BC%88%E5%A6%82-format%EF%BC%89"><span class="toc-number">5.4.2.2.</span> <span class="toc-text">通过请求参数（如 format）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HttpMessageConverter%E6%8E%A5%E5%8F%A3"><span class="toc-number">5.4.3.</span> <span class="toc-text">HttpMessageConverter接口</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HttpMessageConverter%E7%9A%84%E7%90%86%E8%A7%A3"><span class="toc-number">5.4.3.1.</span> <span class="toc-text">HttpMessageConverter的理解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84HttpMessageConverter"><span class="toc-number">5.4.3.2.</span> <span class="toc-text">常见的HttpMessageConverter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E6%97%B6%E9%80%9A%E8%BF%87%E5%93%AA%E4%BA%9B%E6%9D%A1%E4%BB%B6%E7%A1%AE%E5%AE%9A%E4%BD%BF%E7%94%A8%E5%93%AA%E4%B8%AA%E8%BD%AC%E6%8D%A2%E5%99%A8"><span class="toc-number">5.4.3.3.</span> <span class="toc-text">请求时通过哪些条件确定使用哪个转换器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E6%97%B6%E9%80%9A%E8%BF%87%E5%93%AA%E4%BA%9B%E6%9D%A1%E4%BB%B6%E7%A1%AE%E5%AE%9A%E4%BD%BF%E7%94%A8%E5%93%AA%E4%B8%AA%E8%BD%AC%E6%8D%A2%E5%99%A8"><span class="toc-number">5.4.3.4.</span> <span class="toc-text">响应时通过哪些条件确定使用哪个转换器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E9%BB%98%E8%AE%A4%E6%8F%90%E4%BE%9B%E4%BA%86%E5%93%AA%E4%BA%9BHttpMessageConverter"><span class="toc-number">5.4.3.5.</span> <span class="toc-text">系统默认提供了哪些HttpMessageConverter</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E8%87%AA%E5%B7%B1%E7%9A%84HttpMessageConverter"><span class="toc-number">5.4.4.</span> <span class="toc-text">定义自己的HttpMessageConverter</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E5%BC%95%E5%85%A5%E8%83%BD%E5%A4%9F%E5%A4%84%E7%90%86yaml%E6%A0%BC%E5%BC%8F%E7%9A%84%E4%BE%9D%E8%B5%96"><span class="toc-number">5.4.4.1.</span> <span class="toc-text">第一步：引入能够处理yaml格式的依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E6%96%B0%E5%A2%9E%E4%B8%80%E7%A7%8D%E5%AA%92%E4%BD%93%E7%B1%BB%E5%9E%8Byaml"><span class="toc-number">5.4.4.2.</span> <span class="toc-text">第二步：新增一种媒体类型yaml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89HttpMessageConverter"><span class="toc-number">5.4.4.3.</span> <span class="toc-text">第三步：自定义HttpMessageConverter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%E9%85%8D%E7%BD%AE%E6%B6%88%E6%81%AF%E8%BD%AC%E6%8D%A2%E5%99%A8"><span class="toc-number">5.4.4.4.</span> <span class="toc-text">第四步：配置消息转换器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringBoot%E6%95%B4%E5%90%88Thymeleaf"><span class="toc-number">5.5.</span> <span class="toc-text">SpringBoot整合Thymeleaf</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E7%BB%9Fweb%E5%BA%94%E7%94%A8%E5%92%8C%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB"><span class="toc-number">5.5.1.</span> <span class="toc-text">传统web应用和前后端分离</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringBoot%E6%95%B4%E5%90%88Thymeleaf-1"><span class="toc-number">5.5.2.</span> <span class="toc-text">SpringBoot整合Thymeleaf</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Thymeleaf%E7%9A%84%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">5.5.3.</span> <span class="toc-text">Thymeleaf的自动配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Thymeleaf%E6%A0%B8%E5%BF%83%E8%AF%AD%E6%B3%95"><span class="toc-number">5.5.4.</span> <span class="toc-text">Thymeleaf核心语法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#th-text%E4%B8%8Eth-utext-%E6%9B%BF%E6%8D%A2%E6%A0%87%E7%AD%BE%E4%BD%93%E5%86%85%E5%AE%B9"><span class="toc-number">5.5.4.1.</span> <span class="toc-text">th:text与th:utext 替换标签体内容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#th-%E4%BB%BB%E6%84%8F%E5%B1%9E%E6%80%A7%E5%90%8D-%E5%8A%A8%E6%80%81%E6%9B%BF%E6%8D%A2%E8%AF%A5%E5%B1%9E%E6%80%A7%E7%9A%84%E5%80%BC"><span class="toc-number">5.5.4.2.</span> <span class="toc-text">th:任意属性名 动态替换该属性的值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#th-attr-%E5%B1%9E%E6%80%A7%E5%90%88%E5%B9%B6%E8%AE%BE%E7%BD%AE"><span class="toc-number">5.5.4.3.</span> <span class="toc-text">th:attr 属性合并设置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#th-%E6%8C%87%E4%BB%A4"><span class="toc-number">5.5.4.4.</span> <span class="toc-text">th:指令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">5.5.4.5.</span> <span class="toc-text">@{} 表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#thymeleaf%E7%9A%84%E5%86%85%E7%BD%AE%E5%B7%A5%E5%85%B7"><span class="toc-number">5.5.4.6.</span> <span class="toc-text">thymeleaf的内置工具</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#thymeleaf%E4%B9%9F%E6%94%AF%E6%8C%81%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">5.5.4.7.</span> <span class="toc-text">thymeleaf也支持运算符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#thymeleaf%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8B%BC%E6%8E%A5"><span class="toc-number">5.5.4.8.</span> <span class="toc-text">thymeleaf的字符串拼接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E9%81%8D%E5%8E%86"><span class="toc-number">5.5.4.9.</span> <span class="toc-text">循环遍历</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%ADth-if"><span class="toc-number">5.5.4.10.</span> <span class="toc-text">条件判断th:if</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%ADth-switch"><span class="toc-number">5.5.4.11.</span> <span class="toc-text">条件判断th:switch</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#thymeleaf%E5%B1%9E%E6%80%A7%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-number">5.5.4.12.</span> <span class="toc-text">thymeleaf属性优先级</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%80%A6-%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">5.5.4.13.</span> <span class="toc-text">*{…} 表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5%E5%85%B1%E4%BA%AB"><span class="toc-number">5.5.4.14.</span> <span class="toc-text">代码片段共享</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#thymeleaf%E9%A1%B5%E9%9D%A2%E4%BF%AE%E6%94%B9%E5%A6%82%E4%BD%95%E7%AB%8B%E5%8D%B3%E7%94%9F%E6%95%88"><span class="toc-number">5.5.5.</span> <span class="toc-text">thymeleaf页面修改如何立即生效</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">5.6.</span> <span class="toc-text">异常处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E9%80%82%E5%BA%94%E7%9A%84%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6"><span class="toc-number">5.6.1.</span> <span class="toc-text">自适应的错误处理机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringMVC%E7%9A%84%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%96%B9%E6%A1%88"><span class="toc-number">5.6.2.</span> <span class="toc-text">SpringMVC的错误处理方案</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E6%8E%A7%E5%88%B6-ExceptionHandler"><span class="toc-number">5.6.2.1.</span> <span class="toc-text">局部控制 @ExceptionHandler</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E6%8E%A7%E5%88%B6-ControllerAdvice-ExceptionHandler"><span class="toc-number">5.6.2.2.</span> <span class="toc-text">全局控制 @ControllerAdvice + @ExceptionHandler</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringBoot%E7%9A%84%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%96%B9%E6%A1%88"><span class="toc-number">5.6.3.</span> <span class="toc-text">SpringBoot的错误处理方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%9C%A8%E9%94%99%E8%AF%AF%E9%A1%B5%E8%8E%B7%E5%8F%96%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF"><span class="toc-number">5.6.4.</span> <span class="toc-text">如何在错误页获取错误信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%A1%B9%E7%9B%AE%E7%9A%84%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%96%B9%E6%A1%88"><span class="toc-number">5.6.5.</span> <span class="toc-text">前后端分离项目的错误处理方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E8%B4%9F%E8%B4%A3%E9%A1%B5%E9%9D%A2%E6%B8%B2%E6%9F%93%E7%9A%84%E9%A1%B9%E7%9B%AE%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%96%B9%E6%A1%88"><span class="toc-number">5.6.6.</span> <span class="toc-text">服务器端负责页面渲染的项目错误处理方案</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BD%E9%99%85%E5%8C%96%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89"><span class="toc-number">5.7.</span> <span class="toc-text">国际化（了解）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%9B%BD%E9%99%85%E5%8C%96"><span class="toc-number">5.7.1.</span> <span class="toc-text">实现国际化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6"><span class="toc-number">5.7.1.1.</span> <span class="toc-text">第一步：创建资源文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E5%9C%A8%E6%A8%A1%E6%9D%BF%E6%96%87%E4%BB%B6%E4%B8%AD%E5%8F%96%E5%87%BA%E6%B6%88%E6%81%AF"><span class="toc-number">5.7.1.2.</span> <span class="toc-text">第二步：在模板文件中取出消息</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BD%E9%99%85%E5%8C%96%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-number">5.7.2.</span> <span class="toc-text">国际化实现原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E7%A8%8B%E5%BA%8F%E5%BD%93%E4%B8%AD%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E5%9B%BD%E9%99%85%E5%8C%96%E4%BF%A1%E6%81%AF"><span class="toc-number">5.7.3.</span> <span class="toc-text">在程序当中如何获取国际化信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E5%88%B6web%E5%AE%B9%E5%99%A8"><span class="toc-number">5.8.</span> <span class="toc-text">定制web容器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#web%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%87%E6%8D%A2%E4%B8%BAjetty"><span class="toc-number">5.8.1.</span> <span class="toc-text">web服务器切换为jetty</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#web%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%87%E6%8D%A2%E5%8E%9F%E7%90%86"><span class="toc-number">5.8.2.</span> <span class="toc-text">web服务器切换原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#web%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BC%98%E5%8C%96"><span class="toc-number">5.8.3.</span> <span class="toc-text">web服务器优化</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC6%E7%AB%A0-SpringBoot%E5%AE%9E%E7%94%A8%E6%8A%80%E6%9C%AF%E6%95%B4%E5%90%88"><span class="toc-number">6.</span> <span class="toc-text">第6章 SpringBoot实用技术整合</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#logo%E8%AE%BE%E7%BD%AE"><span class="toc-number">6.1.</span> <span class="toc-text">logo设置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E9%97%ADlogo%E5%9B%BE%E6%A0%87"><span class="toc-number">6.1.1.</span> <span class="toc-text">关闭logo图标</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F"><span class="toc-number">6.1.1.1.</span> <span class="toc-text">配置方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E6%96%B9%E5%BC%8F"><span class="toc-number">6.1.1.2.</span> <span class="toc-text">代码方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9logo%E5%9B%BE%E6%A0%87"><span class="toc-number">6.1.2.</span> <span class="toc-text">修改logo图标</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PageHelper%E6%95%B4%E5%90%88"><span class="toc-number">6.2.</span> <span class="toc-text">PageHelper整合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-number">6.2.1.</span> <span class="toc-text">引入依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E4%BB%A3%E7%A0%81"><span class="toc-number">6.2.2.</span> <span class="toc-text">编写代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#web%E5%B1%82%E5%93%8D%E5%BA%94%E7%BB%93%E6%9E%9C%E5%B0%81%E8%A3%85"><span class="toc-number">6.3.</span> <span class="toc-text">web层响应结果封装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85R%E5%AF%B9%E8%B1%A1"><span class="toc-number">6.3.1.</span> <span class="toc-text">封装R对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%94%B9%E8%BF%9BR%E5%AF%B9%E8%B1%A1"><span class="toc-number">6.3.2.</span> <span class="toc-text">改进R对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="toc-number">6.4.</span> <span class="toc-text">事务管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringBoot%E6%89%93war%E5%8C%85"><span class="toc-number">6.5.</span> <span class="toc-text">SpringBoot打war包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringBoot%E7%9A%84%E6%97%A5%E5%BF%97%E5%A4%84%E7%90%86"><span class="toc-number">6.6.</span> <span class="toc-text">SpringBoot的日志处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E6%A6%82%E8%BF%B0"><span class="toc-number">6.6.1.</span> <span class="toc-text">日志概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6%E5%8C%85%E6%8B%AC%E6%8A%BD%E8%B1%A1%E5%B1%82%E9%9D%A2%E7%9A%84%E5%92%8C%E5%85%B7%E4%BD%93%E5%B1%82%E9%9D%A2%E7%9A%84"><span class="toc-number">6.6.2.</span> <span class="toc-text">日志框架包括抽象层面的和具体层面的</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB%E6%A6%82%E8%BF%B0%EF%BC%9A"><span class="toc-number">6.6.3.</span> <span class="toc-text">日志级别概述：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%94%B9%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB%EF%BC%9A"><span class="toc-number">6.6.4.</span> <span class="toc-text">更改日志级别：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%B0%E5%AF%8C%E5%90%AF%E5%8A%A8%E6%97%A5%E5%BF%97"><span class="toc-number">6.6.5.</span> <span class="toc-text">丰富启动日志</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E7%9A%84%E7%B2%97%E7%BB%86%E7%B2%92%E5%BA%A6"><span class="toc-number">6.6.6.</span> <span class="toc-text">日志的粗细粒度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA%E5%88%B0%E6%96%87%E4%BB%B6"><span class="toc-number">6.6.7.</span> <span class="toc-text">日志输出到文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BB%9A%E5%8A%A8%E6%97%A5%E5%BF%97"><span class="toc-number">6.6.8.</span> <span class="toc-text">滚动日志</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6%E5%88%87%E6%8D%A2"><span class="toc-number">6.6.9.</span> <span class="toc-text">日志框架切换</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/da77c56c.html" title="MVC架构设计模式"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/blog/source/img/cover/4.png" onerror="this.onerror=null;this.src='https://cdn.dreamshelter.cn/blog/source/img/404.jpg'" alt="MVC架构设计模式"/></a><div class="content"><a class="title" href="/posts/da77c56c.html" title="MVC架构设计模式">MVC架构设计模式</a><time datetime="2026-11-14T16:24:00.000Z" title="发表于 2026-11-15 00:24:00">2026-11-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/e25feb6e.html" title="黑马程序员SSM"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/blog/source/img/cover/22.jpg" onerror="this.onerror=null;this.src='https://cdn.dreamshelter.cn/blog/source/img/404.jpg'" alt="黑马程序员SSM"/></a><div class="content"><a class="title" href="/posts/e25feb6e.html" title="黑马程序员SSM">黑马程序员SSM</a><time datetime="2026-02-03T03:14:00.000Z" title="发表于 2026-02-03 11:14:00">2026-02-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/eedaddf.html" title="博客笔记"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/blog/source/img/cover/20.jpg" onerror="this.onerror=null;this.src='https://cdn.dreamshelter.cn/blog/source/img/404.jpg'" alt="博客笔记"/></a><div class="content"><a class="title" href="/posts/eedaddf.html" title="博客笔记">博客笔记</a><time datetime="2026-02-03T02:50:00.000Z" title="发表于 2026-02-03 10:50:00">2026-02-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/5764bc58.html" title="饱了么前端"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/blog/source/img/cover/2.jpg" onerror="this.onerror=null;this.src='https://cdn.dreamshelter.cn/blog/source/img/404.jpg'" alt="饱了么前端"/></a><div class="content"><a class="title" href="/posts/5764bc58.html" title="饱了么前端">饱了么前端</a><time datetime="2026-02-03T02:50:00.000Z" title="发表于 2026-02-03 10:50:00">2026-02-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/2821e645.html" title="饱了么后端"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.dreamshelter.cn/blog/source/img/cover/24.png" onerror="this.onerror=null;this.src='https://cdn.dreamshelter.cn/blog/source/img/404.jpg'" alt="饱了么后端"/></a><div class="content"><a class="title" href="/posts/2821e645.html" title="饱了么后端">饱了么后端</a><time datetime="2026-02-03T02:50:00.000Z" title="发表于 2026-02-03 10:50:00">2026-02-03</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 - 2026 By Shelter</span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.4"></script><script src="/js/main.js?v=5.5.4"></script><script src="/js/tw_cn.js?v=5.5.4"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://blog.dreamshelter.cn/twikooapi/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = (el = document, path = location.pathname) => {
    twikoo.init({
      el: el.querySelector('#twikoo-wrap'),
      envId: 'https://blog.dreamshelter.cn/twikooapi/',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      },
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    

    isShuoshuo && (window.shuoshuoComment.destroyTwikoo = () => {
      if (el.children.length) {
        el.innerHTML = ''
        el.classList.add('no-comment')
      }
    })
  }

  const loadTwikoo = (el, path) => {
    if (typeof twikoo === 'object') setTimeout(() => init(el, path), 0)
    else btf.getScript('https://cdn.jsdelivr.net/npm/twikoo@1.6.44/dist/twikoo.all.min.js').then(() => init(el, path))
  }

  if (isShuoshuo) {
    'Twikoo' === 'Twikoo'
      ? window.shuoshuoComment = { loadComment: loadTwikoo }
      : window.loadOtherComment = loadTwikoo
    return
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script src="https://fastly.jsdelivr.net/npm/live2d-widgets@1.0.0/dist/autoload.js"></script><div class="aplayer no-destroy" data-id="17745883873" data-server="netease" data-type="playlist" data-order="list" data-fixed="true" data-preload="auto" data-autoplay="true" data-mutex="true" ></div><script id="canvas_nest" defer="defer" color="255,192,203" opacity="0" zIndex="-1" count="80" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js" defer="defer"></script><script>document.addEventListener('DOMContentLoaded', () => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"]):not([href=".aside-content"]):not([href="#aside-content"]):not([href=".card-clock
# Inject the css and script (aplayer/meting) aplayerInject: enable: true per_page: true
# 通知弹窗 # Snackbar - Toast Notification # https://github.com/polonel/SnackBar # position: top-left / top-center / top-right / bottom-left / bottom-center / bottom-right snackbar: enable: true position: top-right # The background color of Toast Notification in light mode and dark mode bg_light: "])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => {
      try {
        fn()
      } catch (err) {
        console.debug('Pjax callback failed:', err)
      }
    })
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      false
        ? pjax.loadUrl('/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})</script><div id="app-refresh" style="position: fixed; top: -2.2rem; left: 0; right: 0; z-index: 99999; padding: 0 1rem; font-size: 15px; height: 2.2rem; transition: all 0.3s ease;"><div class="app-refresh-wrap" style="display: flex; color: #fff; height: 100%; align-items: center; justify-content: center;"><label>🚀 有新内容发布啦！</label><a href="javascript:void(0)" onclick="location.reload()"><span style="color: #fff; text-decoration: underline; cursor: pointer; margin-left: 8px;">点击刷新</span></a></div></div><script>if ('serviceWorker' in navigator) {
  // 如果当前页面受 Service Worker 控制，监听控制权变化
  if (navigator.serviceWorker.controller) {
    navigator.serviceWorker.addEventListener('controllerchange', function() {
      showNotification();
    });
  }

  // 页面加载完成后注册 sw.js
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('/sw.js').catch(err => {
      console.error('PWA 注册失败:', err);
    });
  });
}

function showNotification() {
  // 优先使用主题自带的 Snackbar 弹窗
  if (window.GLOBAL_CONFIG && GLOBAL_CONFIG.Snackbar) {
    var snackbarBg = document.documentElement.getAttribute('data-theme') === 'light' ?
      GLOBAL_CONFIG.Snackbar.bgLight :
      GLOBAL_CONFIG.Snackbar.bgDark;
    
    var snackbarPos = GLOBAL_CONFIG.Snackbar.position;

    Snackbar.show({
      text: '🚀 有新文章发布啦！',
      backgroundColor: snackbarBg,
      duration: 10000, // 持续 10 秒
      pos: snackbarPos,
      actionText: '点击刷新',
      actionTextColor: '#fff',
      onActionClick: function(e) {
        location.reload();
      },
    });
  } else {
    // 如果没有 Snackbar，则显示顶部的 app-refresh 栏
    var showBg = document.documentElement.getAttribute('data-theme') === 'light' ? '#49b1f5' : '#1f1f1f';
    var appRefresh = document.getElementById('app-refresh');
    if (appRefresh) {
      appRefresh.style.cssText = 'top: 0; background: ' + showBg + ';';
    }
  }
}</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索点什么呢………" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.4"></script></div></div><!-- hexo injector body_end start -->
  <script data-pjax src="/js/hexo_githubcalendar.js"></script>
  <script data-pjax>
        function GithubCalendarConfig(){
            var git_githubapiurl ="https://vercelapi.dreamshelter.cn/api?user=shelter67";
            var git_color =['#ebedf0', '#a2f7af', '#6ce480', '#54ad63', '#469252', '#31753c', '#1f5f2a', '#13531f', '#084111', '#032b09', '#000000'];
            var git_user ="shelter67";
            var parent_div_git = document.getElementsByClassName('layout')[0];
            var git_div_html = '<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>';
            if(parent_div_git && location.pathname =='/gongxianban/'){
                console.log("已挂载hexo-github-calendar https://github.com/Barry-Flynn/hexo-github-calendar");
                // parent_div_git.innerHTML=git_div_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",git_div_html) // 有报错，但不影响使用(支持pjax跳转)
            };
            GithubCalendar(git_githubapiurl,git_color,git_user)
        }
        if(document.getElementsByClassName('layout')[0]){
            GithubCalendarConfig()
        }
    </script>
    <style>#github_container{min-height:280px}@media screen and (max-width:650px) {#github_container{background-image:;min-height:0px}}</style>
    <style></style><script data-pjax>
function hexo_butterfly_clock_remake_injector_config(){
  var parent_div_git;
  var item_html = `<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.cbd.int/hexo-butterfly-clock-veeink@1.0.7/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>`;

  // 按类型获取容器
  if ('class' === 'class') {
    parent_div_git = document.getElementsByClassName('aside-content')[0];
  } else if ('class' === 'id') {
    parent_div_git = document.getElementById('aside-content');
  } else {
    parent_div_git = document.getElementById('aside-content');
  }

  if(parent_div_git){
    var reference_el_before = null;
    var reference_el_after = parent_div_git.querySelector('.card-announcement');

    if(reference_el_before){
      parent_div_git.insertBefore(
        (function(){var temp = document.createElement('div'); temp.innerHTML = item_html; return temp;}()),
        reference_el_before
      );
    } else if(reference_el_after){
      reference_el_after.insertAdjacentHTML('afterend', item_html);
    } else {
      parent_div_git.insertAdjacentHTML('afterbegin', item_html);
    }
  }
}

console.log('已挂载 butterfly_clock_anzhiyu-yang 修复版');

// ---------- 全局变量声明 ----------
var cpage = location.pathname;
var epage = 'all';
var qweather_key = '0df3cf714a324957b16f3201e86fe931';
var qweather_api_host = 'https://p65ctvhqy4.re.qweatherapi.com';
var default_city = '';
var gaud_map_key = '296709bdb591a3523a2cf60e8e8f0ba3';

// ---------- 页面过滤 ----------
var elist = 'null'.split(',');
var flag = 0;
for(var i=0;i<elist.length;i++){
  if(cpage.includes(elist[i])) flag++;
}

if((epage === 'all') && (flag == 0)){
  hexo_butterfly_clock_remake_injector_config();
} else if(epage === cpage){
  hexo_butterfly_clock_remake_injector_config();
}
</script><script data-pjax src="/js/clock-min.js"></script><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementsByClassName('footer-other')[0];
    var item_html = '<div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v8.1.1" title=""><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题版本Butterfly_v5.5.4" title=""><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://cloud.tencent.com/" style="margin-inline:5px" data-title="本站由腾讯云提供服务器支持" title=""><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Server-Tencent%20Cloud-00A4FF?style=flat&amp;logo=qq&amp;logoColor=white" alt=""/></a><a class="github-badge" target="_blank" href="https://edgeone.ai/" style="margin-inline:5px" data-title="本站由腾讯云 EdgeOne 提供安全加速" title=""><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/CDN-EdgeOne-00A4FF?style=flat&amp;logo=iCloud&amp;logoColor=white" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title=""><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a><a class="github-badge" target="_blank" href="https://beian.miit.gov.cn/" style="margin-inline:5px" data-title="工业和信息化部ICP备案管理系统" title=""><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/%E9%B2%81ICP%E5%A4%87-2025199346%E5%8F%B7--1-ba9132?style=flat&amp;labelColor=443d38" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title=""><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></p>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="https://www.fomal.cc/static/js/runtime.js"></script><!-- hexo injector body_end end --></body></html>